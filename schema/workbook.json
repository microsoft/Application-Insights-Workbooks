{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json",
    "type": "object",
    "title": "Workbook template gallery schema",
    "required": [
        "version",
        "items"
    ],
    "properties": {
        "version": {
            "$id": "#/properties/version",
            "type": "string",
            "title": "Workbook version",
            "default": "Notebook/1.0",
            "pattern": "^(.*)$"
        },
        "items": {
            "$ref": "#/definitions/items"
        },
        "styleSettings": {
            "$id": "#/properties/styleSettings",
            "type": "object",
            "title": "Workbook style settings"
        },
        "defaultResourceIds": {
            "$id": "#/properties/defaultResourceIds",
            "type": "array",
            "description": "top level resources of the workbook, restored when the workbook is loaded"
        },
        "fallbackResourceIds": {
            "$id": "#/properties/fallbackResourceIds",
            "type": "array",
            "description": "resourceIds that are opened with the workbook. Used if the workbook is loaded later from a place * with no explicit context passed in (like from a share link or a pin)"
        },
        "$schema": {
            "$id": "#/properties/$schema",
            "type": "string",
            "title": "$schema",
            "default": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json",
            "pattern": "^(.*)$"
        }
    },
    "definitions": {
        "markdown": {
            "$id": "#/definitions/markdown",
            "type": "object",
            "required": [
                "type",
                "content"
            ],
            "properties": {
                "type": {
                    "const": 1
                },
                "content": {
                    "type": "object",
                    "properties": {
                        "json": {
                            "type": "string",
                            "examples": [
                                "## This is some markdown text"
                            ],
                            "tags": [
                                "localizable"
                            ]
                        },
                        "style": {
                            "type": "string",
                            "description": "a style value, or a parameter to get style value from",
                            "examples": [
                                "error", "info", "success", "upsell", "warning", "{parameter}"
                            ]
                        }
                    }
                },
                "name": {
                    "$ref": "#/definitions/name"
                },
                "customWidth": {
                    "$ref": "#/definitions/customWidth"
                },
                "showPin": {
                    "$ref": "#/definitions/showPin"
                },
                "styleSettings": {
                    "$ref": "#/definitions/styleSettings"
                },
                "conditionalVisibility": {
                    "$ref": "#/definitions/conditionalVisibility"
                }
            }
        },
        "metric": {
            "$id": "#/definitions/metric",
            "type": "object",
            "required": [
                "type",
                "content"
            ],
            "properties": {
                "type": {
                    "const": 10
                },
                "content": {
                    "type": "object",
                    "properties": {
                        "chartId": {
                            "type": "string",
                            "description": "id of the chart"
                        },
                        "version": {
                            "type": "string",
                            "description": "Version of metrics control",
                            "default": "MetricsItem/2.0"
                        },
                        "size": {
                            "type": "integer",
                            "description": "Size of the step"
                        },
                        "chartType": {
                            "type": "integer",
                            "description": "Visualization type"
                        },
                        "resourceType": {
                            "type": "string",
                            "description": "The type of resources applied. Metric step can only support one resource type at one time",
                            "examples": [
                                "microsoft.storage/storageaccounts"
                            ]
                        },
                        "resourceIds": {
                            "type": "array",
                            "description": "The resources or resource parameters applied"
                        },
                        "timeContext": {
                            "type": "object",
                            "description": "The time range applied"
                        },
                        "timeRangeFromParameter": {
                            "type": "string",
                            "description": "If a time range parameter is used, the id of the parameter"
                        },
                        "resourceParameter": {
                            "type": "string",
                            "description": "If a resource parameter is used, the id of the parameter"
                        },
                        "metrics": {
                            "type": "array",
                            "description": "The metrics applied",
                            "items": [
                                {
                                    "$ref": "#/definitions/metricItem"
                                }
                            ]
                        },
                        "filters": {
                            "type": "array",
                            "description": "Global filters applied to all selected metrics",
                            "items": [
                                {
                                    "$ref": "#/definitions/metricFilters"
                                }
                            ]
                        },
                        "gridFormatType": {
                            "type": "integer",
                            "description": "The format in which the metric data should be displayed in the grid"
                        },
                        "resourceLimit": {
                            "type": "integer",
                            "description": "The maximum number of resources that can be queried"
                        },
                        "gridSettings": {
                            "$ref": "#/definitions/gridSettings"
                        },
                        "graphSettings": {
                            "$ref": "#/definitions/graphSettings"
                        },
                        "mapSettings": {
                            "$ref": "#/definitions/mapSettings"
                        },
                        "tileSettings": {
                            "$ref": "#/definitions/tileSettings"
                        },
                        "exportToExcelOptions": {
                            "$ref": "#/definitions/exportToExcelOptions"
                        },
                        "showExportToExcel": {
                            "$ref": "#/definitions/showExportToExcel"
                        },
                        "title": {
                            "$ref": "#/definitions/title",
                            "description": "title displayed above the grid/chart"
                        }
                    }
                },
                "name": {
                    "$ref": "#/definitions/name"
                },
                "customWidth": {
                    "$ref": "#/definitions/customWidth"
                },
                "showPin": {
                    "$ref": "#/definitions/showPin"
                },
                "styleSettings": {
                    "$ref": "#/definitions/styleSettings"
                },
                "conditionalVisibility": {
                    "$ref": "#/definitions/conditionalVisibility"
                }
            }
        },
        "link": {
            "$id": "#/definitions/link",
            "type": "object",
            "required": [
                "type",
                "content"
            ],
            "properties": {
                "type": {
                    "const": 11
                },
                "content": {
                    "type": "object",
                    "properties": {
                        "version": {
                            "type": "string",
                            "description": "Version of link step",
                            "default": "LinkItem/2.0"
                        },
                        "style": {
                            "type": "string",
                            "description": "style of link",
                            "examples": [
                                "bullets",
                                "list",
                                "paragraph",
                                "nav",
                                "tabs"
                            ]
                        },
                        "links": {
                            "type": "array",
                            "items": [
                                {
                                    "$ref": "#/definitions/linkItem"
                                }
                            ]
                        }
                    }
                },
                "name": {
                    "$ref": "#/definitions/name"
                },
                "customWidth": {
                    "$ref": "#/definitions/customWidth"
                },
                "showPin": {
                    "$ref": "#/definitions/showPin"
                },
                "styleSettings": {
                    "$ref": "#/definitions/styleSettings"
                },
                "conditionalVisibility": {
                    "$ref": "#/definitions/conditionalVisibility"
                }
            }
        },
        "parameter": {
            "$id": "#/definitions/parameter",
            "type": "object",
            "required": [
                "type",
                "content"
            ],
            "properties": {
                "type": {
                    "const": 9
                },
                "content": {
                    "type": "object",
                    "properties": {
                        "version": {
                            "type": "string",
                            "description": "Version of parameter step",
                            "default": "KqlParameterItem/2.0"
                        },
                        "style": {
                            "type": "string",
                            "description": "style of parameter",
                            "examples": [
                                "pills",
                                "above",
                                "formHorizontal",
                                "formVertical"
                            ]
                        },
                        "parameters": {
                            "type": "array",
                            "items": [
                                {
                                    "$ref": "#/definitions/parameterItem"
                                }
                            ]
                        },
                        "queryType": {
                            "type": "integer",
                            "description": "What kind of query is this parameter"
                        }
                    }
                },
                "name": {
                    "$ref": "#/definitions/name"
                },
                "customWidth": {
                    "$ref": "#/definitions/customWidth"
                },
                "showPin": {
                    "$ref": "#/definitions/showPin"
                },
                "styleSettings": {
                    "$ref": "#/definitions/styleSettings"
                },
                "conditionalVisibility": {
                    "$ref": "#/definitions/conditionalVisibility"
                }
            }
        },
        "query": {
            "$id": "#/definitions/query",
            "type": "object",
            "required": [
                "type",
                "content"
            ],
            "properties": {
                "type": {
                    "const": 3
                },
                "content": {
                    "type": "object",
                    "properties": {
                        "version": {
                            "type": "string",
                            "description": "Version of query step",
                            "default": "KqlItem/1.0"
                        },
                        "size": {
                            "type": "integer",
                            "description": "Size of the step"
                        },
                        "queryType": {
                            "type": "integer",
                            "description": "The query type enum of the step"
                        },
                        "query": {
                            "type": "string",
                            "description": "The query information of the step"
                        },
                        "visualization": {
                            "type": "string",
                            "description": "The visualization type of the step",
                            "examples": ["table", "tiles"]
                        },
                        "chartSettings": {
                            "$ref": "#/definitions/chartSettings"
                        },
                        "gridSettings": {
                            "$ref": "#/definitions/gridSettings"
                        },
                        "graphSettings": {
                            "$ref": "#/definitions/graphSettings"
                        },
                        "mapSettings": {
                            "$ref": "#/definitions/mapSettings"
                        },
                        "tileSettings": {
                            "$ref": "#/definitions/tileSettings"
                        },
                        "title": {
                            "$ref": "#/definitions/title",
                            "description": "title displayed above the grid/chart"
                        },
                        "noDataMessage": {
                            "type": "string",
                            "description": "message displayed if query succeeded but returned no results"
                        },
                        "noDataMessageStyle": {
                            "type": "integer",
                            "description": "style applied to the message displayed if query succeeded but returned no results"
                        }
                    }
                },
                "name": {
                    "$ref": "#/definitions/name"
                },
                "customWidth": {
                    "$ref": "#/definitions/customWidth"
                },
                "showPin": {
                    "$ref": "#/definitions/showPin"
                },
                "styleSettings": {
                    "$ref": "#/definitions/styleSettings"
                },
                "conditionalVisibility": {
                    "$ref": "#/definitions/conditionalVisibility"
                }
            }
        },
        "group": {
            "$id": "#/definitions/group",
            "type": "object",
            "required": [
                "type",
                "content"
            ],
            "properties": {
                "type": {
                    "const": 12
                },
                "content": {
                    "type": "object",
                    "required": [
                        "version"
                    ],
                    "properties": {
                        "version": {
                            "type": "string",
                            "default": "NotebookGroup/1.0"
                        },
                        "groupType": {
                            "type": "string",
                            "default": "editable",
                            "description": "what type of group, editable or from a template",
                            "examples": [
                                "editable", "template"
                            ]
                        },
                        "loadType": {
                            "type": "string",
                            "default": "lazy",
                            "description": "when the content of the group is loaded: lazily, explicitly, or always",
                            "examples": [
                                "lazy", "explicit", "always"
                            ]
                        },
                        "loadButtonText": {
                            "type": "string",
                            "default": "Show more",
                            "description": "text displayed on the load more button in explicit mode",
                            "examples": [
                                "Show more", "Load more"
                            ],
                            "tags": [
                                "localizable"
                            ]
                        },
                        "loadFromTemplateId": {
                            "type": "string",
                            "description": "the identifier of the template to be loaded, if groupType is template"
                        },
                        "items": {
                            "$ref": "#/definitions/items"
                        },
                        "title": {
                            "$ref": "#/definitions/title",
                            "description": "title displayed above the group"
                        }
                    }
                },
                "name": {
                    "$ref": "#/definitions/name"
                },
                "customWidth": {
                    "$ref": "#/definitions/customWidth"
                },
                "showPin": {
                    "$ref": "#/definitions/showPin"
                },
                "styleSettings": {
                    "$ref": "#/definitions/styleSettings"
                },
                "conditionalVisibility": {
                    "$ref": "#/definitions/conditionalVisibility"
                }
            }
        },
        "name": {
            "$id": "#/definitions/name",
            "type": "string",
            "description": "Name of the workbook step"
        },
        "title": {
            "$id": "#/definitions/title",
            "type": "string",
            "description": "The title shown above the workbook step",
            "tags": [
                "localizable"
            ]
        },
        "items": {
            "$id": "#/definitions/items",
            "type": "array",
            "title": "Items in the template or group",
            "items": {
                "anyOf": [
                    {
                        "$ref": "#/definitions/markdown"
                    },
                    {
                        "$ref": "#/definitions/metric"
                    },
                    {
                        "$ref": "#/definitions/parameter"
                    },
                    {
                        "$ref": "#/definitions/query"
                    },
                    {
                        "$ref": "#/definitions/link"
                    },
                    {
                        "$ref": "#/definitions/group"
                    }
                ]
            }
        }, 
        "customWidth": {
            "$id": "#/definitions/customWidth",
            "type": "string",
            "description": "The width of the markdown item",
            "examples": [
                "50"
            ]
        },
        "showExportToExcel": {
            "$id": "#/definitions/showExportToExcel",
            "type": "boolean",
            "description": "Show download to excel toolbar button"
        },
        "exportToExcelOptions": {
            "$id": "#/definitions/exportToExcelOptions",
            "type": "string",
            "description": "What fields in to be exported",
            "examples": [
                "visible",
                "all"
            ]
        },
        "showPin": {
            "$id": "#/definitions/showPin",
            "type": "boolean",
            "description": "Show pin to dashboard button on this step"
        },
        "chartSettings": {
            "$id": "#/definitions/chartSettings",
            "type": "object",
            "description": "settings for charts",
            "properties": {
                "xAxis": {
                    "type":"string",
                    "description": "field used for the x axis"
                },
                "xSettings": {
                    "$ref":"#/definitions/axisSettings",
                    "description": "settings used for the x axis"
                },
                "yAxis": {
                    "type": "array",
                    "items": [
                        {
                            "type": "string"
                        }
                    ],
                    "description": "fields used for the y axis"
                },
                "ySettings": {
                    "$ref":"#/definitions/axisSettings",
                    "description": "settings used for the y axis"
                },
                "group": {
                    "type":"string",
                    "description": "field used for grouping"
                },
                "createOtherGroup": {
                    "type":"integer",
                    "description": "at how many groups should grouping logic create an 'other' group"
                },
                "sort": {
                    "type":"string",
                    "description": "field used for sorting the x axis"
                },
                "sortDirection": {
                    "type":"boolean"
                },
                "showLegend": {
                    "type":"boolean",
                    "description": "if the legend should be displayed on the side of the chart"
                },
                "showMetrics": {
                    "type":"boolean",
                    "description": "if the metrics should be displayed at the bottom of the chart"
                },
                "seriesLabelSettings": {
                    "type": "array",
                    "items": [
                        {
                            "$ref": "#/definitions/seriesLabelSettings"
                        }
                    ],
                    "description": "Custom labels and colors for charts"
                }
            }
        },
        "axisSettings": {
            "$id": "#/definitions/axisSettings",
            "type": "object",
            "description": "settings for charts axis",
            "properties": {
                "unit": {
                    "type":"integer",
                    "description": "what unit should be displayed"
                },
                "numberFormatSettings": {
                    "type": "object",
                    "description": "The number formatting options."
                },
                "min": {
                    "type":"number",
                    "description": "min value of the axis"
                },
                "max": {
                    "type":"number",
                    "description": "maximum value of the axis"
                }
            }
        },
        "seriesLabelSettings": {
            "$id": "#/definitions/seriesLabelSettings",
            "type": "object",
            "description": "label and color settings for series",
            "properties": {
                "seriesName": {
                    "type":"string",
                    "description": "the name of the series"
                },
                "label": {
                    "type":"string",
                    "description": "the label displayed for the series",
                    "tags": [
                        "localizable"
                    ]
                },
                "color": {
                    "type":"string",
                    "description": "the color name for the series"
                },
                "comment": {
                    "type":"string",
                    "description": "optional comment for translators"
                }
            }
        },
        "gridSettings": {
            "$id": "#/definitions/gridSettings",
            "type": "object",
            "description": "settings for grids",
            "properties": {
                "formatters": {
                    "type": "array",
                    "description": "the formatters applied to the columns",
                    "items": [
                        {
                            "$ref": "#/definitions/formattingRule"
                        }
                    ]
                },
                "labelSettings": {
                    "type": "array",
                    "items": [
                        {
                            "$ref": "#/definitions/gridLabelSettings"
                        }
                    ],
                    "description": "Settings for custom column labels"
                },
                "filter": {
                    "type": "boolean",
                    "description": "Show the filter search box above the grid"
                },
                "rowLimit": {
                    "type": "integer",
                    "description": "The max number of rows to display for this grid"
                },
                "hierarchySettings": {
                    "type": "object",
                    "properties": {
                        "treeType": {
                            "type": "integer",
                            "description": "The hierarchy type"
                        },
                        "groupBy": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "description": "The column ids to group by"
                        },
                        "expandTopLevel": {
                            "type": "boolean",
                            "description": "Expand the top level of the grid by default"
                        },
                        "finalBy": {
                            "type": "string",
                            "description": "The column id to finally group by"
                        }
                    }
                },
                "sortBy": {
                    "type": "array",
                    "items": [
                        {
                            "$ref": "#/definitions/sortBy"
                        }
                    ]
                }
            }
        },
        "gridLabelSettings": {
            "$id": "#/definitions/gridLabelSettings",
            "type": "object",
            "properties": {
                "columnId": {
                    "type": "string",
                    "description": "The id of the column"
                },
                "label": {
                    "type": "string",
                    "description": "The label of the column header",
                    "tags": [
                        "localizable"
                    ]
                },
                "comment": {
                    "type":"string",
                    "description": "comment for translators"
                }
            }
        },
        "sortBy": {
            "$id": "#/definitions/sortBy",
            "type": "object",
            "properties": {
                "itemKey": {
                    "type": "string",
                    "description": "The column id"
                },
                "sortOrder": {
                    "type": "integer",
                    "description": "sort by asc, desc"
                }
            }
        },
        "tileSettings" : {
            "$id": "#/definitions/tileSettings",
            "type": "object",
            "properties": {
                "titleContent": {
                    "$ref": "#/definitions/formattingRule"
                },
                "subtitleContent": {
                    "$ref": "#/definitions/formattingRule"
                },
                "leftContent": {
                    "$ref": "#/definitions/formattingRule"
                },
                "rightContent": {
                    "$ref": "#/definitions/formattingRule"
                },
                "secondaryContent": {
                    "$ref": "#/definitions/formattingRule"
                },
                "showBorder": {
                    "type": "boolean",
                    "description": "indicates if a border should be shown around the tile",
                    "default": false
                },
                "sortCriteriaField": {
                    "type": "string",
                    "description": "optional field used for sorting the tiles"
                },
                "sortOrderField": {
                    "type": "integer",
                    "description": "Sort order for tiles.  0 = unsorted, 1 = ascending, 2 = descending",
                    "default": 0,
                    "examples": [
                        0, 
                        1, 
                        2
                    ]
                },
                "size": {
                    "type": "string",
                    "description": "the size of the tiles",
                    "default": "fixed",
                    "examples": [
                        "fixed",
                        "auto",
                        "full"
                    ]
                }
            }
        },
        "formatter": {
            "$id": "#/definitions/formatter",
            "type": "integer",
            "description": "the id of the formatter being used"
        },
        "formattingRule": {
            "$id": "#/definitions/formattingRule",
            "type": "object",
            "description": "settings for a specific column of a grid, section of a tile or graph",
            "required": [
                "columnMatch",
                "formatter"
            ],
            "properties": {
                "columnMatch": {
                    "type": "string",
                    "description": "the name of the field or regular expression matching a column in the data"
                },
                "formatter": {
                    "$ref": "#/definitions/formatter",
                    "description": "The formatter to use for this grid column"
                },
                "formatOptions": {
                    "$ref": "#/definitions/formatOptions",
                    "description": "Format options for this grid column."
                },
                "numberFormat": {
                    "type": "object",
                    "description": "additional settings for number formatting"
                },
                "dateFormat": {
                    "type": "object",
                    "description": "additional settings for date formatting"
                },
                "tooltipFormat": {
                    "type": "object",
                    "description": "additional settings for tooltip formatting"
                }
            }
        },
        "formatOptions": {
            "$id": "#/definitions/formatOptions",
            "type": "object",
            "description": "settings used to format a field in grids, tiles, graphs, etc",
            "properties": {
                "linkTarget": {
                    "type": "string",
                    "description": "What the link should go to"
                },
                "subTarget": {
                    "type": "string",
                    "description": "if the link was a view, which menu item in that view to select"
                },
                "linkLabel": {
                    "type": "string",
                    "description": "What the link should say",
                    "tags": [
                        "localizable"
                    ]
                },
                "linkIsContextBlade": {
                    "type": "boolean",
                    "description": "if the link opens a view, should the view be displayed as a context pane"
                },
                "linkColumn": {
                    "type": "string",
                    "description": "optional setting  if the link needs to get a value from another column"
                },
                "min": {
                    "type":"number",
                    "description": "optional minimum value"
                },
                "max": {
                    "type":"number",
                    "description": "optional maximum value"
                },
                "palette": {
                    "type":"string",
                    "description": "optional palette to use in formatting a formatter that uses colors"
                },
                "showIcon": {
                    "type":"boolean",
                    "description": "enables some formatters to display an icon, common for resource type icons",
                    "default": "true"
                },
                "aggregation": {
                    "$ref": "#/definitions/mapAggregation",
                    "description": "when used in a place that can merge data, which aggregation to use in this formatter"
                },
                "thresholdsOptions": {
                    "type":"string",
                    "description": "what type of display the thresholds formatter will display",
                    "examples": ["icons", "colors"]
                },
                "thresholdsGrid": {
                    "type":"array",
                    "description": "extra settings for the thresholds formatter"
                },
                "compositeBarSettings": {
                    "$ref": "#/definitions/compositeBarSettings",
                    "description": "used to store settings for composite bar"
                }
            }
        },
        "styleSettings": {
            "$id": "#/definitions/styleSettings",
            "type": "object",
            "properties": {
                "margin": {
                    "type": "string",
                    "description": "margin on the step",
                    "examples": [
                        "2px",
                        "0 20px",
                        "1px 2px 3px 4px"
                    ]
                },
                "padding": {
                    "type": "string",
                    "description": "padding on the step",
                    "examples": [
                        "2px",
                        "0 20px",
                        "1px 2px 3px 4px"
                    ]
                },
                "maxWidth": {
                    "type": "string",
                    "description": "max width of the step",
                    "examples": [
                        "100%",
                        "20px"
                    ]
                },
                "progressStyle": {
                    "type": "string",
                    "description": "The loading icon shown on this step",
                    "examples": [
                        "squares",
                        "loader",
                        "spinner",
                        "none"
                    ]
                },
                "showBorder": {
                    "type": "boolean",
                    "description": "Show a border around the step"
                }
            }
        },
        "conditionalVisibility": {
            "$id": "#/definitions/conditionalVisibility",
            "type": ["object", "null"],
            "properties": {
                "parameterName": {
                    "type": "string",
                    "description": "id of the parameter"
                },
                "comparison": {
                    "type": "string",
                    "examples": [
                        "isEqualTo",
                        "isNotEqualTo"
                    ]
                },
                "value": {
                    "type": "string",
                    "description": "the value of the condition"
                }
            }
        },
        "metricItem": {
            "$id": "#/definitions/metricItem",
            "type": "object",
            "properties": {
                "namespace": {
                    "type": "string",
                    "description": "namespace of the metric"
                },
                "metric": {
                    "type": "string",
                    "description": "id of the metric",
                    "examples": [
                        "microsoft.storage/storageaccounts-Transaction-SuccessE2ELatency"
                    ]
                },
                "aggregation": {
                    "type": "integer",
                    "description": "Aggregation of the metric"
                },
                "splitBy": {
                    "type": ["string", "null"],
                    "description": "On which dimension to segment this metric"
                },
                "filters": {
                    "type": "array",
                    "description": "Single metric filters applied to all this metric",
                    "items": [
                        {
                            "$ref": "#/definitions/metricFilters"
                        }
                    ]
                },
                "splitBySortOrder": {
                    "type": "integer",
                    "description": "how to order the results of the metric segmentations"
                },
                "splitByLimit": {
                    "type": ["integer", "null"],
                    "description": "the number of segments to view"
                },
                "columnName": {
                    "type": "string",
                    "description": "custom name of the column in grid or metric tile"
                }
            },
            "required": [
                "namespace",
                "metric",
                "aggregation"
            ]
        },
        "metricFilters": {
            "$id": "#/definitions/metricFilters",
            "type": "object",
            "properties": {
                "key": {
                    "type": "string",
                    "description": "the dimension to filter on"
                },
                "operator": {
                    "type": "integer",
                    "description": "the equality operation of the filter"
                },
                "values": {
                    "type": "array",
                    "description": "the values that the filters should match, OR'd together",
                    "items": [
                        {
                            "type": "string"
                        }
                    ]
                },
                "valueParam": {
                    "type": ["string", "null"],
                    "description": "if applied, the parameter chosen as the filter value"
                }
            },
            "required": [
                "key",
                "operator",
                "values"
            ]
        },
        "linkItem": {
            "$id": "#/definitions/linkItem",
            "type": "object",
            "properties": {
                "linkTarget": {
                    "type": "string",
                    "description": "What the link should go to"
                },
                "linkLabel": {
                    "type": "string",
                    "description": "What the link should say",
                    "tags": [
                        "localizable"
                    ]
                },
                "preText": {
                    "type": "string",
                    "description": "What text comes before the link",
                    "tags": [
                        "localizable"
                    ]
                },
                "postText": {
                    "type": "string",
                    "description": "What text comes after the link",
                    "tags": [
                        "localizable"
                    ]
                },
                "style": {
                    "type": "string",
                    "examples": [
                        "link",
                        "primary",
                        "secondary"
                    ]
                },
                "linkIsContextBlade": {
                    "type": "boolean",
                    "description": "Open up the link in a context blade"
                }
            }
        },
        "parameterItem": {
            "$id": "#/definitions/parameterItem",
            "type": "object",
            "properties": {
                "description": {
                    "type": "string",
                    "description": "The text shown on the infotext of the parameter",
                    "tags": [
                        "localizable"
                    ]
                },
                "label": {
                    "type": "string",
                    "description": "The label shown for the parameter",
                    "tags": [
                        "localizable"
                    ]
                },
                "typeSettings": {
                    "type": "object",
                    "properties": {
                        "defaultItemsText": {
                            "type": "string",
                            "description": "The label shown for the default option for the parameter",
                            "tags": [
                                "localizable"
                            ]
                        },
                        "multiLineText": {
                            "type": "boolean",
                            "description": "If the text is multi-line or not"
                        },
                        "editorLanguage": {
                            "type": "string",
                            "description": "The multi-line editor language"
                        },
                        "isPassword": {
                            "type": "boolean",
                            "description": "If field is a password or not"
                        }
                    }
                },
                "criteriaData": {
                    "type": "array",
                    "description": "The criteria to determine the parameter's value.",
                    "items": [
                        {
                            "$ref": "#/definitions/criteriaDataItem"
                        }
                    ]
                }
            }
        },
        "criteriaDataItem": {
            "$id": "#/definitions/criteriaDataItem",
            "type": "object",
            "description": "One of the criteria.",
            "properties": {
                "condition": {
                    "type": "string",
                    "description": "The condition as a legible string."
                },
                "criteriaContext": {
                    "type": "object",
                    "description": "The criteria context defined by the properties below.",
                    "required": [
                        "operator",
                        "resultValType",
                        "resultVal"
                    ],
                    "properties": {
                        "leftOperand": {
                            "type": "string",
                            "description": "The left value to compare, this should be a parameter name."
                        },
                        "operator": {
                            "type": "string",
                            "description": "The operator to perform the comparison.",
                            "enum": [
                                ">",
                                "<",
                                "=",
                                "!=",
                                ">=",
                                "<=",
                                "is Empty",
                                "Default",
                                "startsWith",
                                "endsWith", 
                                "contains", 
                                "regex",
                                "isNotNull",
                                "notStartsWith",
                                "notEndsWith",
                                "notContains"
                            ]
                        },
                        "rightValType": {
                            "type": "string",
                            "description": "The type of the right value.",
                            "enum": [
                                "param",
                                "static"
                            ]
                        },
                        "rightVal": {
                            "type": "string",
                            "description": "Based on rightValType, should be the name of the parameter or a static value."
                        },
                        "resultValType": {
                            "type": "string",
                            "description": "The type of the result.",
                            "enum": [
                                "param",
                                "static",
                                "expression"
                            ]
                        },
                        "resultVal": {
                            "type": "string",
                            "description": "Based on resultValType, should be the name of the parameter, a static value, or a mathematical expression."
                        }
                    }
                }
            }
        },
        "graphSettings": {
            "$id": "#/definitions/graphSettings",
            "type": "object",
            "description": "Settings for the graph visualization"
        },
        "mapSettings": {
            "$id": "#/definitions/mapSettings",
            "type": "object",
            "description": "Settings for the map visualization",
            "properties": {
                "locInfo": {
                    "type": "string",
                    "description": "The location info.",
                    "enum": ["LatLong", "AzureLoc", "AzureResource", "CountryRegion"]
                },
                "latitude": {
                    "type": "string",
                    "description": "The latitude is only necessary if locInfo is LatLong."
                },
                "longitude": {
                    "type": "string",
                    "description": "The longitude is only necessary if locInfo is LatLong."
                },
                "sizeSettings": {
                    "type": "string",
                    "description": "The column of name containing number data which is used to generate the region sizes."
                },
                "sizeAggregation": {
                    "$ref": "#/definitions/mapAggregation"
                },
                "minSize": {
                    "type": "number",
                    "description": "The minimum size of the map region."
                },
                "maxSize": {
                    "type": "number",
                    "description": "The maximum size of the map region."
                },
                "minData": {
                    "type": "number",
                    "description": "The minimum number to use to calculate the map size."
                },
                "maxData": {
                    "type": "number",
                    "description": "The maximum number to use to calculate the map size."
                },
                "opacity": {
                    "type": "number",
                    "description": "The number between 0-1 for opacity."
                },
                "labelSettings": {
                    "type": "string",
                    "description": "The label to use to display on the metric. Only necessary if locInfo is LatLong."
                },
                "legendMetric": {
                    "type": "string",
                    "description": "The column of name containing number data which is used to generate the map legend."
                },
                "numberOfMetrics": {
                    "type": "number",
                    "description": "The number of labels to display. If there are more labels than numberOfMetrics, all extra labels will be categorized as 'Other'."
                },
                "legendAggregation": {
                    "$ref": "#/definitions/mapAggregation"
                },
                "numberFormatSettings": {
                    "type": "object",
                    "description": "The number formatting options."
                },
                "itemColorSettings": {
                    "type": "object",
                    "description": "The color settings for the map regions."
                }
            }
        },
        "mapAggregation": {
            "$id": "#/definitions/mapAggregation",
            "type": "string",
            "description": "The aggregation to use for map settings.",
            "enum": ["None", "Min", "Max", "Average", "Sum", "Count"] 
        },
        "compositeBarSettings": {
            "$id": "#/definitions/compositeBarSettings",
            "type": "object",
            "description": "The settings for composite bar renderer",
            "properties": {
                "labelText": {
                    "type": "string",
                    "description": "The label to show at the top of the composite bar"
                },
                "columnSettings": {
                    "type": "array",
                    "description": "used to store column and color mapping",
                    "items": [
                        {
                            "$ref": "#/definitions/compositeBarColumnSettings"
                        }
                    ]
                }
            }
        },
        "compositeBarColumnSettings": {
            "$id": "#/definitions/compositeBarColumnSettings",
            "type": "object",
            "properties": {
                "columnName": {
                    "type": "string",
                    "description": "The name of the column"
                },
                "color": {
                    "type": "string",
                    "description": "The color to render the column as a part of composite bar"
                }
            }
        }
    }
}
