{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "crossComponentResources": [
          "value::all"
        ],
        "parameters": [
          {
            "id": "7ef499bd-fea4-4db0-9924-fe3544b300f3",
            "version": "KqlParameterItem/1.0",
            "name": "Subscriptions",
            "type": 6,
            "isRequired": true,
            "isGlobal": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "isHiddenWhenLocked": true,
            "typeSettings": {
              "additionalResourceOptions": [
                "value::all"
              ],
              "includeAll": true,
              "selectAllValue": "",
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "defaultValue": "value::all"
          },
          {
            "id": "c3c353f3-249e-49cd-87c4-4c10376ba65c",
            "version": "KqlParameterItem/1.0",
            "name": "Help",
            "label": "Show Help",
            "type": 10,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n { \"value\": \"Yes\", \"label\": \"Yes\", \"selected\":true },\r\n { \"value\": \"No\", \"label\": \"No\"}\r\n]",
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "9cb47356-497d-4270-9b92-0369546d4ca4",
            "version": "KqlParameterItem/1.0",
            "name": "current_vis",
            "label": "VIS",
            "type": 5,
            "isRequired": true,
            "isGlobal": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "Resources\r\n| where type =~ 'Microsoft.Workloads/sapvirtualinstances'\r\n| project id",
            "crossComponentResources": [
              "value::all"
            ],
            "typeSettings": {
              "resourceTypeFilter": {
                "microsoft.workloads/sapvirtualinstances": true
              },
              "additionalResourceOptions": [
                "value::all"
              ],
              "selectAllValue": "",
              "showDefault": false
            },
            "defaultValue": "value::all",
            "queryType": 1,
            "resourceType": "microsoft.resourcegraph/resources",
            "value": [
              "value::all"
            ]
          },
          {
            "id": "a0e701f9-fe18-4d0a-bbfc-c75960795243",
            "version": "KqlParameterItem/1.0",
            "name": "Report_check",
            "label": "Report",
            "type": 2,
            "description": "Single page view",
            "isRequired": true,
            "query": "{\"version\":\"1.0.0\",\"content\":\"[\\\"Yes\\\", \\\"No\\\"]\",\"transformers\":null}",
            "value": "No",
            "isHiddenWhenLocked": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 8
          },
          {
            "id": "250c97c2-b81e-480f-8907-6c718e62957f",
            "version": "KqlParameterItem/1.0",
            "name": "vmList",
            "type": 1,
            "isRequired": true,
            "isGlobal": true,
            "query": "resources\r\n| where type =~ 'Microsoft.Workloads/sapVirtualInstances/centralInstances' or type =~ 'Microsoft.Workloads/sapVirtualInstances/databaseInstances'\r\n| extend visId = split(split(id, '/centralInstances')[0], '/databaseInstances')[0] // getting the VIS id out of child resource\r\n| extend visList = split('{current_vis:id}', ', ') // split the selected vis list in array to search\r\n| where set_has_element(visList, tostring(visId)) == 1 //check if the running vis exists in selected vis id.\r\n| mv-expand properties.vmDetails\r\n| extend vmID = tostring(properties_vmDetails.virtualMachineId)\r\n| where strlen(vmID) > 0\r\n| extend vmRole = split(type, \"/\")[2]\r\n//| extend vmRole = \"qwertyuiop\"\r\n| project visVMId = strcat(tolower(vmID), \", \", tostring(visId), \", \", vmRole)\r\n| union(\r\nresources\r\n        | where type =~ 'Microsoft.Workloads/sapVirtualInstances/applicationInstances'\r\n        | extend visId = split(id, '/applicationInstances')[0]\r\n        | extend visList = split('{current_vis:id}', ', ') // split the selected vis list in array to search\r\n        | where set_has_element(visList, tostring(visId)) == 1\r\n        | mv-expand properties.vmDetails\r\n        | extend vmID = iff(apiVersion in (\"2021-12-01-preview\", \"2022-10-15-preview\"), tolower(properties.virtualMachineId), tolower(properties_vmDetails.virtualMachineId))\r\n        | where strlen(vmID) > 0\r\n        | extend vmRole = split(type, \"/\")[2]\r\n        //| extend vmRole = \"qwertyuiop\"\r\n        | project visVMId = strcat(tolower(vmID), \", \", tostring(visId), \", \", vmRole)\r\n        )",
            "crossComponentResources": [
              "value::all"
            ],
            "isHiddenWhenLocked": true,
            "defaultValue": "value::all",
            "queryType": 1,
            "resourceType": "microsoft.resourcegraph/resources"
          },
          {
            "id": "7d53b1a5-671a-4663-a9dc-1dd0358925ce",
            "version": "KqlParameterItem/1.0",
            "name": "vmNICs",
            "type": 5,
            "isRequired": true,
            "isGlobal": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "resources \r\n| where type =~ 'microsoft.network/networkinterfaces'\r\n| extend nicId = id \r\n| join ( \r\n    resources\r\n    | where type =~ \"microsoft.compute/virtualMachines\"\r\n    | where ('{vmList:id}') has id\r\n    | extend vmVISListArray = split(split(split('{vmList:id}', '[')[1], ']')[0], ', ')\r\n    | extend vmIndex = array_index_of(vmVISListArray, tolower(id))\r\n    | extend visId = vmVISListArray[vmIndex + 1]\r\n    | extend vmRoleId = vmVISListArray[vmIndex + 2]\r\n    | extend vmRole = \"Databases\"\r\n    | extend vmRole = iff(vmRoleId has \"applicationInstances\", \"App server instances\", vmRole)\r\n    | extend vmRole = iff(vmRoleId has \"centralInstances\", \"Central service instances\", vmRole)\r\n    | extend nics=array_length(properties.networkProfile.networkInterfaces) \r\n    | mv-expand nic=properties.networkProfile.networkInterfaces \r\n    | project nicId = tostring(nic.id), visId, vmRole\r\n) on nicId\r\n| project strcat(tolower(nicId), \", \", tolower(visId), \", \", vmRole)",
            "crossComponentResources": [
              "value::all"
            ],
            "isHiddenWhenLocked": true,
            "typeSettings": {
              "additionalResourceOptions": [
                "value::all"
              ],
              "showDefault": false
            },
            "defaultValue": "value::all",
            "queryType": 1,
            "resourceType": "microsoft.resourcegraph/resources"
          }
        ],
        "style": "pills",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources"
      },
      "customWidth": "65",
      "name": "Overview of Inventory checks"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "dc78511e-5770-460c-891c-4bfcc6ee3457",
                  "cellValue": "SelectedTab",
                  "linkTarget": "parameter",
                  "linkLabel": "Advisor Recommendation",
                  "subTarget": "AdvisorRecommendation",
                  "style": "link"
                },
                {
                  "id": "1761e5b7-35da-4bb7-83ea-691c30916c4f",
                  "cellValue": "SelectedTab",
                  "linkTarget": "parameter",
                  "linkLabel": "Virtual Machine",
                  "subTarget": "compute",
                  "style": "link"
                },
                {
                  "id": "ff290cf1-862a-438c-8860-146abc24a1d7",
                  "cellValue": "SelectedTab",
                  "linkTarget": "parameter",
                  "linkLabel": "Configuration Checks",
                  "subTarget": "configchecks",
                  "style": "link"
                }
              ]
            },
            "customWidth": "60",
            "name": "Overview"
          },
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "36dd8f3b-5b03-40a9-8f80-134994908884",
                  "cellValue": "SelectedAdvisorTab",
                  "linkTarget": "parameter",
                  "linkLabel": "Virtual Instance for SAP solutions (VIS)",
                  "subTarget": "VIS",
                  "style": "link"
                },
                {
                  "id": "53e50da9-54ed-4089-ad1f-364957eb101a",
                  "cellValue": "SelectedAdvisorTab",
                  "linkTarget": "parameter",
                  "linkLabel": "Central service instance",
                  "subTarget": "central",
                  "style": "link"
                },
                {
                  "id": "b10dc6b1-c59e-4ced-a3c0-6c3b49be9344",
                  "cellValue": "SelectedAdvisorTab",
                  "linkTarget": "parameter",
                  "linkLabel": "App server instance",
                  "subTarget": "app",
                  "style": "link"
                },
                {
                  "id": "211b151b-8062-432f-8d6a-8262a883426b",
                  "cellValue": "SelectedAdvisorTab",
                  "linkTarget": "parameter",
                  "linkLabel": "Databases",
                  "subTarget": "database",
                  "style": "link"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "SelectedTab",
              "comparison": "isEqualTo",
              "value": "AdvisorRecommendation"
            },
            "name": "Advisor Tab"
          },
          {
            "type": 1,
            "content": {
              "json": "Azure Center for SAP solutions (ACSS) runs **quality checks** for all Virtual Instances for SAP solutions (VIS). These Quality checks validate if the SAP systems in ACSS are configured as per **best practices** recommended by **SAP and Azure**. If a VIS  is not configured as per the different best practices, you will see a corresponding **recommendation in Azure Advisor**.\r\n\r\nThe below table shows all the recommendations for Databases in the VIS. \r\n\r\nYou can click on the instance name in the table below to see all recommendations for the respective instance. ",
              "style": "info"
            },
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedAdvisorTab",
                "comparison": "isEqualTo",
                "value": "database"
              },
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "AdvisorRecommendation"
              },
              {
                "parameterName": "Help",
                "comparison": "isEqualTo",
                "value": "Yes"
              }
            ],
            "name": "text - database"
          },
          {
            "type": 1,
            "content": {
              "json": "Azure Center for SAP solutions (ACSS) runs **quality checks** for all Virtual Instances for SAP solutions (VIS). These Quality checks validate if the SAP systems in ACSS are configured as per **best practices** recommended by **SAP and Azure**. If a VIS  is not configured as per the different best practices, you will see a corresponding **recommendation in Azure Advisor**.\r\n\r\nThe below table shows all the recommendations for App instances in the VIS. \r\n\r\nYou can click on the instance name in the table below to see all recommendations for the respective instance. ",
              "style": "info"
            },
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedAdvisorTab",
                "comparison": "isEqualTo",
                "value": "app"
              },
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "AdvisorRecommendation"
              },
              {
                "parameterName": "Help",
                "comparison": "isEqualTo",
                "value": "Yes"
              }
            ],
            "name": "text - application"
          },
          {
            "type": 1,
            "content": {
              "json": "Azure Center for SAP solutions (ACSS) runs **quality checks** for all Virtual Instances for SAP solutions (VIS). These Quality checks validate if the SAP systems in ACSS are configured as per **best practices** recommended by **SAP and Azure**. If a VIS  is not configured as per the different best practices, you will see a corresponding **recommendation in Azure Advisor**.\r\n\r\nThe below table shows all the recommendations for Central Service Instance in the VIS. \r\n\r\nYou can click on the instance name in the table below to see all recommendations for the respective instance. ",
              "style": "info"
            },
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedAdvisorTab",
                "comparison": "isEqualTo",
                "value": "central"
              },
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "AdvisorRecommendation"
              },
              {
                "parameterName": "Help",
                "comparison": "isEqualTo",
                "value": "Yes"
              }
            ],
            "name": "Text - central sevice"
          },
          {
            "type": 1,
            "content": {
              "json": "Azure Center for SAP solutions (ACSS) runs **quality checks** for all Virtual Instances for SAP solutions (VIS). These Quality checks validate if the SAP systems in ACSS are configured as per **best practices** recommended by **SAP and Azure**. If a VIS  is not configured as per the different best practices, you will see a corresponding **recommendation in Azure Advisor**.\r\n\r\nThe below table shows all the recommendations for Central Service Instance, App instances and Databases in the VIS. \r\n\r\nYou can click on the instance name in the table below to see all recommendations for the respective instance. ",
              "style": "info"
            },
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedAdvisorTab",
                "comparison": "isEqualTo",
                "value": "VIS"
              },
              {
                "parameterName": "Help",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "AdvisorRecommendation"
              }
            ],
            "name": "text - advisor recommendation help text"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "advisorresources\r\n| where type =~ 'microsoft.advisor/recommendations'\r\n| where properties.impactedField has \"databaseInstances\"\r\n| where properties.lastUpdated >=ago(1d)\r\n| extend visList = split('{current_vis:id}', \", \")\r\n| extend visId = split(id, '/databaseInstances')[0]\r\n| where set_has_element(visList,tostring(visId)) == 1\r\n| extend resourceId = tostring(properties.resourceMetadata.resourceId)\r\n| extend impactedField = properties.impactedField\r\n| extend impact = properties.impact\r\n| project resourceId, impact, visId, properties.shortDescription.solution, properties.category, properties.lastUpdated",
              "size": 3,
              "noDataMessage": "There are no recommendations to show for now. If this is a newly created Virtual Instance for SAP solutions (VIS), please check back here in 60 minutes to see if there are any quality-check recommendations for your SAP system.   Quality checks will continue to run on a 12 hour interval for all Virtual Instances. Please check here to see all the recommendations from the quality checks for your VIS",
              "showRefreshButton": true,
              "showExportToExcel": true,
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "value::all"
              ],
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "resourceId",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "subTarget": "resourceadvisor",
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "impact",
                    "formatter": 18,
                    "formatOptions": {
                      "thresholdsOptions": "icons",
                      "thresholdsGrid": [
                        {
                          "operator": "==",
                          "thresholdValue": "High",
                          "representation": "Sev1",
                          "text": "High"
                        },
                        {
                          "operator": "==",
                          "thresholdValue": "Medium",
                          "representation": "Sev2",
                          "text": "Medium"
                        },
                        {
                          "operator": "==",
                          "thresholdValue": "Low",
                          "representation": "Sev3",
                          "text": "Low"
                        },
                        {
                          "operator": "Default",
                          "thresholdValue": null,
                          "representation": "success",
                          "text": "{0}{1}"
                        }
                      ]
                    }
                  },
                  {
                    "columnMatch": "visId",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "properties_shortDescription_solution",
                    "formatter": 1,
                    "formatOptions": {
                      "customColumnWidthSetting": "100%"
                    }
                  },
                  {
                    "columnMatch": "properties_category",
                    "formatter": 1
                  },
                  {
                    "columnMatch": "properties_lastUpdated",
                    "formatter": 6
                  }
                ],
                "sortBy": [
                  {
                    "itemKey": "$gen_link_visId_2",
                    "sortOrder": 1
                  }
                ],
                "labelSettings": [
                  {
                    "columnId": "resourceId",
                    "label": "Resource"
                  },
                  {
                    "columnId": "impact",
                    "label": "Impact"
                  },
                  {
                    "columnId": "visId",
                    "label": "SID"
                  },
                  {
                    "columnId": "properties_shortDescription_solution",
                    "label": "Description"
                  },
                  {
                    "columnId": "properties_category",
                    "label": "Category"
                  },
                  {
                    "columnId": "properties_lastUpdated",
                    "label": "Last updated"
                  }
                ]
              },
              "sortBy": [
                {
                  "itemKey": "$gen_link_visId_2",
                  "sortOrder": 1
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedAdvisorTab",
                "comparison": "isEqualTo",
                "value": "database"
              },
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "AdvisorRecommendation"
              }
            ],
            "showPin": true,
            "name": "Databases"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "advisorresources\r\n| where type =~ 'microsoft.advisor/recommendations'\r\n| where properties.lastUpdated >=ago(1d)\r\n| where properties.impactedField has \"applicationInstances\"\r\n| extend visList = split('{current_vis:id}', \", \")\r\n| extend visId = split(id, '/applicationInstances')[0]\r\n| where set_has_element(visList,tostring(visId)) == 1\r\n| extend resourceId = tostring(properties.resourceMetadata.resourceId)\r\n| extend impactedField = properties.impactedField\r\n| extend impact = properties.impact\r\n| project resourceId, impact, visId, properties.shortDescription.solution, properties.category, properties.lastUpdated",
              "size": 3,
              "noDataMessage": "There are no recommendations to show for now. If this is a newly created Virtual Instance for SAP solutions (VIS), please check back here in 60 minutes to see if there are any quality-check recommendations for your SAP system.   Quality checks will continue to run on a 12 hour interval for all Virtual Instances. Please check here to see all the recommendations from the quality checks for your VIS",
              "showRefreshButton": true,
              "showExportToExcel": true,
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "value::all"
              ],
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "resourceId",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "subTarget": "resourceadvisor",
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "impact",
                    "formatter": 18,
                    "formatOptions": {
                      "thresholdsOptions": "icons",
                      "thresholdsGrid": [
                        {
                          "operator": "==",
                          "thresholdValue": "High",
                          "representation": "Sev1",
                          "text": "High"
                        },
                        {
                          "operator": "==",
                          "thresholdValue": "Medium",
                          "representation": "Sev2",
                          "text": "Medium"
                        },
                        {
                          "operator": "==",
                          "thresholdValue": "Low",
                          "representation": "Sev3",
                          "text": "Low"
                        },
                        {
                          "operator": "Default",
                          "thresholdValue": null,
                          "representation": "success",
                          "text": "{0}{1}"
                        }
                      ]
                    }
                  },
                  {
                    "columnMatch": "visId",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "properties_shortDescription_solution",
                    "formatter": 1,
                    "formatOptions": {
                      "customColumnWidthSetting": "100%"
                    }
                  },
                  {
                    "columnMatch": "properties_category",
                    "formatter": 1
                  },
                  {
                    "columnMatch": "properties_lastUpdated",
                    "formatter": 6
                  }
                ],
                "labelSettings": [
                  {
                    "columnId": "resourceId",
                    "label": "Resource"
                  },
                  {
                    "columnId": "impact",
                    "label": "Impact"
                  },
                  {
                    "columnId": "visId",
                    "label": "SID"
                  },
                  {
                    "columnId": "properties_shortDescription_solution",
                    "label": "Description"
                  },
                  {
                    "columnId": "properties_category",
                    "label": "Category"
                  },
                  {
                    "columnId": "properties_lastUpdated",
                    "label": "Last updated"
                  }
                ]
              }
            },
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedAdvisorTab",
                "comparison": "isEqualTo",
                "value": "app"
              },
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "AdvisorRecommendation"
              }
            ],
            "showPin": true,
            "name": "App server instance"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "advisorresources\r\n| where type =~ 'microsoft.advisor/recommendations'\r\n| where properties.lastUpdated >=ago(1d)\r\n| where properties.impactedField has \"centralInstances\"\r\n| extend visList = split('{current_vis:id}', \", \")\r\n| extend visId = split(id, '/centralInstances')[0]\r\n| where set_has_element(visList,tostring(visId)) == 1\r\n| extend resourceId = tostring(properties.resourceMetadata.resourceId)\r\n| extend impactedField = properties.impactedField\r\n| extend impact = properties.impact\r\n| project resourceId, impact, visId, properties.shortDescription.solution, properties.category, properties.lastUpdated",
              "size": 3,
              "noDataMessage": "There are no recommendations to show for now. If this is a newly created Virtual Instance for SAP solutions (VIS), please check back here in 60 minutes to see if there are any quality-check recommendations for your SAP system.   Quality checks will continue to run on a 12 hour interval for all Virtual Instances. Please check here to see all the recommendations from the quality checks for your VIS",
              "showRefreshButton": true,
              "showExportToExcel": true,
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "value::all"
              ],
              "visualization": "table",
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "resourceId",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "subTarget": "resourceadvisor",
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "impact",
                    "formatter": 18,
                    "formatOptions": {
                      "thresholdsOptions": "icons",
                      "thresholdsGrid": [
                        {
                          "operator": "==",
                          "thresholdValue": "High",
                          "representation": "Sev1",
                          "text": "High"
                        },
                        {
                          "operator": "==",
                          "thresholdValue": "Medium",
                          "representation": "Sev2",
                          "text": "Medium"
                        },
                        {
                          "operator": "==",
                          "thresholdValue": "Low",
                          "representation": "Sev3",
                          "text": "Low"
                        },
                        {
                          "operator": "Default",
                          "thresholdValue": null,
                          "representation": "success",
                          "text": "{0}{1}"
                        }
                      ]
                    }
                  },
                  {
                    "columnMatch": "visId",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "properties_shortDescription_solution",
                    "formatter": 1,
                    "formatOptions": {
                      "customColumnWidthSetting": "100%"
                    }
                  },
                  {
                    "columnMatch": "properties_category",
                    "formatter": 1
                  },
                  {
                    "columnMatch": "properties_lastUpdated",
                    "formatter": 6
                  }
                ],
                "labelSettings": [
                  {
                    "columnId": "resourceId",
                    "label": "Resource"
                  },
                  {
                    "columnId": "impact",
                    "label": "Impact"
                  },
                  {
                    "columnId": "visId",
                    "label": "SID"
                  },
                  {
                    "columnId": "properties_shortDescription_solution",
                    "label": "Description"
                  },
                  {
                    "columnId": "properties_category",
                    "label": "Category"
                  },
                  {
                    "columnId": "properties_lastUpdated",
                    "label": "Last updated"
                  }
                ]
              }
            },
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedAdvisorTab",
                "comparison": "isEqualTo",
                "value": "central"
              },
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "AdvisorRecommendation"
              }
            ],
            "showPin": true,
            "name": "query - 16"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "advisorresources\r\n| where type =~ 'microsoft.advisor/recommendations' \r\n| extend visList = split(\"{current_vis:id}\", ', ')\r\n| where properties.lastUpdated >=ago(1d)\r\n| extend visId = split(split(split(id, '/centralInstances')[0], '/applicationInstances')[0], '/databaseInstances')[0]\r\n| where set_has_element(visList, tostring(visId)) == 1\r\n| extend resourceId = tostring(properties.resourceMetadata.resourceId)\r\n| extend impactedField = properties.impactedField\r\n| extend resourceTypeName = \"Database\"\r\n| extend impact = properties.impact\r\n| extend resourceTypeName = iff(impactedField has \"centralInstances\", \"Central service instance\", resourceTypeName)\r\n| extend resourceTypeName = iff(impactedField has \"applicationInstances\", \"App server instance\", resourceTypeName)\r\n| project resourceId, resourceTypeName, visId, impact, properties.shortDescription.solution, properties.category, properties.lastUpdated\r\n\r\n",
              "size": 3,
              "noDataMessage": "There are no recommendations to show for now. If this is a newly created Virtual Instance for SAP solutions (VIS), please check back here in 60 minutes to see if there are any quality-check recommendations for your SAP system.   Quality checks will continue to run on a 12 hour interval for all Virtual Instances. Please check here to see all the recommendations from the quality checks for your VIS",
              "showRefreshButton": true,
              "showExportToExcel": true,
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "value::all"
              ],
              "visualization": "table",
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "resourceId",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "subTarget": "resourceadvisor",
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "visId",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "impact",
                    "formatter": 18,
                    "formatOptions": {
                      "thresholdsOptions": "icons",
                      "thresholdsGrid": [
                        {
                          "operator": "==",
                          "thresholdValue": "High",
                          "representation": "Sev1",
                          "text": "High"
                        },
                        {
                          "operator": "==",
                          "thresholdValue": "Medium",
                          "representation": "Sev2",
                          "text": "Medium"
                        },
                        {
                          "operator": "==",
                          "thresholdValue": "Low",
                          "representation": "Sev3",
                          "text": "Low"
                        },
                        {
                          "operator": "Default",
                          "thresholdValue": null,
                          "representation": "success",
                          "text": "{0}{1}"
                        }
                      ]
                    }
                  },
                  {
                    "columnMatch": "properties_shortDescription_solution",
                    "formatter": 1
                  },
                  {
                    "columnMatch": "properties_category",
                    "formatter": 1
                  },
                  {
                    "columnMatch": "properties_lastUpdated",
                    "formatter": 6
                  },
                  {
                    "columnMatch": "properties_impact",
                    "formatter": 1
                  }
                ],
                "filter": true,
                "sortBy": [
                  {
                    "itemKey": "resourceTypeName",
                    "sortOrder": 1
                  }
                ],
                "labelSettings": [
                  {
                    "columnId": "resourceId",
                    "label": "Resource"
                  },
                  {
                    "columnId": "resourceTypeName",
                    "label": "SAP resource type"
                  },
                  {
                    "columnId": "visId",
                    "label": "SID"
                  },
                  {
                    "columnId": "impact",
                    "label": "Impact"
                  },
                  {
                    "columnId": "properties_shortDescription_solution",
                    "label": "Description"
                  },
                  {
                    "columnId": "properties_category",
                    "label": "Category"
                  },
                  {
                    "columnId": "properties_lastUpdated",
                    "label": "Last Updated"
                  }
                ]
              },
              "sortBy": [
                {
                  "itemKey": "resourceTypeName",
                  "sortOrder": 1
                }
              ],
              "tileSettings": {
                "showBorder": false
              },
              "graphSettings": {
                "type": 0
              },
              "mapSettings": {
                "locInfo": "AzureResource",
                "locInfoColumn": "resourceId"
              }
            },
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedAdvisorTab",
                "comparison": "isEqualTo",
                "value": "VIS"
              },
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "AdvisorRecommendation"
              }
            ],
            "showPin": true,
            "name": "Advisor Recommendation",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "bfbbba3d-8abb-4f3d-9f7c-2f45a9cb78dc",
                  "cellValue": "sapoverview",
                  "linkTarget": "parameter",
                  "linkLabel": "Azure Resources Overview ",
                  "subTarget": "bycount",
                  "style": "link"
                },
                {
                  "id": "dc79bbf4-87bb-470b-bfb0-704d22ee847a",
                  "cellValue": "sapoverview",
                  "linkTarget": "parameter",
                  "linkLabel": "Azure Resources By List",
                  "subTarget": "bylist",
                  "style": "link"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "Report_check",
                "comparison": "isEqualTo",
                "value": "No"
              },
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "SAPOverview"
              }
            ],
            "name": "links - SAP Resource Overview"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resources\r\n| where type =~ 'Microsoft.Workloads/sapVirtualInstances'\r\n| project id, Landscape= tostring(properties.environment)\r\n| summarize count() by Landscape",
              "size": 2,
              "title": "SAP Landscape Overview",
              "noDataMessage": "No SAP Landscape Overview",
              "exportToExcelOptions": "all",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "visualization": "piechart",
              "tileSettings": {
                "showBorder": false,
                "titleContent": {
                  "columnMatch": "vmsize",
                  "formatter": 1
                },
                "leftContent": {
                  "columnMatch": "count_",
                  "formatter": 12,
                  "formatOptions": {
                    "palette": "auto"
                  },
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "maximumSignificantDigits": 3,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              },
              "graphSettings": {
                "type": 0,
                "topContent": {
                  "columnMatch": "vmsize",
                  "formatter": 1
                },
                "centerContent": {
                  "columnMatch": "count_",
                  "formatter": 1,
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "maximumSignificantDigits": 3,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              },
              "chartSettings": {
                "yAxis": [
                  "count_"
                ]
              }
            },
            "customWidth": "33",
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "SAPOverview"
              },
              {
                "parameterName": "sapoverview",
                "comparison": "isEqualTo",
                "value": "bycount"
              },
              {
                "parameterName": "Report_check",
                "comparison": "isEqualTo",
                "value": "No"
              }
            ],
            "name": "query - SAP Landscape Overview",
            "styleSettings": {
              "margin": "0",
              "padding": "0"
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resources\r\n| where type =~ 'Microsoft.Workloads/sapVirtualInstances'\r\n| project id, Landscape= tostring(properties.environment), type = tostring(split(type,\"/\",1)[0])\r\n| summarize count() by type",
              "size": 2,
              "title": "SAP Instance Type overview",
              "noDataMessage": "No  SAP Instance found",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "visualization": "piechart"
            },
            "customWidth": "33",
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "SAPOverview"
              },
              {
                "parameterName": "sapoverview",
                "comparison": "isEqualTo",
                "value": "bycount"
              },
              {
                "parameterName": "Report_check",
                "comparison": "isEqualTo",
                "value": "No"
              }
            ],
            "name": "query - SAP Instance Type overview",
            "styleSettings": {
              "margin": "0",
              "padding": "0",
              "maxWidth": "33%"
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resources\r\n| where type =~ 'Microsoft.Workloads/sapVirtualInstances'\r\n| project id, configtype= tostring(properties.configuration.configurationType)\r\n| summarize count() by configtype\r\n",
              "size": 2,
              "title": "SAP Overview by configuration",
              "noDataMessage": "No configuration found.",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "value::all"
              ],
              "visualization": "piechart"
            },
            "customWidth": "34",
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "SAPOverview"
              },
              {
                "parameterName": "sapoverview",
                "comparison": "isEqualTo",
                "value": "bycount"
              },
              {
                "parameterName": "Report_check",
                "comparison": "isEqualTo",
                "value": "No"
              }
            ],
            "name": "query - SAP Overview by configuration"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resources\r\n| where type =~ 'Microsoft.Workloads/sapVirtualInstances'\r\n| project id, Landscape= tostring(properties.environment), type = tostring(split(type,\"/\",1)[0]) , configtype= tostring(properties.configuration.configurationType), sapProduct = properties.sapProduct\r\n| summarize count() by id\r\n| order by tolower(id) asc",
              "size": 0,
              "title": "VM SKU's",
              "showExportToExcel": true,
              "exportToExcelOptions": "all",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "gridSettings": {
                "rowLimit": 10000,
                "filter": true
              }
            },
            "customWidth": "25",
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "SAPOverview"
              },
              {
                "parameterName": "sapoverview",
                "comparison": "isEqualTo",
                "value": "bylist"
              }
            ],
            "name": "query - VM SKU's",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resources\r\n| where type == \"microsoft.compute/disks\"\r\n| project id, name = tostring(sku.name), tier = tostring(sku.tier)\r\n| summarize count() by name\r\n| order by tolower(name) asc",
              "size": 0,
              "title": "Azure Managed Disks",
              "showExportToExcel": true,
              "exportToExcelOptions": "all",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "visualization": "table",
              "gridSettings": {
                "rowLimit": 10000,
                "filter": true,
                "labelSettings": [
                  {
                    "columnId": "name",
                    "label": "Disk SKU"
                  }
                ]
              }
            },
            "customWidth": "25",
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "SAPOverview"
              },
              {
                "parameterName": "sapoverview",
                "comparison": "isEqualTo",
                "value": "bylist"
              }
            ],
            "name": "query - Azure Managed Disks",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resources\r\n| where type == \"microsoft.storage/storageaccounts\"\r\n| project id, name = tostring(sku.name), tier = tostring(sku.tier)\r\n| summarize count() by name\r\n| order by tolower(name) asc",
              "size": 0,
              "title": "Azure Storage Resources",
              "showExportToExcel": true,
              "exportToExcelOptions": "all",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "visualization": "table",
              "gridSettings": {
                "filter": true,
                "labelSettings": [
                  {
                    "columnId": "name",
                    "label": "Storage Type"
                  },
                  {
                    "columnId": "count_",
                    "label": "Count"
                  }
                ]
              }
            },
            "customWidth": "25",
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "SAPOverview"
              },
              {
                "parameterName": "sapoverview",
                "comparison": "isEqualTo",
                "value": "bylist"
              }
            ],
            "name": "Query - Storage Accounts Overview",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "where type has \"microsoft.netapp\"\r\n| extend type = case(\r\n\ttype == 'microsoft.netapp/netappaccounts', \"ANF Accounts\",\r\n\ttype == 'microsoft.netapp/netappaccounts/capacitypools', \"ANF Capacity Pools\", \r\n\ttype == 'microsoft.netapp/netappaccounts/capacitypools/volumes', \"ANF Volumes\",\r\n    type == 'microsoft.netapp/netappaccounts/snapshotpolicies', \"Snapshot Policies\",\r\n    type == 'microsoft.netapp/netappaccounts/backuppolicies', \"Backup Policies\",\r\n    type == 'microsoft.netapp/netappaccounts/capacitypools/volumes/mounttargets',\"Mount Targets\",\r\n\tstrcat(\"Not Translated: \", type))\r\n| summarize count() by type\r\n| order by tolower(type) asc",
              "size": 0,
              "title": "ANF Resources",
              "showExportToExcel": true,
              "exportToExcelOptions": "all",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "visualization": "table",
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "count_",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "15ch"
                    }
                  }
                ],
                "rowLimit": 10000,
                "filter": true,
                "labelSettings": [
                  {
                    "columnId": "type",
                    "label": "ANF Type"
                  }
                ]
              }
            },
            "customWidth": "25",
            "conditionalVisibilities": [
              {
                "parameterName": "SelectedTab",
                "comparison": "isEqualTo",
                "value": "SAPOverview"
              },
              {
                "parameterName": "sapoverview",
                "comparison": "isEqualTo",
                "value": "bylist"
              }
            ],
            "name": "query - ANF Resources",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 1,
            "content": {
              "json": "### Compute Group"
            },
            "conditionalVisibility": {
              "parameterName": "SelectedTab",
              "comparison": "isEqualTo",
              "value": "NoShow"
            },
            "name": "text - Compute Overview"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "b36f7dc7-5b49-4071-83fa-76a7c50df2e6",
                        "cellValue": "compute",
                        "linkTarget": "parameter",
                        "linkLabel": "Azure Compute",
                        "subTarget": "azure",
                        "preText": "Azure Compute",
                        "style": "link"
                      },
                      {
                        "id": "c7b4b533-ce14-4bc0-acc0-f45104d66fb9",
                        "cellValue": "compute",
                        "linkTarget": "parameter",
                        "linkLabel": "Compute List",
                        "subTarget": "computelist",
                        "style": "link"
                      },
                      {
                        "id": "2c5e0c92-05b0-456f-a132-331f2c7dac03",
                        "cellValue": "compute",
                        "linkTarget": "parameter",
                        "linkLabel": "Compute Extensions",
                        "subTarget": "computeextension",
                        "style": "link"
                      },
                      {
                        "id": "2962cfcd-40da-4be1-a202-1da16761394c",
                        "cellValue": "compute",
                        "linkTarget": "parameter",
                        "linkLabel": "Compute+OS Disk",
                        "subTarget": "computeos",
                        "style": "link"
                      },
                      {
                        "id": "b82c5dbb-f6ac-4964-89c8-6809ef4e65e0",
                        "cellValue": "compute",
                        "linkTarget": "parameter",
                        "linkLabel": "Compute+Data Disks",
                        "subTarget": "computedata",
                        "style": "link"
                      }
                    ]
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "Report_check",
                      "comparison": "isEqualTo",
                      "value": "No"
                    }
                  ],
                  "name": "links - compute"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "Microsoft is constantly updating its platform and submitting new certification details to SAP in order to ensure Microsoft Azure is the best platform on which to run your SAP workloads.\r\n\r\n Learn more about [SAP certifications and configurations running on Microsoft Azure](https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/sap-certifications)",
                    "style": "info"
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "Report_check",
                      "comparison": "isEqualTo",
                      "value": "No"
                    }
                  ],
                  "name": "text - Compute Info"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type =~ \"microsoft.compute/virtualMachines\"\r\n| where ('{vmList}') has id\r\n| extend vmState = tostring(properties.extended.instanceView.powerState.displayStatus)\r\n| extend vmState = iif(isempty(vmState), \"VM State Unknown\", (vmState))\r\n| summarize count() by vmState",
                    "size": 3,
                    "title": "Azure Compute Summary ",
                    "exportMultipleValues": true,
                    "exportedParameters": [
                      {
                        "fieldName": "Resource",
                        "parameterName": "storage",
                        "parameterType": 7
                      }
                    ],
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "visualization": "piechart",
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "vmState",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "count_",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "chartSettings": {
                      "group": "vmState",
                      "createOtherGroup": null,
                      "seriesLabelSettings": [
                        {
                          "seriesName": "VM deallocated",
                          "color": "brown"
                        },
                        {
                          "seriesName": "VM running",
                          "color": "blue"
                        }
                      ]
                    }
                  },
                  "customWidth": "65",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "azure"
                    },
                    {
                      "parameterName": "Report_check",
                      "comparison": "isEqualTo",
                      "value": "No"
                    }
                  ],
                  "showPin": true,
                  "name": "query - Azure Compute Summary "
                },
                {
                  "type": 1,
                  "content": {
                    "json": "1. Generation 2 VMs support key features that aren't supported in generation 1 VMs. These features include increased memory, Intel Software Guard Extensions (Intel SGX), and virtualized persistent memory (vPMEM). Generation 2 VMs running on-premises, have some features that aren't supported in Azure yet. For more information, see the Features and capabilities section.\r\n\r\n2. This table shows an overview the configuration of the VMs in the current VIS\r\n\r\n3. This table will also help you validate the following three configurations:\r\n\r\n\t* Is the OS image used in the VM published by Azure or not. See column: **OS Image publisher**\r\n\t* Is the VM a **second generation VM** or not. SAP recommends using second generation Azure VMS. See column: **OS Image SKU**\r\n\t* Is the Boot diagnostics setting on for the VM or not. See column: **Boot Diagnostics**\r\n\r\n Learn more about [Support for generation 2 VMs on Azure](https://docs.microsoft.com/en-us/azure/virtual-machines/generation-2)\r\n\r\nNote: For a Single-server type SID, the VM role column will show the role as App instance. The same VM serves the role of Database and Central service instance.",
                    "style": "info"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "computelist"
                    },
                    {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    }
                  ],
                  "name": "text - Compute Image tip - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type =~ \"microsoft.compute/virtualMachines\"\r\n| where ('{vmList:id}') has id\r\n| extend vmVISListArray = split(split(split('{vmList:id}', '[')[1], ']')[0], ', ')\r\n| extend vmIndex = array_index_of(vmVISListArray, tolower(id))\r\n| extend visId = vmVISListArray[vmIndex + 1]\r\n| extend vmRoleId = vmVISListArray[vmIndex + 2]\r\n| extend vmRole = \"Databases\"\r\n| extend vmRole = iff(vmRoleId has \"applicationInstances\", \"App server instances\", vmRole)\r\n| extend vmRole = iff(vmRoleId has \"centralInstances\", \"Central service instances\", vmRole)\r\n| project id, vmName = name, visId, vmRole, powerstate = tostring(properties.extended.instanceView.powerState.displayStatus), vmsize = tostring(properties.hardwareProfile.vmSize), \r\n os_type = tostring(properties.storageProfile.osDisk.osType),publisher= tostring(properties.storageProfile.imageReference.publisher), version= tostring(properties.storageProfile.imageReference.version), imagesku= tostring(properties.storageProfile.imageReference.sku) ,offer= tostring(properties.storageProfile.imageReference.offer),\r\n  location, bootDiagnostics =tostring(properties.diagnosticsProfile.bootDiagnostics.enabled) ,avSet= tostring(split(properties.availabilitySet.id,\"/\",8)[0])\r\n, ppg = tostring(split(properties.proximityPlacementGroup.id,\"/\",8)[0]), avZone = tostring(zones), resourceGroup, tags=tostring(tags)\r\n",
                    "size": 2,
                    "title": "Compute List",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "id",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true,
                            "aggregation": "Count",
                            "customColumnWidthSetting": "18ch"
                          },
                          "tooltipFormat": {
                            "tooltip": "Virtual Machine Name"
                          }
                        },
                        {
                          "columnMatch": "vmName",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "visId",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "powerstate",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "16ch"
                          }
                        },
                        {
                          "columnMatch": "vmsize",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "18ch"
                          }
                        },
                        {
                          "columnMatch": "os_type",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "publisher",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "is Empty",
                                "representation": "1",
                                "text": "{0}BYOL"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "success",
                                "text": "{0}{1}"
                              }
                            ],
                            "customColumnWidthSetting": "27ch"
                          }
                        },
                        {
                          "columnMatch": "version",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "imagesku",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "contains",
                                "thresholdValue": "gen2",
                                "representation": "success",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "contains",
                                "thresholdValue": "gensecond",
                                "representation": "success",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "1",
                                "text": "{0}Review"
                              }
                            ],
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "offer",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "location",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "12ch"
                          }
                        },
                        {
                          "columnMatch": "bootDiagnostics",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "==",
                                "thresholdValue": "true",
                                "representation": "success",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "!=",
                                "thresholdValue": "true",
                                "representation": "1",
                                "text": "{0}Review"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "success",
                                "text": "{0}{1}"
                              }
                            ],
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "avSet",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "18ch"
                          }
                        },
                        {
                          "columnMatch": "ppg",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "10ch"
                          }
                        },
                        {
                          "columnMatch": "avZone",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "10ch"
                          }
                        },
                        {
                          "columnMatch": "resourceGroup",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "adminUsername",
                          "formatter": 5,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "HyperVgen",
                          "formatter": 5,
                          "formatOptions": {
                            "customColumnWidthSetting": "10ch"
                          }
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "id",
                          "label": "VM Name"
                        },
                        {
                          "columnId": "visId",
                          "label": "SID"
                        },
                        {
                          "columnId": "vmRole",
                          "label": "VM Role"
                        },
                        {
                          "columnId": "powerstate",
                          "label": "VM State"
                        },
                        {
                          "columnId": "vmsize",
                          "label": "VM SKU"
                        },
                        {
                          "columnId": "os_type",
                          "label": "Operating System"
                        },
                        {
                          "columnId": "publisher",
                          "label": "OS Image Publisher"
                        },
                        {
                          "columnId": "version",
                          "label": "Image version"
                        },
                        {
                          "columnId": "imagesku",
                          "label": "OS Image SKU"
                        },
                        {
                          "columnId": "location",
                          "label": "Azure Region"
                        },
                        {
                          "columnId": "bootDiagnostics",
                          "label": "Boot Diagnostic"
                        },
                        {
                          "columnId": "avSet",
                          "label": "AvSet"
                        },
                        {
                          "columnId": "ppg",
                          "label": "PPG"
                        },
                        {
                          "columnId": "avZone",
                          "label": "AvZone"
                        },
                        {
                          "columnId": "resourceGroup",
                          "label": "Resource Group"
                        }
                      ]
                    },
                    "sortBy": []
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "computelist"
                    },
                    {
                      "parameterName": "Report_check",
                      "comparison": "isEqualTo",
                      "value": "No"
                    }
                  ],
                  "name": "query - compute List",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "nav",
                    "links": [
                      {
                        "id": "d05b138c-72cf-4fbb-b288-2e02b9f72028",
                        "cellValue": "computeextension",
                        "linkTarget": "parameter",
                        "linkLabel": "VM+Extensions",
                        "subTarget": "listvmextension",
                        "style": "link"
                      },
                      {
                        "id": "ae64417d-6066-4256-b43c-b6847c0a8322",
                        "cellValue": "computeextension",
                        "linkTarget": "parameter",
                        "linkLabel": "VM Extensions Status",
                        "subTarget": "listextension",
                        "style": "link"
                      },
                      {
                        "id": "d9f1a7c3-09a4-4dcc-93b8-08a5c1ff5af0",
                        "cellValue": "computeextension",
                        "linkTarget": "parameter",
                        "linkLabel": "Failed VM Extensions",
                        "subTarget": "failedextension",
                        "style": "link"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "computeextension"
                    }
                  ],
                  "name": "links - Link"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type =~ \"microsoft.compute/virtualMachines\"\r\n| where ('{vmList:id}') has id\r\n| extend vmVISListArray = split(split(split('{vmList:id}', '[')[1], ']')[0], ', ')\r\n| extend vmIndex = array_index_of(vmVISListArray, tolower(id))\r\n| extend visId = vmVISListArray[vmIndex + 1]\r\n| extend vmRoleId = vmVISListArray[vmIndex + 2]\r\n| extend vmRole = \"Databases\"\r\n| extend vmRole = iff(vmRoleId has \"applicationInstances\", \"App server instances\", vmRole)\r\n| extend vmRole = iff(vmRoleId has \"centralInstances\", \"Central service instances\", vmRole)\r\n| extend\r\n    JoinID = toupper(id),\r\n    OSName = tostring(properties.osProfile.computerName),\r\n    OSType = tostring(properties.storageProfile.osDisk.osType),\r\n    VMSize = tostring(properties.hardwareProfile.vmSize)\r\n| join kind=leftouter(\r\n    Resources\r\n    | where type == 'microsoft.compute/virtualmachines/extensions'\r\n    | extend\r\n        VMId = toupper(substring(id, 0, indexof(id, '/extensions'))),\r\n        ExtensionName = name\r\n    ) on $left.JoinID == $right.VMId\r\n| summarize Extensions = make_list(ExtensionName) by id, tostring(visId), vmRole, VMSize, OSType, resourceGroup, location",
                    "size": 2,
                    "title": "Compute Extension",
                    "noDataMessage": "Something went wrong!",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "id",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true,
                            "bladeOpenContext": {
                              "bladeJsonParameters": ""
                            }
                          }
                        },
                        {
                          "columnMatch": "visId",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "OSName",
                          "formatter": 5
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "id",
                          "label": "VM Name"
                        },
                        {
                          "columnId": "visId",
                          "label": "SID"
                        },
                        {
                          "columnId": "vmRole",
                          "label": "VM role"
                        },
                        {
                          "columnId": "VMSize",
                          "label": "VM SKU"
                        },
                        {
                          "columnId": "OSType",
                          "label": "Operating System"
                        },
                        {
                          "columnId": "resourceGroup",
                          "label": "Resource Group"
                        },
                        {
                          "columnId": "location",
                          "label": "Azure Region"
                        },
                        {
                          "columnId": "Extensions",
                          "label": "VM Extensions"
                        }
                      ]
                    },
                    "graphSettings": {
                      "type": 0
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "computeextension"
                    },
                    {
                      "parameterName": "computeextension",
                      "comparison": "isEqualTo",
                      "value": "listvmextension"
                    }
                  ],
                  "showPin": false,
                  "name": "query - Compute Extension",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type =~ \"microsoft.compute/virtualMachines\"\r\n| where ('{vmList:id}') has id\r\n| extend vmVISListArray = split(split(split('{vmList:id}', '[')[1], ']')[0], ', ')\r\n| extend vmIndex = array_index_of(vmVISListArray, tolower(id))\r\n| extend visId = vmVISListArray[vmIndex + 1]\r\n| extend vmRoleId = vmVISListArray[vmIndex + 2]\r\n| extend vmRole = \"Databases\"\r\n| extend vmRole = iff(vmRoleId has \"applicationInstances\", \"App server instances\", vmRole)\r\n| extend vmRole = iff(vmRoleId has \"centralInstances\", \"Central service instances\", vmRole)\r\n| extend\r\n    JoinID = toupper(id),\r\n    OSName = tostring(properties.osProfile.computerName),\r\n    OSType = tostring(properties.storageProfile.osDisk.osType),\r\n    VMSize = tostring(properties.hardwareProfile.vmSize)\r\n| join kind=leftouter(\r\n    Resources\r\n    | where type == 'microsoft.compute/virtualmachines/extensions'\r\n    | extend\r\n        VMId = toupper(substring(id, 0, indexof(id, '/extensions')))\r\n        ,ExtensionName = name\r\n    , provisioningState = tostring(properties.provisioningState), autoUpgradeMinorVersion= tostring(properties.autoUpgradeMinorVersion), typeHandlerVersion= tostring(properties.typeHandlerVersion)\r\n) on $left.JoinID == $right.VMId\r\n| summarize Extensions = make_list(ExtensionName) by id, tostring(visId), vmRole, VMSize, OSType, provisioningState, autoUpgradeMinorVersion, typeHandlerVersion",
                    "size": 0,
                    "title": "VM Extensions Status",
                    "noDataMessage": "No VM Extensions",
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "id",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true,
                            "customColumnWidthSetting": "18ch"
                          }
                        },
                        {
                          "columnMatch": "provisioningState",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "==",
                                "thresholdValue": "Succeeded",
                                "representation": "success",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "==",
                                "thresholdValue": "Failed",
                                "representation": "2",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "Blank",
                                "text": "{0}{1}"
                              }
                            ]
                          }
                        },
                        {
                          "columnMatch": "autoUpgradeMinorVersion",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "==",
                                "thresholdValue": "false",
                                "representation": "Sev1",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "==",
                                "thresholdValue": "true",
                                "representation": "Sev3",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "Blank",
                                "text": "{0}{1}"
                              }
                            ]
                          }
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "id",
                          "label": "VM Name"
                        },
                        {
                          "columnId": "visId",
                          "label": "SID"
                        },
                        {
                          "columnId": "vmRole",
                          "label": "VM role"
                        },
                        {
                          "columnId": "VMSize",
                          "label": "VM SKU"
                        },
                        {
                          "columnId": "OSType",
                          "label": "Operating System"
                        },
                        {
                          "columnId": "provisioningState",
                          "label": "Extension State"
                        },
                        {
                          "columnId": "autoUpgradeMinorVersion",
                          "label": "AutoUpgrade"
                        },
                        {
                          "columnId": "typeHandlerVersion",
                          "label": "Version"
                        },
                        {
                          "columnId": "Extensions",
                          "label": "Extension Name"
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "computeextension"
                    },
                    {
                      "parameterName": "computeextension",
                      "comparison": "isEqualTo",
                      "value": "listextension"
                    }
                  ],
                  "name": "query -  Failed VM Extension "
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "Resources\r\n| where type == \"microsoft.compute/virtualmachines/extensions\"\r\n| where properties['provisioningState'] == \"Failed\"\r\n| extend VMId = toupper(substring(id, 0, indexof(id, '/extensions')))\r\n| where ('{vmList:id}') has id\r\n| extend vmVISListArray = split(split(split('{vmList:id}', '[')[1], ']')[0], ', ')\r\n| extend vmIndex = array_index_of(vmVISListArray, tolower(id))\r\n| extend visId = vmVISListArray[vmIndex + 1]\r\n| extend vmRoleId = vmVISListArray[vmIndex + 2]\r\n| extend vmRole = \"Databases\"\r\n| extend vmRole = iff(vmRoleId has \"applicationInstances\", \"App server instances\", vmRole)\r\n| extend vmRole = iff(vmRoleId has \"centralInstances\", \"Central service instances\", vmRole)\r\n|projectname=tostring(properties.type), properties.typeHandlerVersion\r\n| summarize count() by name",
                    "size": 0,
                    "title": "Failed extensions in the selected VIS",
                    "noDataMessage": "No failed VM extension",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "visualization": "barchart"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "computeextension"
                    },
                    {
                      "parameterName": "computeextension",
                      "comparison": "isEqualTo",
                      "value": "failedextension"
                    }
                  ],
                  "name": "query - List of Extensions",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 1,
                  "content": {
                    "json": "Note: For a Single-server type SID, the VM role column will show the role as App instance. The same VM serves the role of Database and Central service instance.",
                    "style": "info"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "computeos"
                    }
                  ],
                  "name": "text for compute + os disk "
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type =~ \"microsoft.compute/virtualMachines\"\r\n| where ('{vmList:id}') has id\r\n| extend vmVISListArray = split(split(split('{vmList:id}', '[')[1], ']')[0], ', ')\r\n| extend vmIndex = array_index_of(vmVISListArray, tolower(id))\r\n| extend visId = vmVISListArray[vmIndex + 1]\r\n| extend vmRoleId = vmVISListArray[vmIndex + 2]\r\n| extend vmRole = \"Databases\"\r\n| extend vmRole = iff(vmRoleId has \"applicationInstances\", \"App server instances\", vmRole)\r\n| extend vmRole = iff(vmRoleId has \"centralInstances\", \"Central service instances\", vmRole)\r\n| project id, visId, vmRole, vmName = name, vmSize=tostring(properties.hardwareProfile.vmSize), osDisk = tostring(properties.storageProfile.osDisk.name), ppg = tostring(split(properties.proximityPlacementGroup.id,\"/\",8)[0]), caching= tostring(properties.storageProfile.osDisk.caching)\r\n, createOption=tostring(properties.storageProfile.osDisk.createOption), osType=tostring(properties.storageProfile.osDisk.osType), avSet= tostring(split(properties.availabilitySet.id,\"/\",8)[0])\r\n| join ( \r\nresources\r\n| where type == \"microsoft.compute/disks\"\r\n| project id1=id, diskname=name, osDisk=tostring(split(id,\"/\",8)[0]), vmName=tostring(split(managedBy,\"/\",8)[0]), sku.name, disk_tier = tostring(properties.tier), disk_size_GB = tostring(properties.diskSizeGB), \r\n diskbandwidthMBps = tostring(properties.diskMBpsReadWrite), disk_iops = tostring(properties.diskIOPSReadWrite),  managedBy, location, resourceGroup\r\n)\r\non vmName, osDisk\r\n| project id, visId, vmRole, vmName, vmSize, osType, id1, diskname, caching,disk_tier, disk_size_GB,diskbandwidthMBps, disk_iops, createOption, location, resourceGroup , ppg , avSet",
                    "size": 2,
                    "showAnalytics": true,
                    "title": "Compute + OS Disk",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "id",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true,
                            "customColumnWidthSetting": "18ch"
                          },
                          "tooltipFormat": {
                            "tooltip": "Virtual Name must be =< 13 Characters"
                          }
                        },
                        {
                          "columnMatch": "visId",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "vmName",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "vmSize",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "18ch"
                          }
                        },
                        {
                          "columnMatch": "id1",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Metrics",
                            "linkIsContextBlade": true,
                            "showIcon": true,
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "diskname",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "disk_tier",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "12ch"
                          }
                        },
                        {
                          "columnMatch": "disk_size_GB",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "diskbandwidthMBps",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "location",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "resourceGroup",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "25ch"
                          }
                        },
                        {
                          "columnMatch": "ppg",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "avSet",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "os_type",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "12ch"
                          }
                        },
                        {
                          "columnMatch": "datadisk_lun",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "14ch"
                          }
                        },
                        {
                          "columnMatch": "datadisk_wa",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "id2",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "sku_name",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "10ch"
                          }
                        },
                        {
                          "columnMatch": "powerstate",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "vmsize",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "vmgen",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "==",
                                "thresholdValue": "V2",
                                "representation": "success",
                                "text": "V2"
                              },
                              {
                                "operator": "!=",
                                "thresholdValue": "V2",
                                "representation": "1",
                                "text": "Consider a review."
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "success",
                                "text": "{0}{1}"
                              }
                            ]
                          }
                        },
                        {
                          "columnMatch": "avZone",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "tags",
                          "formatter": 5
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "id",
                          "label": "VM Name"
                        },
                        {
                          "columnId": "visId",
                          "label": "SID"
                        },
                        {
                          "columnId": "vmRole",
                          "label": "VM role"
                        },
                        {
                          "columnId": "id1",
                          "label": "Disk Name"
                        },
                        {
                          "columnId": "disk_tier",
                          "label": "Tier"
                        },
                        {
                          "columnId": "disk_size_GB",
                          "label": "Disk Size"
                        },
                        {
                          "columnId": "location",
                          "label": "Azure Region"
                        },
                        {
                          "columnId": "resourceGroup",
                          "label": "Resource Group"
                        },
                        {
                          "columnId": "ppg",
                          "label": "PPG"
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "computeos"
                    }
                  ],
                  "showPin": true,
                  "name": "query - Compute+OS Disk",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 1,
                  "content": {
                    "json": "* This table provides an overview of the **Data disk configuration** in the SAP system\r\n* SAP **HANA log filesystem** disks need to have **Write Acclerator** enabled for Premium_LRS disks. [Learn more](https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/hana-vm-operations-storage)\r\n* See Column: **Write Accelerator** to check if the Write acceleration is on for the HANA log volume.\r\n\r\nNote: For a Single-server type SID, the VM role column will show the role as App instance. The same VM serves the role of Database and Central service instance.",
                    "style": "info"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "computedata"
                    }
                  ],
                  "name": "compute + data disk help text"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type =~ \"microsoft.compute/virtualMachines\"\r\n| where ('{vmList:id}') has id\r\n| extend vmVISListArray = split(split(split('{vmList:id}', '[')[1], ']')[0], ', ')\r\n| extend vmIndex = array_index_of(vmVISListArray, tolower(id))\r\n| extend visId = vmVISListArray[vmIndex + 1]\r\n| extend vmRoleId = vmVISListArray[vmIndex + 2]\r\n| extend vmRole = \"Databases\"\r\n| extend vmRole = iff(vmRoleId has \"applicationInstances\", \"App server instances\", vmRole)\r\n| extend vmRole = iff(vmRoleId has \"centralInstances\", \"Central service instances\", vmRole)\r\n| mv-expand datadisks = properties.storageProfile.dataDisks\r\n| project id, visId, vmRole, vmName = name, \r\n vmSize= tostring(properties.hardwareProfile.vmSize), os_type = tostring(properties.storageProfile.osDisk.osType),\r\n datadisk_lun = toint(datadisks.lun),  datadisk_name = tostring(datadisks.name), datadisksize = tostring(datadisks.diskSizeGB), \r\n datadisk_cache = tostring(datadisks.caching), datadisk_wa = tostring(datadisks.writeAcceleratorEnabled)\r\n//| summarize by vmName,  location, powerstate, avZone, avSet, ppg, vmSize, osname, vmgen, datadisklun, datadiskname, datadisksize, datadiskcache, datadiskwa\r\n| join kind = leftouter  ( \r\nresources\r\n| where type == \"microsoft.compute/disks\"\r\n| parse managedBy with * \"/virtualMachines/\" vmName\r\n| parse id with * \"/disks/\" datadisk_name \r\n| project id1=id, sku.name, disk_tier = tostring(properties.tier), disk_size_GB = tostring(properties.diskSizeGB), \r\n diskbandwidthMBps = tostring(properties.diskMBpsReadWrite), disk_iops = tostring(properties.diskIOPSReadWrite),  datadisk_name, vmName, managedBy, location, resourceGroup\r\n)\r\non vmName, datadisk_name\r\n| project-away datadisk_name, datadisk_name1, vmName1,  managedBy\r\n| sort by vmName asc , datadisk_lun asc\r\n//| distinct datadisk_name",
                    "size": 2,
                    "showAnalytics": true,
                    "title": "Compute + Data disks",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "id",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true,
                            "customColumnWidthSetting": "25ch"
                          },
                          "tooltipFormat": {
                            "tooltip": "VM name is recommended equal or less than 13 characters."
                          }
                        },
                        {
                          "columnMatch": "visId",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "vmName",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "vmSize",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "20ch"
                          }
                        },
                        {
                          "columnMatch": "os_type",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "datadisk_lun",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "10ch"
                          }
                        },
                        {
                          "columnMatch": "datadisksize",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "datadisk_cache",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "datadisk_wa",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "10%"
                          },
                          "tooltipFormat": {
                            "tooltip": "Write Accelerator"
                          }
                        },
                        {
                          "columnMatch": "sku_name",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "17ch"
                          }
                        },
                        {
                          "columnMatch": "disk_tier",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "disk_size_GB",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "disk_iops",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "15ch"
                          }
                        },
                        {
                          "columnMatch": "location",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "18ch"
                          }
                        },
                        {
                          "columnMatch": "avSet",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "11ch"
                          }
                        },
                        {
                          "columnMatch": "ppg",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "9ch"
                          }
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "id",
                          "label": "VM Name"
                        },
                        {
                          "columnId": "visId",
                          "label": "SID"
                        },
                        {
                          "columnId": "vmRole",
                          "label": "VM role"
                        },
                        {
                          "columnId": "vmName",
                          "label": "VM Name"
                        },
                        {
                          "columnId": "vmSize",
                          "label": "VM SKU"
                        },
                        {
                          "columnId": "os_type",
                          "label": "OS Type"
                        },
                        {
                          "columnId": "datadisk_lun",
                          "label": "Disk LUN"
                        },
                        {
                          "columnId": "datadisksize",
                          "label": "Disk Size"
                        },
                        {
                          "columnId": "datadisk_cache",
                          "label": "Disk Cache"
                        },
                        {
                          "columnId": "datadisk_wa",
                          "label": "Write Accelerator"
                        },
                        {
                          "columnId": "id1",
                          "label": "Disk Name"
                        },
                        {
                          "columnId": "sku_name",
                          "label": "Disk SKU"
                        },
                        {
                          "columnId": "disk_tier",
                          "label": "Disk Tier"
                        },
                        {
                          "columnId": "disk_size_GB",
                          "label": "Disk Size"
                        },
                        {
                          "columnId": "diskbandwidthMBps",
                          "label": "Disk BW"
                        },
                        {
                          "columnId": "disk_iops",
                          "label": "Disk IOPS"
                        },
                        {
                          "columnId": "location",
                          "label": "Azure Region"
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "compute"
                    },
                    {
                      "parameterName": "compute",
                      "comparison": "isEqualTo",
                      "value": "computedata"
                    }
                  ],
                  "showPin": true,
                  "name": "query - Compute+Data",
                  "styleSettings": {
                    "showBorder": true
                  }
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "SelectedTab",
              "comparison": "isEqualTo",
              "value": "compute"
            },
            "name": "group - Compute "
          },
          {
            "type": 1,
            "content": {
              "json": "### Config Checks"
            },
            "conditionalVisibility": {
              "parameterName": "SelectedTab",
              "comparison": "isEqualTo",
              "value": "NoShow"
            },
            "name": "text - Config Checks Group"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "d5d59394-e91e-4385-bae2-27ecdc506398",
                        "cellValue": "configchecks",
                        "linkTarget": "parameter",
                        "linkLabel": "Accelerated Networking",
                        "subTarget": "accn",
                        "style": "link"
                      },
                      {
                        "id": "d4d9e17b-e016-4c6a-810a-f00c9a60d864",
                        "cellValue": "configchecks",
                        "linkTarget": "parameter",
                        "linkLabel": "Public IP",
                        "subTarget": "publicip",
                        "style": "link"
                      },
                      {
                        "id": "4b72f572-6109-4bb1-a3fa-bff85e9e69e5",
                        "cellValue": "configchecks",
                        "linkTarget": "parameter",
                        "linkLabel": "Backup",
                        "subTarget": "backup",
                        "style": "link"
                      },
                      {
                        "id": "21e722be-71dd-4eec-8c93-75b2a731251c",
                        "cellValue": "configchecks",
                        "linkTarget": "parameter",
                        "linkLabel": "Load Balancer",
                        "subTarget": "stndlb",
                        "style": "link"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "SelectedTab",
                    "comparison": "isEqualTo",
                    "value": "configchecks"
                  },
                  "name": "links - Configuration Checks"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type =~ \"microsoft.compute/virtualMachines\"\r\n| where ('{vmList:id}') has id\r\n| extend vmVISListArray = split(split(split('{vmList:id}', '[')[1], ']')[0], ', ')\r\n| extend vmIndex = array_index_of(vmVISListArray, tolower(id))\r\n| extend visId = vmVISListArray[vmIndex + 1]\r\n| extend vmRoleId = vmVISListArray[vmIndex + 2]\r\n| extend vmRole = \"Databases\"\r\n| extend vmRole = iff(vmRoleId has \"applicationInstances\", \"App server instances\", vmRole)\r\n| extend vmRole = iff(vmRoleId has \"centralInstances\", \"Central service instances\", vmRole)\r\n| extend nics=array_length(properties.networkProfile.networkInterfaces) \r\n| mv-expand nic=properties.networkProfile.networkInterfaces \r\n//| where nics == 1 or nic.properties.primary =~ 'true' or isempty(nic) \r\n| project id, visId, vmRole, vmName = name, az = tostring(zones), vmSize = tostring(properties.hardwareProfile.vmSize), AvSet= tostring(split(properties.availabilitySet.id,\"/\",8)[0]), ppg = tostring(split(properties.proximityPlacementGroup.id,\"/\",8)[0]),  nicId = tostring(nic.id) \r\n| join kind=leftouter ( \r\n  Resources \r\n  | where type =~ 'microsoft.network/networkinterfaces' \r\n  | extend ipConfigsCount=array_length(properties.ipConfigurations) \r\n  | mv-expand ipconfig=properties.ipConfigurations \r\n  //| where ipconfig.properties.primary =~ 'true' \r\n  | project nicId = id, ipaddress = tostring(ipconfig.properties.privateIPAddress), AcceleratedNetworkingOn = tostring(properties.enableAcceleratedNetworking)) on nicId \r\n| summarize by id, tostring(visId), vmRole, nicId, vmName,vmSize,AcceleratedNetworkingOn,ipaddress, AvSet, ppg,  az   ",
                    "size": 0,
                    "showAnalytics": true,
                    "title": "Check for Accelerated Networking",
                    "noDataMessage": "Something went south",
                    "showExportToExcel": true,
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "id",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "visId",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "nicId",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "vmName",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "AcceleratedNetworkingOn",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "==",
                                "thresholdValue": "true",
                                "representation": "Available",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "==",
                                "thresholdValue": "false",
                                "representation": "2",
                                "text": "{0}  Consider enabling Accelerated Networking"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "success",
                                "text": "{0}{1}"
                              }
                            ],
                            "armActionContext": {
                              "headers": [],
                              "params": [],
                              "httpMethod": "POST",
                              "description": "# ARM actions can potentially modify resources.\n## Please use caution and include a confirmation message in this description when authoring this command."
                            }
                          }
                        },
                        {
                          "columnMatch": "ipaddress",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "AvSet",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "is Empty",
                                "representation": "Sev2",
                                "text": "{0}VM not part of AvSet"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "Sev3",
                                "text": "{0}{1}"
                              }
                            ],
                            "customColumnWidthSetting": "30ch"
                          }
                        },
                        {
                          "columnMatch": "ppg",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "is Empty",
                                "representation": "Sev2",
                                "text": "VM not part of PPG"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "Sev3",
                                "text": "{0}{1}"
                              }
                            ],
                            "customColumnWidthSetting": "30ch"
                          }
                        },
                        {
                          "columnMatch": "az",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "is Empty",
                                "representation": "Sev2",
                                "text": "VM not part of AvZone"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "Sev3",
                                "text": "Zonal Deployment"
                              }
                            ],
                            "customColumnWidthSetting": "30ch"
                          }
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "id",
                          "label": "VM Name"
                        },
                        {
                          "columnId": "visId",
                          "label": "SID"
                        },
                        {
                          "columnId": "vmRole",
                          "label": "VM role"
                        },
                        {
                          "columnId": "nicId",
                          "label": "NIC name"
                        },
                        {
                          "columnId": "vmName",
                          "label": "VM Name"
                        },
                        {
                          "columnId": "vmSize",
                          "label": "VM SKU"
                        },
                        {
                          "columnId": "AcceleratedNetworkingOn",
                          "label": "Accelerated Networking State"
                        },
                        {
                          "columnId": "ppg",
                          "label": "PPG"
                        },
                        {
                          "columnId": "az",
                          "label": "AvZone"
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "accn"
                    }
                  ],
                  "name": "query - Accelerated Networking",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 1,
                  "content": {
                    "json": "_Public IP_\r\n\r\nThe public IPs listed below are associated with NICs linked to the VMs in your VIS. There may be other public IPs linked to resources like load balancers, NAT gateways, VM scale sets etc. which are not listed here. We plan to add them in the future.",
                    "style": "info"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "publicip"
                    },
                    {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    }
                  ],
                  "name": "text - Load Balancer - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "Resources\r\n| where type =~ 'microsoft.network/publicipaddresses'\r\n| join (\r\n    resources \r\n    | where type =~ 'microsoft.network/networkinterfaces'\r\n    | where id in~ ({vmNICs})\r\n    | extend ipConfigsCount=array_length(properties.ipConfigurations) \r\n    | mv-expand ipconfig=properties.ipConfigurations \r\n    //| where ipconfig.properties.primary =~ 'true' \r\n    | extend publicIpId = ipconfig.properties.publicIPAddress.id\r\n    | where publicIpId != \"\"\r\n    | project tostring(publicIpId)\r\n) on $left.id==$right.publicIpId\r\n| where isnotempty(properties.ipAddress)",
                    "size": 0,
                    "title": "Azure resources with Public IP",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "$gen_group",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "id",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "name",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "type",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "tenantId",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "kind",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "subscriptionId",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "managedBy",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "sku",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "plan",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "properties",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "tags",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "identity",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "extendedLocation",
                          "formatter": 5
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "hierarchySettings": {
                        "treeType": 1,
                        "groupBy": [
                          "subscriptionId"
                        ],
                        "expandTopLevel": true,
                        "finalBy": "id"
                      },
                      "labelSettings": [
                        {
                          "columnId": "id",
                          "label": "IP Resource Name"
                        },
                        {
                          "columnId": "location",
                          "label": "Azure Region"
                        },
                        {
                          "columnId": "resourceGroup",
                          "label": "Resource Group"
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "publicip"
                    }
                  ],
                  "name": "query - Check for resources with Public IP",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type =~ \"microsoft.compute/virtualMachines\"\r\n| where ('{vmList:id}') has id\r\n| extend vmVISListArray = split(split(split('{vmList:id}', '[')[1], ']')[0], ', ')\r\n| extend vmIndex = array_index_of(vmVISListArray, tolower(id))\r\n| extend visId = vmVISListArray[vmIndex + 1]\r\n| extend vmRoleId = vmVISListArray[vmIndex + 2]\r\n| extend vmRole = \"Databases\"\r\n| extend vmRole = iff(vmRoleId has \"applicationInstances\", \"App server instances\", vmRole)\r\n| extend vmRole = iff(vmRoleId has \"centralInstances\", \"Central service instances\", vmRole)\r\n| extend resourceId=tolower(id) \r\n| join kind = leftouter ( RecoveryServicesResources\r\n| where type == \"microsoft.recoveryservices/vaults/backupfabrics/protectioncontainers/protecteditems\"\r\n| where properties.backupManagementType == \"AzureIaasVM\"\r\n| project resourceId = tolower(tostring(properties.sourceResourceId)), backupItemid = id, isBackedUp = isnotempty(id) ) on resourceId \r\n| extend isProtected = isnotempty(backupItemid)\r\n| where (isProtected == (0))\r\n| project id, visId, vmRole, name,resourceGroup,location,tags",
                    "size": 0,
                    "title": "VM's with no Azure backup",
                    "noDataMessage": "Well done! All VM's are configured with backup.",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "id",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "visId",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "name",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "tags",
                          "formatter": 5
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "id",
                          "label": "VM Name"
                        },
                        {
                          "columnId": "visId",
                          "label": "SID"
                        },
                        {
                          "columnId": "vmRole",
                          "label": "VM role"
                        },
                        {
                          "columnId": "resourceGroup",
                          "label": "Resource group"
                        },
                        {
                          "columnId": "location",
                          "label": "Azure Region"
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "backup"
                    }
                  ],
                  "name": "query - VM's with no backup",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "RecoveryServicesResources\r\n| where type == 'microsoft.recoveryservices/vaults/backuppolicies'\r\n| extend vaultName = case(type == 'microsoft.recoveryservices/vaults/backuppolicies', split(split(id, 'microsoft.recoveryservices/vaults/')[1],'/')[0],type == 'microsoft.recoveryservices/vaults/backuppolicies', split(split(id, 'microsoft.recoveryservices/vaults/')[1],'/')[0],'--')\r\n| extend datasourceType = case(type == 'microsoft.recoveryservices/vaults/backuppolicies', properties.backupManagementType,type == 'microsoft.dataprotection/backupVaults/backupPolicies',properties.datasourceTypes[0],'--')\r\n| project id,name,vaultName,resourceGroup,properties,datasourceType\r\n| where datasourceType == 'AzureIaasVM'",
                    "size": 0,
                    "title": "List all Backup policies used for Azure VMs",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "id",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "vaultName",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "datasourceType",
                          "formatter": 5
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "id",
                          "label": "Link to Backup Policy"
                        },
                        {
                          "columnId": "name",
                          "label": "Name of Backup Policy"
                        },
                        {
                          "columnId": "resourceGroup",
                          "label": "Resource Name"
                        },
                        {
                          "columnId": "properties",
                          "label": "Retention Policy"
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "backup"
                    },
                    {
                      "parameterName": "backup",
                      "comparison": "isEqualTo",
                      "value": "bckpolicy"
                    }
                  ],
                  "name": "query - List all Backup policies used for Azure VMs",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 9,
                  "content": {
                    "version": "KqlParameterItem/1.0",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "parameters": [
                      {
                        "id": "a0373635-ad8d-4770-82bf-a6b6acc47a88",
                        "version": "KqlParameterItem/1.0",
                        "name": "Resources",
                        "label": "Storage accounts",
                        "type": 5,
                        "isRequired": true,
                        "multiSelect": true,
                        "quote": "'",
                        "delimiter": ",",
                        "query": "where type =~ 'microsoft.storage/storageaccounts'\r\n| order by name asc\r\n| extend Rank = row_number()\r\n| project value = id, label = id, selected = Rank <= 5",
                        "crossComponentResources": [
                          "{Subscriptions}"
                        ],
                        "typeSettings": {
                          "resourceTypeFilter": {
                            "microsoft.storage/storageaccounts": true
                          },
                          "additionalResourceOptions": [
                            "value::5",
                            "value::all"
                          ],
                          "showDefault": false
                        },
                        "timeContext": {
                          "durationMs": 86400000
                        },
                        "defaultValue": "value::5",
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources",
                        "value": [
                          "value::all"
                        ]
                      },
                      {
                        "id": "34ecbb4e-158f-409d-8074-1c408be01c42",
                        "version": "KqlParameterItem/1.0",
                        "name": "TimeRange",
                        "type": 4,
                        "isRequired": true,
                        "value": {
                          "durationMs": 14400000
                        },
                        "typeSettings": {
                          "selectableValues": [
                            {
                              "durationMs": 300000
                            },
                            {
                              "durationMs": 900000
                            },
                            {
                              "durationMs": 1800000
                            },
                            {
                              "durationMs": 3600000
                            },
                            {
                              "durationMs": 14400000
                            },
                            {
                              "durationMs": 43200000
                            },
                            {
                              "durationMs": 86400000
                            },
                            {
                              "durationMs": 172800000
                            },
                            {
                              "durationMs": 259200000
                            },
                            {
                              "durationMs": 604800000
                            },
                            {
                              "durationMs": 1209600000
                            },
                            {
                              "durationMs": 2419200000
                            },
                            {
                              "durationMs": 2592000000
                            },
                            {
                              "durationMs": 5184000000
                            },
                            {
                              "durationMs": 7776000000
                            }
                          ]
                        },
                        "timeContext": {
                          "durationMs": 86400000
                        }
                      },
                      {
                        "id": "bcd653bc-bc9d-49d2-b70d-9d4ed5174f8f",
                        "version": "KqlParameterItem/1.0",
                        "name": "Message",
                        "type": 1,
                        "query": "where type == 'microsoft.storage/storageaccounts' \r\n| summarize Selected = countif(id in ({Resources:value})), Total = count()\r\n| extend Selected = iff(Selected > 200, 200, Selected)\r\n| project Message = strcat('# ', Selected, ' / ', Total)",
                        "crossComponentResources": [
                          "{Subscriptions}"
                        ],
                        "isHiddenWhenLocked": true,
                        "timeContext": {
                          "durationMs": 86400000
                        },
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources"
                      },
                      {
                        "id": "16a97aee-d216-46c6-8ebd-5d14acb1fcff",
                        "version": "KqlParameterItem/1.0",
                        "name": "ResourceName",
                        "type": 1,
                        "isRequired": true,
                        "isHiddenWhenLocked": true,
                        "criteriaData": [
                          {
                            "criteriaContext": {
                              "operator": "Default",
                              "resultValType": "static",
                              "resultVal": "Storage account"
                            }
                          }
                        ],
                        "timeContext": {
                          "durationMs": 86400000
                        }
                      },
                      {
                        "id": "32dcfd42-0bd6-4beb-a5c1-4b503e1b9a4a",
                        "version": "KqlParameterItem/1.0",
                        "name": "Performance",
                        "type": 2,
                        "isRequired": true,
                        "query": "{\"version\":\"1.0.0\",\"content\":\"[\\\"Yes\\\", \\\"No\\\"]\",\"transformers\":null}",
                        "value": "No",
                        "typeSettings": {
                          "additionalResourceOptions": []
                        },
                        "queryType": 8,
                        "label": "Show Storage Performance"
                      }
                    ],
                    "style": "above",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "blob"
                    }
                  ],
                  "name": "parameters - Blob Overview"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "{Message}\r\n_Storage accounts_"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "blob"
                    }
                  ],
                  "name": "text - Blob text"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbookccea5694-99c5-4e38-8b61-011c07d379f3",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 0,
                    "resourceType": "microsoft.storage/storageaccounts",
                    "metricScope": 0,
                    "resourceParameter": "Resources",
                    "resourceIds": [
                      "{Resources}"
                    ],
                    "timeContextFromParameter": "TimeRange",
                    "timeContext": {
                      "durationMs": 14400000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.storage/storageaccounts",
                        "metric": "microsoft.storage/storageaccounts-Capacity-UsedCapacity",
                        "aggregation": 4
                      },
                      {
                        "namespace": "microsoft.storage/storageaccounts/blobservices",
                        "metric": "microsoft.storage/storageaccounts/blobservices-Capacity-BlobCapacity",
                        "aggregation": 4
                      },
                      {
                        "namespace": "microsoft.storage/storageaccounts/fileservices",
                        "metric": "microsoft.storage/storageaccounts/fileservices-Capacity-FileCapacity",
                        "aggregation": 4
                      },
                      {
                        "namespace": "microsoft.storage/storageaccounts/queueservices",
                        "metric": "microsoft.storage/storageaccounts/queueservices-Capacity-QueueCapacity",
                        "aggregation": 4
                      },
                      {
                        "namespace": "microsoft.storage/storageaccounts/tableservices",
                        "metric": "microsoft.storage/storageaccounts/tableservices-Capacity-TableCapacity",
                        "aggregation": 4
                      }
                    ],
                    "title": "Storage Capacity Overview",
                    "resourceLimit": 10000,
                    "showExpandCollapseGrid": true,
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "$gen_group",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "subTarget": "insights",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "Subscription",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "Name",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts-Capacity-UsedCapacity$|microsoft.storage/storageaccounts/blobservices-Capacity-BlobCapacity$|microsoft.storage/storageaccounts/fileservices-Capacity-FileCapacity$|microsoft.storage/storageaccounts/queueservices-Capacity-QueueCapacity$|microsoft.storage/storageaccounts/tableservices-Capacity-TableCapacity$",
                          "formatter": 8,
                          "formatOptions": {
                            "min": 0,
                            "palette": "blue",
                            "linkColumn": "Name",
                            "linkTarget": "WorkbookTemplate",
                            "workbookContext": {
                              "componentIdSource": "column",
                              "componentId": "Name",
                              "resourceIdsSource": "column",
                              "resourceIds": "Name",
                              "templateIdSource": "static",
                              "templateId": "Community-Workbooks/Individual Storage/Capacity",
                              "typeSource": "static",
                              "type": "workbook",
                              "gallerySource": "static",
                              "gallery": "microsoft.storage/storageaccounts",
                              "locationSource": "default"
                            }
                          },
                          "numberFormat": {
                            "unit": 2,
                            "options": {
                              "style": "decimal",
                              "maximumFractionDigits": 1
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts-Capacity-UsedCapacity Timeline",
                          "formatter": 21,
                          "formatOptions": {
                            "palette": "blue"
                          },
                          "numberFormat": {
                            "unit": 2,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts/blobservices-Capacity-BlobCapacity",
                          "formatter": 8,
                          "formatOptions": {
                            "palette": "blue",
                            "workbookContext": {
                              "componentIdSource": "column",
                              "componentId": "Name",
                              "resourceIdsSource": "column",
                              "resourceIds": "Name",
                              "templateIdSource": "static",
                              "templateId": "Community-Workbooks/Individual Storage/Capacity",
                              "typeSource": "static",
                              "type": "workbook",
                              "gallerySource": "static",
                              "gallery": "microsoft.storage/storageaccounts",
                              "locationSource": "default"
                            }
                          },
                          "numberFormat": {
                            "unit": 2,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts/blobservices-Capacity-BlobCapacity Timeline",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts/fileservices-Capacity-FileCapacity",
                          "formatter": 8,
                          "formatOptions": {
                            "palette": "blue"
                          },
                          "numberFormat": {
                            "unit": 2,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts/fileservices-Capacity-FileCapacity Timeline",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts/queueservices-Capacity-QueueCapacity",
                          "formatter": 8,
                          "formatOptions": {
                            "palette": "blue"
                          },
                          "numberFormat": {
                            "unit": 2,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts/queueservices-Capacity-QueueCapacity Timeline",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts/tableservices-Capacity-TableCapacity",
                          "formatter": 8,
                          "formatOptions": {
                            "palette": "blue"
                          },
                          "numberFormat": {
                            "unit": 2,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts/tableservices-Capacity-TableCapacity Timeline",
                          "formatter": 5
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "hierarchySettings": {
                        "treeType": 1,
                        "groupBy": [
                          "Subscription"
                        ],
                        "expandTopLevel": true
                      },
                      "labelSettings": [
                        {
                          "columnId": "Name",
                          "label": "Storage Name"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts-Capacity-UsedCapacity",
                          "label": "Used capacity (Average)"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts-Capacity-UsedCapacity Timeline",
                          "label": "Used capacity Timeline"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts/blobservices-Capacity-BlobCapacity",
                          "label": "Blob Capacity (Average)"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts/blobservices-Capacity-BlobCapacity Timeline",
                          "label": "Blob Capacity Timeline"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts/fileservices-Capacity-FileCapacity",
                          "label": "File Capacity (Average)"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts/fileservices-Capacity-FileCapacity Timeline",
                          "label": "File Capacity Timeline"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts/queueservices-Capacity-QueueCapacity",
                          "label": "Queue Capacity (Average)"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts/queueservices-Capacity-QueueCapacity Timeline",
                          "label": "Queue Capacity Timeline"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts/tableservices-Capacity-TableCapacity",
                          "label": "Table Capacity (Average)"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts/tableservices-Capacity-TableCapacity Timeline",
                          "label": "Table Capacity Timeline"
                        }
                      ]
                    },
                    "exportToExcelOptions": "all"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "blob"
                    }
                  ],
                  "showPin": false,
                  "name": "metric - Storage Capacity Overview"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook14690fcf-55b7-484e-8efd-8df92c6a6446",
                    "version": "MetricsItem/2.0",
                    "size": 2,
                    "chartType": 0,
                    "resourceType": "microsoft.storage/storageaccounts",
                    "metricScope": 0,
                    "resourceParameter": "Resources",
                    "resourceIds": [
                      "{Resources}"
                    ],
                    "timeContextFromParameter": "TimeRange",
                    "timeContext": {
                      "durationMs": 14400000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.storage/storageaccounts",
                        "metric": "microsoft.storage/storageaccounts-Transaction-Transactions",
                        "aggregation": 1
                      },
                      {
                        "namespace": "microsoft.storage/storageaccounts",
                        "metric": "microsoft.storage/storageaccounts-Transaction-SuccessE2ELatency",
                        "aggregation": 4
                      },
                      {
                        "namespace": "microsoft.storage/storageaccounts",
                        "metric": "microsoft.storage/storageaccounts-Transaction-Ingress",
                        "aggregation": 1
                      },
                      {
                        "namespace": "microsoft.storage/storageaccounts",
                        "metric": "microsoft.storage/storageaccounts-Transaction-Egress",
                        "aggregation": 1
                      }
                    ],
                    "title": "Blob Perfomance Metrics",
                    "showExpandCollapseGrid": true,
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "$gen_group",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "Subscription",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "Name",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts-Transaction-Transactions",
                          "formatter": 8,
                          "formatOptions": {
                            "min": 0,
                            "palette": "blue"
                          },
                          "numberFormat": {
                            "unit": 17,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts-Transaction-Transactions Timeline",
                          "formatter": 21,
                          "formatOptions": {
                            "min": 0,
                            "palette": "blue"
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts-Transaction-SuccessE2ELatency",
                          "formatter": 8,
                          "formatOptions": {
                            "min": 0,
                            "palette": "blue"
                          },
                          "numberFormat": {
                            "unit": 23,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts-Transaction-SuccessE2ELatency Timeline",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts-Transaction-Ingress",
                          "formatter": 8,
                          "formatOptions": {
                            "min": 0,
                            "palette": "blue"
                          },
                          "numberFormat": {
                            "unit": 2,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts-Transaction-Ingress Timeline",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts-Transaction-Egress",
                          "formatter": 8,
                          "formatOptions": {
                            "palette": "blue"
                          },
                          "numberFormat": {
                            "unit": 2,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.storage/storageaccounts-Transaction-Egress Timeline",
                          "formatter": 5
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "hierarchySettings": {
                        "treeType": 1,
                        "groupBy": [
                          "Subscription"
                        ],
                        "expandTopLevel": true
                      },
                      "labelSettings": [
                        {
                          "columnId": "Name",
                          "label": "Storage Name"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts-Transaction-Transactions",
                          "label": "Transactions (Sum)"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts-Transaction-Transactions Timeline",
                          "label": "Transactions Timeline"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts-Transaction-SuccessE2ELatency",
                          "label": "Success E2E Latency (Average)"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts-Transaction-SuccessE2ELatency Timeline",
                          "label": "Success E2E Latency Timeline"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts-Transaction-Ingress",
                          "label": "Ingress (Sum)"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts-Transaction-Ingress Timeline",
                          "label": "Ingress Timeline"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts-Transaction-Egress",
                          "label": "Egress (Sum)"
                        },
                        {
                          "columnId": "microsoft.storage/storageaccounts-Transaction-Egress Timeline",
                          "label": "Egress Timeline"
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "blob"
                    },
                    {
                      "parameterName": "Performance",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    }
                  ],
                  "name": "metric - Overview"
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "9977c432-ea8f-472d-af8e-98618ed254fd",
                        "cellValue": "stndlb",
                        "linkTarget": "parameter",
                        "linkLabel": "Load Balancer Overview",
                        "subTarget": "stndlboverview",
                        "style": "link"
                      },
                      {
                        "id": "8f6c64f6-8b89-49be-a137-acb85513c5f9",
                        "cellValue": "stndlb",
                        "linkTarget": "parameter",
                        "linkLabel": "Load Balancer Monitor",
                        "subTarget": "stndlbmonitor",
                        "style": "link"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "stndlb"
                    }
                  ],
                  "name": "links - Standard Load Balancer"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "_Standard Load Balancer_\r\n\r\nTo prevent timeout, different settings on Azure ILB, the SAP ASCS/SCS instance, and Windows cluster nodes must be configured to enable the so-called keep alive functionality.\r\n\r\nThe keep alive functionality will prevent Azure ILB time out.\r\nSettings on Azure Basic ILB\r\nMake sure that ALL Azure ILB Load Balancing Rules have:\r\nIdle timeout (minutes) settings,  set to the maximum value of 30 minutes.\r\nFloating IP (direct server return) must be Enabled\r\n\r\nThe Load balancers listed below are linked to the VMs in the VIS. It is possible that one of these Load balancers are associated with a different VIS. In that case you will be able to see the same load balancer again in this list shown for the other VIS.\r\n\r\nNOTE: You can enable Floating IP only during creation of an Azure ILB rule. Therefore, if Floating IP is disabled for an existing Azure ILB rules, you need to delete the Azure ILB rule and create them again with option Enable Floating IP",
                    "style": "info"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "stndlb"
                    },
                    {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    }
                  ],
                  "name": "text - Load Balancer"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type == \"microsoft.network/loadbalancers\"\r\n| join (\r\n    resources \r\n    | where type =~ 'microsoft.network/networkinterfaces'\r\n    | where ('{vmNICs:id}') has id\r\n    | extend nicVISList = split('{vmNICs:id}', \", \")\r\n    | extend vmIndex = array_index_of(nicVISList, tolower(id))\r\n    | extend visId = toupper(nicVISList[vmIndex + 1])\r\n    | extend vmRoleId = nicVISList[vmIndex + 2]\r\n    | extend ipConfigsCount=array_length(properties.ipConfigurations) \r\n    | mv-expand ipconfig=properties.ipConfigurations\r\n    | extend backendPool = ipconfig.properties.loadBalancerBackendAddressPools\r\n    | mv-expand backendPool\r\n    | extend backendPoolId = backendPool.id\r\n    | where backendPoolId != \"\"\r\n    | extend loadBalanderId = substring(backendPoolId, 0, indexof(backendPoolId, '/', 0, -1, 9)) \r\n    //| distinct loadBalanderId\r\n    | project loadBalanderId, tostring(visId), tostring(vmRoleId)\r\n) on $left.id == $right.loadBalanderId\r\n| extend sku = tostring(sku.name)\r\n| mv-expand lbrules = properties.loadBalancingRules\r\n| mv-expand feip = properties.frontendIPConfigurations\r\n| mv-expand probes = properties.probes\r\n| project subscriptionId\r\n, id\r\n, tostring(visId), tostring(vmRoleId)\r\n, resourceGroup\r\n, lbName=name\r\n, sku\r\n, location\r\n, rulename=tostring(lbrules.name)\r\n, frontendIP=tostring(feip.properties.privateIPAddress)\r\n, probeport=tostring(probes.properties.port)\r\n, HA_Ports= tostring(lbrules.properties.protocol)\r\n, rule_idleTimeoutMinutes=tostring(lbrules.properties.idleTimeoutInMinutes)\r\n, rule_isFloatingIPEnabled = tostring(lbrules.properties.enableFloatingIP)\r\n, rule_isTCP_ResetEnabled = tostring(lbrules.properties.enableTcpReset)\r\n, rule_loadDistribution = tostring(lbrules.properties.loadDistribution)\r\n| summarize by subscriptionId\r\n, id\r\n, tostring(visId), tostring(vmRoleId)\r\n, lbName\r\n, resourceGroup\r\n, location\r\n, sku\r\n, rulename\r\n, frontendIP\r\n, probeport\r\n, HA_Ports\r\n, rule_idleTimeoutMinutes\r\n, rule_isFloatingIPEnabled\r\n, rule_isTCP_ResetEnabled\r\n, rule_loadDistribution",
                    "size": 2,
                    "title": "Standard Load Balancer Overview",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "subscriptionId",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "id",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "visId",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "lbName",
                          "formatter": 5,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true
                          }
                        },
                        {
                          "columnMatch": "HA_Ports",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "==",
                                "thresholdValue": "All",
                                "representation": "success",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "!=",
                                "thresholdValue": "All",
                                "representation": "2",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "success",
                                "text": "{0}{1}"
                              }
                            ]
                          }
                        },
                        {
                          "columnMatch": "rule_isFloatingIPEnabled",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "==",
                                "thresholdValue": "true",
                                "representation": "Available",
                                "text": "Enabled"
                              },
                              {
                                "operator": "!=",
                                "thresholdValue": "true",
                                "representation": "2",
                                "text": "Review SAP Note 2743751"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "success",
                                "text": "{0}{1}"
                              }
                            ]
                          }
                        },
                        {
                          "columnMatch": "nicId",
                          "formatter": 1
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "visId",
                          "label": "SID"
                        },
                        {
                          "columnId": "vmRoleId",
                          "label": "SAP resource type"
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "stndlb"
                    },
                    {
                      "parameterName": "stndlb",
                      "comparison": "isEqualTo",
                      "value": "stndlboverview"
                    }
                  ],
                  "showPin": true,
                  "name": "query - Standard Load Balancer Overview"
                },
                {
                  "type": 9,
                  "content": {
                    "version": "KqlParameterItem/1.0",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "parameters": [
                      {
                        "id": "173cfcd1-93dd-4eb1-9d1d-c8f10bc9973c",
                        "version": "KqlParameterItem/1.0",
                        "name": "Resources",
                        "label": "Load Balancer",
                        "type": 5,
                        "isRequired": true,
                        "multiSelect": true,
                        "quote": "'",
                        "delimiter": ",",
                        "query": "resources\r\n| where type == \"microsoft.network/loadbalancers\"\r\n| join (\r\n    resources \r\n    | where type =~ 'microsoft.network/networkinterfaces'\r\n    | where ('{vmNICs:id}') has id\r\n    | extend ipConfigsCount=array_length(properties.ipConfigurations) \r\n    | mv-expand ipconfig=properties.ipConfigurations\r\n    | extend backendPool = ipconfig.properties.loadBalancerBackendAddressPools\r\n    | mv-expand backendPool\r\n    | extend backendPoolId = backendPool.id\r\n    | where backendPoolId != \"\"\r\n    | extend loadBalanderId = substring(backendPoolId, 0, indexof(backendPoolId, '/', 0, -1, 9)) \r\n    | distinct loadBalanderId\r\n) on $left.id == $right.loadBalanderId\r\n| order by name asc\r\n| extend Rank = row_number()\r\n| project value = id, label = id, selected = Rank <= 5",
                        "crossComponentResources": [
                          "value::all"
                        ],
                        "typeSettings": {
                          "additionalResourceOptions": [
                            "value::all"
                          ],
                          "showDefault": false
                        },
                        "timeContext": {
                          "durationMs": 86400000
                        },
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources"
                      },
                      {
                        "id": "ee1d322c-ed49-4840-94eb-a4f32d098f71",
                        "version": "KqlParameterItem/1.0",
                        "name": "TimeRange",
                        "type": 4,
                        "isRequired": true,
                        "value": {
                          "durationMs": 900000
                        },
                        "typeSettings": {
                          "selectableValues": [
                            {
                              "durationMs": 300000
                            },
                            {
                              "durationMs": 900000
                            },
                            {
                              "durationMs": 1800000
                            },
                            {
                              "durationMs": 3600000
                            },
                            {
                              "durationMs": 14400000
                            },
                            {
                              "durationMs": 43200000
                            },
                            {
                              "durationMs": 86400000
                            },
                            {
                              "durationMs": 172800000
                            },
                            {
                              "durationMs": 259200000
                            },
                            {
                              "durationMs": 604800000
                            },
                            {
                              "durationMs": 1209600000
                            },
                            {
                              "durationMs": 2419200000
                            },
                            {
                              "durationMs": 2592000000
                            },
                            {
                              "durationMs": 5184000000
                            },
                            {
                              "durationMs": 7776000000
                            }
                          ]
                        },
                        "timeContext": {
                          "durationMs": 86400000
                        }
                      },
                      {
                        "id": "99b98a4e-6efd-4a94-9e67-3f86ff7c7b58",
                        "version": "KqlParameterItem/1.0",
                        "name": "Message",
                        "type": 1,
                        "query": "resources\r\n| where type == \"microsoft.network/loadbalancers\"\r\n| join (\r\n    resources \r\n    | where type =~ 'microsoft.network/networkinterfaces'\r\n    | where id in~ ({vmNICs})\r\n    | extend ipConfigsCount=array_length(properties.ipConfigurations) \r\n    | mv-expand ipconfig=properties.ipConfigurations\r\n    | extend backendPool = ipconfig.properties.loadBalancerBackendAddressPools\r\n    | mv-expand backendPool\r\n    | extend backendPoolId = backendPool.id\r\n    | where backendPoolId != \"\"\r\n    | extend loadBalanderId = substring(backendPoolId, 0, indexof(backendPoolId, '/', 0, -1, 9)) \r\n    | distinct loadBalanderId\r\n) on $left.id == $right.loadBalanderId\r\n| summarize Selected = countif(id in ({Resources:value})), Total = count()\r\n| extend Selected = iff(Selected > 200, 200, Selected)\r\n| project Message = strcat('# ', Selected, ' / ', Total)",
                        "crossComponentResources": [
                          "{Resources}"
                        ],
                        "isHiddenWhenLocked": true,
                        "timeContext": {
                          "durationMs": 86400000
                        },
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources"
                      },
                      {
                        "id": "4c0feecb-dbca-435a-bafe-ca307586017e",
                        "version": "KqlParameterItem/1.0",
                        "name": "ResourceName",
                        "type": 1,
                        "isRequired": true,
                        "isHiddenWhenLocked": true,
                        "criteriaData": [
                          {
                            "criteriaContext": {
                              "operator": "Default",
                              "resultValType": "static",
                              "resultVal": "Load Balancer"
                            }
                          }
                        ],
                        "timeContext": {
                          "durationMs": 86400000
                        }
                      }
                    ],
                    "style": "pills",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "stndlb"
                    },
                    {
                      "parameterName": "stndlb",
                      "comparison": "isEqualTo",
                      "value": "stndlbmonitor"
                    }
                  ],
                  "name": "parameters - Selection of Load Balancer"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "{Message}\r\n_Azure Load Balancer_"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "stndlb"
                    },
                    {
                      "parameterName": "stndlb",
                      "comparison": "isEqualTo",
                      "value": "stndlbmonitor"
                    }
                  ],
                  "name": "text - Load Balancer Overview"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook8642f436-3fbb-4a96-ba03-5c5d4b0edbad",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 0,
                    "resourceType": "microsoft.network/loadbalancers",
                    "metricScope": 0,
                    "resourceParameter": "Resources",
                    "resourceIds": [
                      "{Resources}"
                    ],
                    "timeContextFromParameter": "TimeRange",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.network/loadbalancers",
                        "metric": "microsoft.network/loadbalancers--VipAvailability",
                        "aggregation": 4
                      },
                      {
                        "namespace": "microsoft.network/loadbalancers",
                        "metric": "microsoft.network/loadbalancers--DipAvailability",
                        "aggregation": 4
                      },
                      {
                        "namespace": "microsoft.network/loadbalancers",
                        "metric": "microsoft.network/loadbalancers--SnatConnectionCount",
                        "aggregation": 1
                      },
                      {
                        "namespace": "microsoft.network/loadbalancers",
                        "metric": "microsoft.network/loadbalancers--SYNCount",
                        "aggregation": 1
                      },
                      {
                        "namespace": "microsoft.network/loadbalancers",
                        "metric": "microsoft.network/loadbalancers--ByteCount",
                        "aggregation": 1
                      }
                    ],
                    "title": "Load Balancer Key Metrics",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "$gen_group",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": false,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "Subscription",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "Name",
                          "formatter": 5,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true
                          }
                        },
                        {
                          "columnMatch": "microsoft.network/loadbalancers--VipAvailability",
                          "formatter": 8,
                          "formatOptions": {
                            "palette": "redGreen"
                          },
                          "numberFormat": {
                            "unit": 0,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.network/loadbalancers--VipAvailability Timeline",
                          "formatter": 10,
                          "formatOptions": {
                            "palette": "blue"
                          }
                        },
                        {
                          "columnMatch": "microsoft.network/loadbalancers--DipAvailability",
                          "formatter": 8,
                          "formatOptions": {
                            "palette": "redGreen"
                          },
                          "numberFormat": {
                            "unit": 0,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        },
                        {
                          "columnMatch": "microsoft.network/loadbalancers--DipAvailability Timeline",
                          "formatter": 10,
                          "formatOptions": {
                            "palette": "blue"
                          }
                        },
                        {
                          "columnMatch": "microsoft.network/loadbalancers--SnatConnectionCount",
                          "formatter": 1,
                          "numberFormat": {
                            "unit": 0,
                            "options": null
                          }
                        },
                        {
                          "columnMatch": "microsoft.network/loadbalancers--SnatConnectionCount Timeline",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "microsoft.network/loadbalancers--SYNCount",
                          "formatter": 1,
                          "numberFormat": {
                            "unit": 0,
                            "options": null
                          }
                        },
                        {
                          "columnMatch": "microsoft.network/loadbalancers--SYNCount Timeline",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "microsoft.network/loadbalancers--ByteCount",
                          "formatter": 1,
                          "numberFormat": {
                            "unit": 0,
                            "options": null
                          }
                        },
                        {
                          "columnMatch": "microsoft.network/loadbalancers--ByteCount Timeline",
                          "formatter": 5
                        }
                      ],
                      "rowLimit": 10000,
                      "hierarchySettings": {
                        "treeType": 1,
                        "groupBy": [
                          "Subscription"
                        ],
                        "expandTopLevel": true,
                        "finalBy": "Name"
                      },
                      "sortBy": [
                        {
                          "itemKey": "$gen_heatmap_microsoft.network/loadbalancers--VipAvailability_3",
                          "sortOrder": 2
                        }
                      ],
                      "labelSettings": [
                        {
                          "columnId": "Name",
                          "label": "Load Balancer Name"
                        },
                        {
                          "columnId": "microsoft.network/loadbalancers--VipAvailability",
                          "label": "Data Path Availability (Average)"
                        },
                        {
                          "columnId": "microsoft.network/loadbalancers--VipAvailability Timeline",
                          "label": "Data Path Availability (Average) Timeline"
                        },
                        {
                          "columnId": "microsoft.network/loadbalancers--DipAvailability",
                          "label": "Health Probe Status (Average)"
                        },
                        {
                          "columnId": "microsoft.network/loadbalancers--DipAvailability Timeline",
                          "label": "Health Probe Status (Average) Timeline"
                        },
                        {
                          "columnId": "microsoft.network/loadbalancers--SnatConnectionCount",
                          "label": "SNAT Connection Count (Sum)"
                        },
                        {
                          "columnId": "microsoft.network/loadbalancers--SnatConnectionCount Timeline",
                          "label": "SNAT Connection Count (Sum) Timeline"
                        },
                        {
                          "columnId": "microsoft.network/loadbalancers--SYNCount",
                          "label": "SYN Count (Sum)"
                        },
                        {
                          "columnId": "microsoft.network/loadbalancers--SYNCount Timeline",
                          "label": "SYN Count (Sum) Timeline"
                        },
                        {
                          "columnId": "microsoft.network/loadbalancers--ByteCount",
                          "label": "Byte Count (Sum)"
                        },
                        {
                          "columnId": "microsoft.network/loadbalancers--ByteCount Timeline",
                          "label": "Byte Count (Sum) Timeline"
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "$gen_heatmap_microsoft.network/loadbalancers--VipAvailability_3",
                        "sortOrder": 2
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "stndlb"
                    },
                    {
                      "parameterName": "stndlb",
                      "comparison": "isEqualTo",
                      "value": "stndlbmonitor"
                    }
                  ],
                  "showPin": true,
                  "name": "metric - Load Balancer Metrics"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook28b53b94-1ff2-4a06-a28d-9ec03e8e29e5",
                    "version": "MetricsItem/2.0",
                    "size": 3,
                    "chartType": 2,
                    "resourceType": "microsoft.network/loadbalancers",
                    "metricScope": 0,
                    "resourceParameter": "Resources",
                    "resourceIds": [
                      "{Resources}"
                    ],
                    "timeContextFromParameter": "TimeRange",
                    "timeContext": {
                      "durationMs": 900000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.network/loadbalancers",
                        "metric": "microsoft.network/loadbalancers--DipAvailability",
                        "aggregation": 3,
                        "splitBy": null
                      }
                    ],
                    "title": "Backend health probe by Backend IP",
                    "resourceLimit": 10000,
                    "gridSettings": {
                      "rowLimit": 10000
                    }
                  },
                  "customWidth": "100",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "stndlb"
                    },
                    {
                      "parameterName": "stndlb",
                      "comparison": "isEqualTo",
                      "value": "stndlbmonitor"
                    }
                  ],
                  "showPin": true,
                  "name": "metric - LB - Backend health probe by Backend IP"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "recoveryservicesresources \r\n|wheretype==\"microsoft.recoveryservices/vaults/backupjobs\" \r\n| extend BackupState = properties.status\r\n| extend BackupState = iif(isempty(BackupState), \"Backup State Unknown\", (BackupState))\r\n| summarize count() by BackupState",
                    "size": 2,
                    "title": "VM Backup Status Overview",
                    "noDataMessage": "Something went wrong!",
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "visualization": "piechart",
                    "chartSettings": {
                      "seriesLabelSettings": [
                        {
                          "seriesName": "Completed Backup",
                          "label": "VM's with Completed Backup",
                          "comment": ""
                        },
                        {
                          "seriesName": "Failed Backup",
                          "label": "VM's with Failed Backup"
                        }
                      ]
                    }
                  },
                  "customWidth": "70",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "backup"
                    },
                    {
                      "parameterName": "backup",
                      "comparison": "isEqualTo",
                      "value": "bckoverview"
                    }
                  ],
                  "name": "query - VM Backup Status"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "recoveryservicesresources \r\n|wheretype==\"microsoft.recoveryservices/vaults/backupjobs\" \r\n| where properties.status=='Failed'\r\n|projectname=tostring(properties.entityFriendlyName),properties.status,startTime1=properties.startTime,properties.endTime,properties.duration, properties.dataSourceLocation,properties.dataSourceType, tostring(properties.errorDetails.recommendations), resourceGroup\r\n|sortbyname,resourceGroup, todatetime(startTime1)asc",
                    "size": 2,
                    "title": "VM Last Backup Status",
                    "noDataMessage": "Oops! something went wrong",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "properties_status",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "==",
                                "thresholdValue": "Failed",
                                "representation": "3",
                                "text": "Backup Failed"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "success",
                                "text": "{0}{1}"
                              }
                            ]
                          }
                        },
                        {
                          "columnMatch": "backupMgmtType",
                          "formatter": 5
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true
                    }
                  },
                  "customWidth": "100",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "backup"
                    },
                    {
                      "parameterName": "backup",
                      "comparison": "isEqualTo",
                      "value": "bcklist"
                    }
                  ],
                  "name": "query - List of VM's backup status"
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "8eb5861c-f5db-478f-8182-fd23f07232c0",
                        "cellValue": "appgw",
                        "linkTarget": "parameter",
                        "linkLabel": "Overview",
                        "subTarget": "overview",
                        "style": "link"
                      },
                      {
                        "id": "83ddb856-4bf8-4947-a55d-d9b5f0c4aa81",
                        "cellValue": "appgw",
                        "linkTarget": "parameter",
                        "linkLabel": "Monitor",
                        "subTarget": "appgwmonitor",
                        "style": "link"
                      },
                      {
                        "id": "72ad485a-34ae-49a9-b96f-cd4043f2b5c8",
                        "cellValue": "appgw",
                        "linkTarget": "parameter",
                        "linkLabel": "Parameter Checks",
                        "subTarget": "appgwparameters",
                        "style": "link"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    }
                  ],
                  "name": "links - Application Gateway Overview"
                },
                {
                  "type": 9,
                  "content": {
                    "version": "KqlParameterItem/1.0",
                    "crossComponentResources": [
                      "{ApplicationGateway}"
                    ],
                    "parameters": [
                      {
                        "id": "892cfb5f-6614-4238-816c-03b47ad6a8ba",
                        "version": "KqlParameterItem/1.0",
                        "name": "ApplicationGateway",
                        "label": "Application Gateway",
                        "type": 5,
                        "isRequired": true,
                        "multiSelect": true,
                        "quote": "'",
                        "delimiter": ",",
                        "query": "resources\r\n| where type == \"microsoft.network/applicationgateways\"\r\n| order by name asc\r\n| extend Rank = row_number()\r\n| project value = id, label = id, selected = Rank <= 5",
                        "crossComponentResources": [
                          "{Subscriptions}"
                        ],
                        "typeSettings": {
                          "resourceTypeFilter": {
                            "microsoft.management/managementgroups/providers/privatelinkassociations": true,
                            "microsoft.network/applicationgateways": true
                          },
                          "additionalResourceOptions": [
                            "value::1",
                            "value::all"
                          ],
                          "showDefault": false
                        },
                        "timeContext": {
                          "durationMs": 86400000
                        },
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources"
                      },
                      {
                        "id": "8e067db8-a2c2-4ff5-b9c7-6338c20a6811",
                        "version": "KqlParameterItem/1.0",
                        "name": "TimeRange",
                        "type": 4,
                        "isRequired": true,
                        "value": {
                          "durationMs": 1209600000
                        },
                        "typeSettings": {
                          "selectableValues": [
                            {
                              "durationMs": 300000
                            },
                            {
                              "durationMs": 900000
                            },
                            {
                              "durationMs": 1800000
                            },
                            {
                              "durationMs": 3600000
                            },
                            {
                              "durationMs": 14400000
                            },
                            {
                              "durationMs": 43200000
                            },
                            {
                              "durationMs": 86400000
                            },
                            {
                              "durationMs": 172800000
                            },
                            {
                              "durationMs": 259200000
                            },
                            {
                              "durationMs": 604800000
                            },
                            {
                              "durationMs": 1209600000
                            },
                            {
                              "durationMs": 2419200000
                            },
                            {
                              "durationMs": 2592000000
                            },
                            {
                              "durationMs": 5184000000
                            },
                            {
                              "durationMs": 7776000000
                            }
                          ],
                          "allowCustom": true
                        },
                        "timeContext": {
                          "durationMs": 86400000
                        }
                      },
                      {
                        "id": "7b97c690-e2da-4943-a0f1-9e2df1c32858",
                        "version": "KqlParameterItem/1.0",
                        "name": "Message",
                        "type": 1,
                        "query": "resources\r\n| where type == \"microsoft.network/applicationgateways\"\r\n| summarize Selected = countif(id in ({Resources:value})), Total = count()\r\n| extend Selected = iff(Selected > 200, 200, Selected)\r\n| project Message = strcat('# ', Selected, ' / ', Total)",
                        "crossComponentResources": [
                          "{Subscriptions}"
                        ],
                        "isHiddenWhenLocked": true,
                        "timeContext": {
                          "durationMs": 86400000
                        },
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources"
                      },
                      {
                        "id": "ed16f298-5afe-4ac3-b233-4dbffde07f61",
                        "version": "KqlParameterItem/1.0",
                        "name": "ResourceName",
                        "type": 1,
                        "isRequired": true,
                        "isHiddenWhenLocked": true,
                        "criteriaData": [
                          {
                            "criteriaContext": {
                              "operator": "Default",
                              "resultValType": "static",
                              "resultVal": "Application Gateway"
                            }
                          }
                        ],
                        "timeContext": {
                          "durationMs": 86400000
                        }
                      },
                      {
                        "id": "543e484a-7b4a-4a51-999b-046942f0033c",
                        "version": "KqlParameterItem/1.0",
                        "name": "sku",
                        "type": 1,
                        "query": "resources\r\n| where type =~ \"microsoft.network/applicationgateways\"\r\n| extend tier = parse_json(properties).sku.tier\r\n| project SKU = iff(tier contains \"v2\", \"v2\", \"v1\")",
                        "crossComponentResources": [
                          "{ApplicationGateway}"
                        ],
                        "isHiddenWhenLocked": true,
                        "timeContext": {
                          "durationMs": 86400000
                        },
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources"
                      }
                    ],
                    "style": "above",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwmonitor"
                    }
                  ],
                  "name": "parameters - App GW"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type == \"microsoft.network/applicationgateways\"\r\n| extend sku = tostring(properties.sku.name)\r\n| project subscriptionId\r\n, id\r\n, AppGWName=name\r\n, resourceGroup\r\n, sku_tier = tostring(properties.sku.tier)\r\n, sku_capacity = tostring(properties.sku.capacity)\r\n, location",
                    "size": 0,
                    "title": "Application Gateway Overview",
                    "showExportToExcel": true,
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "subscriptionId",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "id",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "AppGWName",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "sku_capacity",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "is Empty",
                                "representation": "trendup",
                                "text": "Auto"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "right",
                                "text": "{0} (Manual)"
                              }
                            ]
                          }
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "id",
                          "label": "App Gateway Name"
                        },
                        {
                          "columnId": "resourceGroup",
                          "label": "Resource Group"
                        },
                        {
                          "columnId": "sku_tier",
                          "label": "SKU"
                        },
                        {
                          "columnId": "sku_capacity",
                          "label": "Capacity Mode"
                        },
                        {
                          "columnId": "location",
                          "label": "Azure Location"
                        }
                      ]
                    },
                    "sortBy": []
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "overview"
                    }
                  ],
                  "showPin": true,
                  "name": "query - Application Gateway Overview"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbookda4dcfe0-e85b-4914-ad14-d6ac507dec91",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/applicationgateways",
                    "metricScope": 0,
                    "resourceParameter": "ApplicationGateway",
                    "resourceIds": [
                      "{ApplicationGateway}"
                    ],
                    "timeContextFromParameter": "TimeRange",
                    "timeContext": {
                      "durationMs": 1209600000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.network/applicationgateways",
                        "metric": "microsoft.network/applicationgateways--CurrentConnections",
                        "aggregation": 1,
                        "splitBy": null
                      }
                    ],
                    "title": " Current Connections",
                    "showCreateAlertRule": true,
                    "gridSettings": {
                      "rowLimit": 10000
                    }
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwmonitor"
                    }
                  ],
                  "name": "metric - Current Connections"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbookc8b99f6d-0d3b-414e-8c9f-74e1ba552c90",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/applicationgateways",
                    "metricScope": 0,
                    "resourceParameter": "ApplicationGateway",
                    "resourceIds": [
                      "{ApplicationGateway}"
                    ],
                    "timeContextFromParameter": "TimeRange",
                    "timeContext": {
                      "durationMs": 1209600000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.network/applicationgateways",
                        "metric": "microsoft.network/applicationgateways--NewConnectionsPerSecond",
                        "aggregation": 4,
                        "splitBy": null
                      }
                    ],
                    "title": "Avg. New  Connections per second",
                    "gridSettings": {
                      "rowLimit": 10000
                    }
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwmonitor"
                    }
                  ],
                  "name": "metric - Avg New Connection Every second"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbookc9d71de0-846b-44b8-b7cd-57b5f5d1c973",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/applicationgateways",
                    "metricScope": 0,
                    "resourceParameter": "ApplicationGateway",
                    "resourceIds": [
                      "{ApplicationGateway}"
                    ],
                    "timeContextFromParameter": "TimeRange",
                    "timeContext": {
                      "durationMs": 1209600000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.network/applicationgateways",
                        "metric": "microsoft.network/applicationgateways--TotalRequests",
                        "aggregation": 1,
                        "splitBy": null
                      }
                    ],
                    "title": "Total Requests",
                    "gridSettings": {
                      "rowLimit": 10000
                    },
                    "exportToExcelOptions": "all"
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwmonitor"
                    }
                  ],
                  "name": "metric - Total Requests"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook6eede7d4-47b4-44d2-a257-4fc172dcae95",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/applicationgateways",
                    "metricScope": 0,
                    "resourceParameter": "ApplicationGateway",
                    "resourceIds": [
                      "{ApplicationGateway}"
                    ],
                    "timeContextFromParameter": "TimeRange",
                    "timeContext": {
                      "durationMs": 1209600000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.network/applicationgateways",
                        "metric": "microsoft.network/applicationgateways--Throughput",
                        "aggregation": 4,
                        "splitBy": null
                      }
                    ],
                    "title": "Throughput",
                    "gridSettings": {
                      "rowLimit": 10000
                    }
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwmonitor"
                    }
                  ],
                  "name": "metric - Throughput"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbookad3303bb-0b23-4743-9915-ff4f38bcb026",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/applicationgateways",
                    "metricScope": 0,
                    "resourceParameter": "ApplicationGateway",
                    "resourceIds": [
                      "{ApplicationGateway}"
                    ],
                    "timeContextFromParameter": "TimeRange",
                    "timeContext": {
                      "durationMs": 1209600000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.network/applicationgateways",
                        "metric": "microsoft.network/applicationgateways--ComputeUnits",
                        "aggregation": 4,
                        "splitBy": null
                      }
                    ],
                    "title": "Avg Current Compute Units",
                    "gridSettings": {
                      "rowLimit": 10000
                    }
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwmonitor"
                    },
                    {
                      "parameterName": "sku",
                      "comparison": "isEqualTo",
                      "value": "v2"
                    }
                  ],
                  "name": "metric - Current Compute Units"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbookd5e563c6-28cf-409d-a42d-d27c2e34ce74",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/applicationgateways",
                    "metricScope": 0,
                    "resourceParameter": "ApplicationGateway",
                    "resourceIds": [
                      "{ApplicationGateway}"
                    ],
                    "timeContextFromParameter": "TimeRange",
                    "timeContext": {
                      "durationMs": 1209600000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.network/applicationgateways",
                        "metric": "microsoft.network/applicationgateways--HealthyHostCount",
                        "aggregation": 4,
                        "splitBy": null
                      }
                    ],
                    "title": "Avg Health Host count",
                    "gridSettings": {
                      "rowLimit": 10000
                    },
                    "exportToExcelOptions": "all"
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwmonitor"
                    },
                    {
                      "parameterName": "sku",
                      "comparison": "isEqualTo",
                      "value": "v2"
                    }
                  ],
                  "name": "metric - Healthy Host Counts"
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "nav",
                    "links": [
                      {
                        "id": "192395b7-ec14-4f8d-abb9-42ebbbdb5a3e",
                        "cellValue": "appgwparameters",
                        "linkTarget": "parameter",
                        "linkLabel": "frontendIPConfigurations",
                        "subTarget": "frontendIPConfigurations",
                        "style": "link"
                      },
                      {
                        "id": "a3ebb676-0b6b-4462-bb13-e7e901cfd8cd",
                        "cellValue": "appgwparameters",
                        "linkTarget": "parameter",
                        "linkLabel": "httpListeners",
                        "subTarget": "httpListeners",
                        "style": "link"
                      },
                      {
                        "id": "073d180d-2e45-4884-be9b-740cb7c00f49",
                        "cellValue": "appgwparameters",
                        "linkTarget": "parameter",
                        "linkLabel": "backendHttpSettingsCollection",
                        "subTarget": "backendHttpSettingsCollection",
                        "style": "link"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwparameters"
                    }
                  ],
                  "name": "links - AppGW Parameter Overview"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type == \"microsoft.network/applicationgateways\"\r\n| extend sku = tostring(properties.sku.name)\r\n| mv-expand frontendIPConfigurations = properties.frontendIPConfigurations\r\n| project subscriptionId\r\n, resourceGroup\r\n, AppGWName=name\r\n, location\r\n, name = tostring(frontendIPConfigurations.name)\r\n, privateIPAllocationMethod = tostring(frontendIPConfigurations.properties.privateIPAllocationMethod)\r\n// publicIPAddress = tostring(frontendIPConfigurations.properties.publicIPAddress)",
                    "size": 0,
                    "title": "frontendIPConfigurations",
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "subscriptionId",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "resourceGroup",
                          "formatter": 5
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwparameters"
                    },
                    {
                      "parameterName": "appgwparameters",
                      "comparison": "isEqualTo",
                      "value": "frontendIPConfigurations"
                    }
                  ],
                  "name": "query - frontendIPConfigurations",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type == \"microsoft.network/applicationgateways\"\r\n| extend sku = tostring(properties.sku.name)\r\n| mv-expand httpListeners = properties.httpListeners\r\n| project subscriptionId\r\n, AppGWName=name\r\n, resourceGroup\r\n, name = tostring(httpListeners.name)\r\n, protocol = tostring(httpListeners.properties.protocol)\r\n, requireServerNameIndication = tostring(httpListeners.properties.requireServerNameIndication)",
                    "size": 0,
                    "title": "httpListeners",
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "subscriptionId",
                          "formatter": 5
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwparameters"
                    },
                    {
                      "parameterName": "appgwparameters",
                      "comparison": "isEqualTo",
                      "value": "httpListeners"
                    }
                  ],
                  "name": "query - httpListeners parameters",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type == \"microsoft.network/applicationgateways\"\r\n| extend sku = tostring(properties.sku.name)\r\n| mv-expand backendHttpSettingsCollection = properties.backendHttpSettingsCollection\r\n| project subscriptionId\r\n, AppGWName=name\r\n, resourceGroup\r\n, name = tostring(backendHttpSettingsCollection.name)\r\n, provisioningState= tostring(backendHttpSettingsCollection.properties.provisioningState)\r\n, protocol = tostring(backendHttpSettingsCollection.properties.protocol)\r\n, port = tostring(backendHttpSettingsCollection.properties.port)\r\n, pickHostNameFromBackendAddress = tostring(backendHttpSettingsCollection.properties.pickHostNameFromBackendAddress)\r\n, cookieBasedAffinity = tostring(backendHttpSettingsCollection.properties.cookieBasedAffinity)\r\n, requestTimeout = tostring(backendHttpSettingsCollection.properties.requestTimeout)",
                    "size": 0,
                    "title": "backendHttpSettingsCollection",
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "subscriptionId",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "protocol",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "==",
                                "thresholdValue": "Https",
                                "representation": "Resolved",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "==",
                                "thresholdValue": "Http",
                                "representation": "2",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "success",
                                "text": "{0}{1}"
                              }
                            ]
                          }
                        },
                        {
                          "columnMatch": "requestTimeout",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "==",
                                "thresholdValue": "30",
                                "representation": "Resolved",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "!=",
                                "thresholdValue": "30",
                                "representation": "2",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "success",
                                "text": "{0}{1}"
                              }
                            ]
                          }
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "appgw"
                    },
                    {
                      "parameterName": "appgw",
                      "comparison": "isEqualTo",
                      "value": "appgwparameters"
                    },
                    {
                      "parameterName": "appgwparameters",
                      "comparison": "isEqualTo",
                      "value": "backendHttpSettingsCollection"
                    }
                  ],
                  "name": "query - backendHttpSettingsCollection"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resourcechanges\r\n| extend props = todynamic(properties)\r\n| extend change_date = todatetime(props.changeAttributes.timestamp)\r\n| where props.targetResourceType contains \"virtualmachines\"\r\n| extend state_info = props.changes['properties.extended.instanceView.powerState.code']\r\n| where isnull(state_info) == false\r\n| extend last_state = state_info.newValue\r\n| extend previous_state = state_info.previousValue\r\n| summarize arg_max(change_date,*) by tostring(props.targetResourceId)\r\n| where last_state == \"PowerState/deallocated\"\r\n| project id1=props.targetResourceId, VMName=tostring(split(props.targetResourceId,\"/\",8)[0]), state_info=(split(last_state,\"/\",1)[0]), previous_state, last_state, change_date, location, resourceGroup",
                    "size": 2,
                    "title": "VM's transitioned into deallocated status in last 14 days",
                    "noDataMessage": "No VM found!",
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "id1",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "linkIsContextBlade": true,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "VMName",
                          "formatter": 5
                        },
                        {
                          "columnMatch": "name",
                          "formatter": 5
                        }
                      ],
                      "rowLimit": 10000,
                      "filter": true,
                      "labelSettings": [
                        {
                          "columnId": "id1",
                          "label": "VM Name"
                        },
                        {
                          "columnId": "location",
                          "label": "Azure Region"
                        },
                        {
                          "columnId": "resourceGroup",
                          "label": "Resource Group"
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "SelectedTab",
                      "comparison": "isEqualTo",
                      "value": "configchecks"
                    },
                    {
                      "parameterName": "configchecks",
                      "comparison": "isEqualTo",
                      "value": "deallocated"
                    }
                  ],
                  "name": "query - VM's in deallocated status",
                  "styleSettings": {
                    "showBorder": true
                  }
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "SelectedTab",
              "comparison": "isEqualTo",
              "value": "configchecks"
            },
            "name": "group - Configuration Checks"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Report_check",
        "comparison": "isEqualTo",
        "value": "No"
      },
      "name": "group - SAP Overview"
    }
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}