{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "8a38505e-bc37-434f-aea7-98cb928cfca7",
                  "version": "KqlParameterItem/1.0",
                  "name": "param_provider_type",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "value": "Oracle"
                },
                {
                  "id": "4c92fb1b-8038-44c2-8597-e80fd1e84a2a",
                  "version": "KqlParameterItem/1.0",
                  "name": "param_ams_resource",
                  "type": 5,
                  "isHiddenWhenLocked": true,
                  "typeSettings": {
                    "resourceTypeFilter": {
                      "microsoft.workloads/monitors": true,
                      "microsoft.hanaonazure/sapmonitors": true
                    },
                    "additionalResourceOptions": [
                      "value::1"
                    ],
                    "showDefault": false
                  },
                  "defaultValue": "value::1"
                },
                {
                  "id": "8389bd71-dbe5-45c4-8e89-4c262b1a1af7",
                  "version": "KqlParameterItem/1.0",
                  "name": "param_provider_instance",
                  "type": 1,
                  "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"{param_ams_resource}/providerInstances/\",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2022-11-01-preview\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value[?(@.properties.provisioningState == 'Succeeded' && @.properties.providerSettings.providerType == '{param_provider_type}')].name\",\"columns\":[]}}]}",
                  "isHiddenWhenLocked": true,
                  "queryType": 12
                },
                {
                  "id": "0e60d97d-0281-4b5c-beb5-13d6515f38c5",
                  "version": "KqlParameterItem/1.0",
                  "name": "provider_table_exists",
                  "type": 1,
                  "query": "let hasNonEmptyTable = (T:string) \r\n{ \r\ntoscalar( union isfuzzy=true ( table(T) | count as Count ), (print Count=0) | summarize sum(Count) ) > 0\r\n};\r\nlet TableName = 'ORA_SystemAvailability_CL';\r\nprint present=iif(hasNonEmptyTable(TableName), \"1\", \"0\")",
                  "isHiddenWhenLocked": true,
                  "queryType": 0,
                  "resourceType": "microsoft.operationalinsights/workspaces"
                },
                {
                  "id": "220d856b-31a6-4caa-9dc4-60c1e7733d5f",
                  "version": "KqlParameterItem/1.0",
                  "name": "param_check_tables",
                  "type": 1,
                  "query": "let checktable = (tb:string, columnName:string)\r\n{\r\n// 0 = no error\r\n// 1 = table does not exist\r\n// 2 = table exists, but column v1 does not (or) column v1 exists but no data in the table (need to wait)\r\nlet dummy = \"unmÃ¶glicher-wert!\";\r\nlet MissingTable = view () { print miss = 1, columnV1 = dummy, records = -1 };\r\nlet checkRecords =\r\n  union\r\n    isfuzzy=true MissingTable,\r\n    (table(tb)\r\n      | summarize records = count()\r\n    )\r\n  | project records\r\n  | top 1 by records desc\r\n;\r\nlet checkTableExists =\r\n  union\r\n    isfuzzy=true MissingTable,\r\n    (table(tb)\r\n      | count\r\n      | extend miss = 0\r\n    )\r\n  | project miss\r\n  | limit 2\r\n  | top 1 by miss asc\r\n;\r\nlet checkColumnExists =\r\n  union\r\n    isfuzzy=true MissingTable,\r\n    (table(tb)\r\n      | extend miss = 0\r\n      | extend columnV1 = column_ifexists(columnName, dummy)\r\n    )\r\n  | project miss, columnV1\r\n  | limit 2\r\n  | top 1 by miss asc\r\n ;\r\nlet tableExists = toscalar(checkTableExists | summarize max(miss) != 1);\r\nlet columnV1Exists = toscalar(checkColumnExists | summarize max(columnV1) != dummy);\r\nlet tableRecords = toscalar(checkRecords | summarize max(records));\r\nlet x = iif(tableExists, iif(columnV1Exists, iif(tableRecords > 0, \"0\", \"2\"), \"2\"), \"1\");\r\ntoscalar(x)\r\n};\r\nlet locksAndBlocks = checktable(\"DB2_LocksAndBlocks_CL\", \"sapsid_s\");\r\n\r\nprint strcat('DB2_LocksAndBlocks_CL:',locksAndBlocks)",
                  "isHiddenWhenLocked": true,
                  "queryType": 0,
                  "resourceType": "microsoft.operationalinsights/workspaces"
                },
                {
                  "id": "dbcc133e-be14-41d5-ad46-27ac24d31526",
                  "version": "KqlParameterItem/1.0",
                  "name": "oracleProviderExist",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "leftOperand": "param_provider_instance",
                        "operator": "is Empty",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "false"
                      }
                    },
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "resultValType": "static",
                        "resultVal": "true"
                      }
                    }
                  ]
                }
              ],
              "style": "above",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "customWidth": "100",
            "name": "Parameters to check active provider"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "### No active Oracle provider found.\r\nCreate one or more Oracle providers to get started.",
                    "style": "warning"
                  },
                  "name": "Warning for no active provider"
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "list",
                    "links": [
                      {
                        "id": "17108865-b53f-48c3-830e-58f5a6510e4a",
                        "cellValue": "{param_ams_resource}",
                        "linkTarget": "Resource",
                        "linkLabel": "Create Provider",
                        "subTarget": "monitor_provider",
                        "preText": "",
                        "style": "primary",
                        "bladeOpenContext": {
                          "bladeName": "ManageProviderv2.ReactView",
                          "extensionName": "Microsoft_Azure_WorkloadMonitor",
                          "bladeParameters": [
                            {
                              "name": "resourceId",
                              "source": "parameter",
                              "value": "param_ams_resource"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "name": "links - 1"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "oracleProviderExist",
              "comparison": "isEqualTo",
              "value": "false"
            },
            "name": "No active provider grp"
          },
          {
            "type": 1,
            "content": {
              "json": "If the provider is recently added, it may take up to 15 minutes for the initial telemetry information to be available for review. Else, check if system is down, or health of AMS system is degraded.",
              "style": "warning"
            },
            "conditionalVisibilities": [
              {
                "parameterName": "oracleProviderExist",
                "comparison": "isEqualTo",
                "value": "true"
              },
              {
                "parameterName": "provider_table_exists",
                "comparison": "isEqualTo",
                "value": "0"
              }
            ],
            "name": "No data exists warning"
          },
          {
            "type": 1,
            "content": {
              "json": "The workbook is loading. This can take up to 2 minutes.",
              "style": "info"
            },
            "conditionalVisibility": {
              "parameterName": "oracleProviderExist",
              "comparison": "isEqualTo"
            },
            "name": "WorkbookLoadingGrp"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 9,
                  "content": {
                    "version": "KqlParameterItem/1.0",
                    "parameters": [
                      {
                        "id": "ed8e8eec-f9c8-461d-b76f-d796fd071ccc",
                        "version": "KqlParameterItem/1.0",
                        "name": "TimeFrame",
                        "label": "Timeframe",
                        "type": 4,
                        "isRequired": true,
                        "typeSettings": {
                          "selectableValues": [
                            {
                              "durationMs": 300000
                            },
                            {
                              "durationMs": 900000
                            },
                            {
                              "durationMs": 1800000
                            },
                            {
                              "durationMs": 3600000
                            },
                            {
                              "durationMs": 14400000
                            },
                            {
                              "durationMs": 43200000
                            },
                            {
                              "durationMs": 86400000
                            },
                            {
                              "durationMs": 172800000
                            },
                            {
                              "durationMs": 259200000
                            },
                            {
                              "durationMs": 604800000
                            },
                            {
                              "durationMs": 1209600000
                            },
                            {
                              "durationMs": 2419200000
                            },
                            {
                              "durationMs": 2592000000
                            },
                            {
                              "durationMs": 5184000000
                            },
                            {
                              "durationMs": 7776000000
                            }
                          ],
                          "allowCustom": false
                        },
                        "value": {
                          "durationMs": 5184000000
                        }
                      },
                      {
                        "id": "2651447a-4547-4666-ba87-fd8f523df77f",
                        "version": "KqlParameterItem/1.0",
                        "name": "Provider",
                        "type": 2,
                        "isRequired": true,
                        "query": "ORA_SystemAvailability_CL\r\n| where TimeGenerated {TimeFrame}\r\n| project PROVIDER_INSTANCE_s\r\n| distinct PROVIDER_INSTANCE_s\r\n| serialize RANK = row_number()\r\n| project value = PROVIDER_INSTANCE_s, label = PROVIDER_INSTANCE_s, selected = iif(RANK == 1, true, false)\r\n| order by value\r\n\r\n",
                        "typeSettings": {
                          "additionalResourceOptions": [],
                          "showDefault": false
                        },
                        "queryType": 0,
                        "resourceType": "microsoft.operationalinsights/workspaces"
                      },
                      {
                        "id": "bd694b5e-8df6-4512-8838-58953bf4fb73",
                        "version": "KqlParameterItem/1.0",
                        "name": "OracleVersion",
                        "type": 1,
                        "query": "let LastOne = ORA_SystemInformation_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| summarize TimeGenerated = max(TimeGenerated)\r\n| project TimeGenerated;\r\n\r\nORA_SystemInformation_CL\r\n| join kind=inner (LastOne) on TimeGenerated\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| project VERSION_s\r\n| take 1\r\n",
                        "isHiddenWhenLocked": true,
                        "queryType": 0,
                        "resourceType": "microsoft.operationalinsights/workspaces"
                      },
                      {
                        "id": "16cbe8de-c86c-4d14-ada1-a8e398662d60",
                        "version": "KqlParameterItem/1.0",
                        "name": "OracleEdition",
                        "type": 1,
                        "query": "let LastOne = ORA_SystemInformation_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| summarize TimeGenerated = max(TimeGenerated)\r\n| project TimeGenerated;\r\n\r\nORA_SystemInformation_CL\r\n| join kind=inner (LastOne) on TimeGenerated\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| project tostring(EDITION_s)\r\n| take 1\r\n",
                        "isHiddenWhenLocked": true,
                        "queryType": 0,
                        "resourceType": "microsoft.operationalinsights/workspaces"
                      },
                      {
                        "id": "34e0c89d-2a9c-477f-9958-14f6f8314f4a",
                        "version": "KqlParameterItem/1.0",
                        "name": "OracleSID",
                        "type": 1,
                        "query": "let LastOne = ORA_InstanceOverview_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| summarize TimeGenerated = max(TimeGenerated)\r\n| project TimeGenerated;\r\n\r\nORA_InstanceOverview_CL\r\n| join kind=inner (LastOne) on TimeGenerated\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| project INSTANCE_NAME_s\r\n| take 1\r\n",
                        "isHiddenWhenLocked": true,
                        "queryType": 0,
                        "resourceType": "microsoft.operationalinsights/workspaces"
                      },
                      {
                        "id": "69140756-4a30-4acf-b42f-e09382ab9c03",
                        "version": "KqlParameterItem/1.0",
                        "name": "SAPSid",
                        "type": 1,
                        "query": "let LastOne = ORA_InstanceOverview_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| summarize TimeGenerated = max(TimeGenerated)\r\n| project TimeGenerated;\r\n\r\nORA_InstanceOverview_CL\r\n| join kind=inner (LastOne) on TimeGenerated\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| project sapsid_s\r\n| take 1\r\n",
                        "isHiddenWhenLocked": true,
                        "queryType": 0,
                        "resourceType": "microsoft.operationalinsights/workspaces"
                      },
                      {
                        "id": "cc4f434c-7ec0-4427-bfb9-81503f8ef55a",
                        "version": "KqlParameterItem/1.0",
                        "name": "OsPlatform",
                        "type": 1,
                        "query": "let LastOne = ORA_DBOverview_CL\r\n//| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| summarize TimeGenerated = max(TimeGenerated)\r\n| project TimeGenerated;\r\n\r\nORA_DBOverview_CL\r\n| join kind=inner (LastOne) on TimeGenerated\r\n//| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| project PLATFORM_NAME_s\r\n| take 1",
                        "isHiddenWhenLocked": true,
                        "queryType": 0,
                        "resourceType": "microsoft.operationalinsights/workspaces"
                      }
                    ],
                    "style": "above",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces"
                  },
                  "customWidth": "25",
                  "name": "ProviderInstances"
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "list",
                    "links": [
                      {
                        "id": "81b770f0-c654-4684-9894-482dc74a192e",
                        "linkTarget": "WorkbookTemplate",
                        "linkLabel": "Alerts",
                        "style": "primary",
                        "workbookContext": {
                          "componentIdSource": "workbook",
                          "resourceIdsSource": "workbook",
                          "templateIdSource": "static",
                          "templateId": "Community-Workbooks/SapMonitor2.0/Alerts/Alerts",
                          "typeSource": "workbook",
                          "gallerySource": "workbook",
                          "locationSource": "default",
                          "passSpecificParams": true,
                          "templateParameters": [
                            {
                              "name": "AlertTemplates",
                              "source": "parameter",
                              "value": "param_alert_template"
                            },
                            {
                              "name": "ProviderType",
                              "source": "parameter",
                              "value": "param_provider_type"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "customWidth": "25",
                  "conditionalVisibility": {
                    "parameterName": "Visible",
                    "comparison": "isEqualTo",
                    "value": "true"
                  },
                  "name": "AlertsButton"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "## Azure Monitor for SAP solutions on Oracle Database\n---\n\n<b style=\"color:DodgerBlue;\">Oracle Instance:</b> {OracleSID} </br>\n<b style=\"color:DodgerBlue;\">Oracle Version:</b> {OracleVersion} Edition {OracleEdition} </br>\n<b style=\"color:DodgerBlue;\">SAP Instance:</b> {SAPSid} </br>\n<b style=\"color:DodgerBlue;\">OS Platform:</b> {OsPlatform}\n"
                  },
                  "customWidth": "50",
                  "name": "text - 2"
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "565677a0-83de-4de4-a45c-a94be97172fb",
                        "cellValue": "selectedTab",
                        "linkTarget": "parameter",
                        "linkLabel": "Landscape Overview",
                        "subTarget": "LandscapeOverview",
                        "preText": "Summary",
                        "style": "primary"
                      },
                      {
                        "id": "a093cf8e-87df-4021-8755-2042c3159379",
                        "cellValue": "selectedTab",
                        "linkTarget": "parameter",
                        "linkLabel": "System Utilization",
                        "subTarget": "systemUtil",
                        "style": "link"
                      },
                      {
                        "id": "453df8dd-1460-44ea-8aa5-4e7f3ec43e36",
                        "cellValue": "selectedTab",
                        "linkTarget": "parameter",
                        "linkLabel": "Transactions",
                        "subTarget": "transactions",
                        "style": "link"
                      },
                      {
                        "id": "e85c7bb4-ea85-495d-b78e-95480ab52927",
                        "cellValue": "selectedTab",
                        "linkTarget": "parameter",
                        "linkLabel": "System Check",
                        "subTarget": "systemCheck",
                        "style": "link"
                      },
                      {
                        "id": "8e4004dd-5920-47f7-b373-620bd095f67e",
                        "cellValue": "selectedTab",
                        "linkTarget": "parameter",
                        "linkLabel": "IO",
                        "subTarget": "IO",
                        "style": "link"
                      },
                      {
                        "id": "b4ec882b-b81d-4509-a774-d9a7b1d8102e",
                        "cellValue": "selectedTab",
                        "linkTarget": "parameter",
                        "linkLabel": "Storage",
                        "subTarget": "Storage",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "Tabs"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "ORA_InstanceOverview_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| project INSTANCE_NAME_s, DATABASE_STATUS_s, TimeGenerated ,PROVIDER_INSTANCE_s\r\n| summarize z=countif(DATABASE_STATUS_s == 'ACTIVE'), nz=countif(DATABASE_STATUS_s != 'ACTIVE')\r\n| project AvailPerc = toreal((z/(nz+z))*100)\r\n\r\n",
                          "size": 0,
                          "title": "Availability",
                          "timeContextFromParameter": "TimeFrame",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "visualization": "graph",
                          "graphSettings": {
                            "type": 2,
                            "topContent": {},
                            "centerContent": {
                              "columnMatch": "AvailPerc",
                              "formatter": 0,
                              "numberFormat": {
                                "unit": 1,
                                "options": {
                                  "style": "decimal"
                                }
                              }
                            },
                            "nodeIdField": "AvailPerc",
                            "graphOrientation": 3,
                            "showOrientationToggles": false,
                            "nodeSize": null,
                            "staticNodeSize": 100,
                            "colorSettings": {
                              "nodeColorField": "AvailPerc",
                              "type": 3,
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "100",
                                  "representation": "green"
                                },
                                {
                                  "operator": ">=",
                                  "thresholdValue": "90",
                                  "representation": "yellow"
                                },
                                {
                                  "operator": "<",
                                  "thresholdValue": "90",
                                  "representation": "redBright"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "lightBlue"
                                }
                              ]
                            },
                            "hivesMargin": 5,
                            "edgeColorSettings": null
                          }
                        },
                        "customWidth": "50",
                        "name": "%Availability"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "let baseQuery = ORA_SystemAvailability_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| extend Status = iff(ACTIVE_STATE_s == 'NORMAL', 0, 1);\r\nlet timespanCount = baseQuery \r\n| summarize RecordCount=count()\r\n| extend Interval = iff(RecordCount <= 10000, timespan(1m), timespan(1m))\r\n| extend Interval = iff(RecordCount > 10000 and RecordCount < 50000, timespan(5m), Interval)\r\n| extend Interval = iff(RecordCount >= 50000 and RecordCount < 100000, timespan(10m), Interval)\r\n| extend Interval = iff(RecordCount >= 100000 and RecordCount < 150000, timespan(15m), Interval)\r\n| extend Interval = iff(RecordCount >= 150000, timespan(30m), Interval)\r\n| project Interval;\r\nlet timespanInterval = toscalar(timespanCount);\r\nbaseQuery\r\n| summarize availability=countif(Status == 0), total=count() by bin(TimeGenerated, timespanInterval), INSTANCE_NAME_s\r\n| extend availability = round((availability / total) * 100, 2)\r\n| project-away total",
                          "size": 0,
                          "aggregation": 3,
                          "title": "Availability Status Trend",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "visualization": "linechart",
                          "tileSettings": {
                            "titleContent": {
                              "formatter": 1
                            },
                            "subtitleContent": {
                              "columnMatch": "AvailPerc",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "TGMin",
                              "formatter": 6
                            },
                            "rightContent": {
                              "columnMatch": "TGMax",
                              "formatter": 6
                            },
                            "showBorder": false
                          },
                          "graphSettings": {
                            "type": 2,
                            "topContent": {},
                            "centerContent": {
                              "columnMatch": "INSTANCE_NAME_s"
                            },
                            "bottomContent": {
                              "columnMatch": "provider"
                            },
                            "nodeIdField": "OracleStatus",
                            "graphOrientation": 3,
                            "showOrientationToggles": false,
                            "nodeSize": null,
                            "staticNodeSize": 85,
                            "colorSettings": {
                              "nodeColorField": "OracleStatus",
                              "type": 3,
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Available",
                                  "representation": "green"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Offline",
                                  "representation": "gray"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Non Functional",
                                  "representation": "yellow"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null
                                }
                              ]
                            },
                            "hivesMargin": 5,
                            "edgeColorSettings": null
                          },
                          "chartSettings": {
                            "yAxis": [
                              "availability"
                            ],
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 1,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true
                                }
                              },
                              "min": 0,
                              "max": 100
                            }
                          }
                        },
                        "customWidth": "50",
                        "showPin": true,
                        "name": "System Availability Query"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "ORA_DBOverview_CL \r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| summarize arg_max(TimeGenerated, *) by PROVIDER_INSTANCE_s\r\n| project NAME_s, CREATED_s, DATABASE_ROLE_s, LOG_MODE_s, CONTROLFILE_TYPE_s, OPEN_MODE_s\r\n",
                          "size": 3,
                          "title": "Database Overview",
                          "color": "grayBlue",
                          "showRefreshButton": true,
                          "showExportToExcel": true,
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "LOG_MODE_s",
                                "formatter": 18,
                                "formatOptions": {
                                  "thresholdsOptions": "icons",
                                  "thresholdsGrid": [
                                    {
                                      "operator": "==",
                                      "thresholdValue": "ARCHIVELOG",
                                      "representation": "success",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "NOARCHIVELOG",
                                      "representation": "4",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "MANUAL",
                                      "representation": "2",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "Default",
                                      "thresholdValue": null,
                                      "representation": "success",
                                      "text": "{0}{1}"
                                    }
                                  ]
                                }
                              },
                              {
                                "columnMatch": "OPEN_MODE_s",
                                "formatter": 18,
                                "formatOptions": {
                                  "thresholdsOptions": "colors",
                                  "thresholdsGrid": [
                                    {
                                      "operator": "==",
                                      "thresholdValue": "READ WRITE",
                                      "representation": "green",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "MOUNTED",
                                      "representation": "yellow",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "READ ONLY",
                                      "representation": "orangeDark",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "READ ONLY WITH APPLY",
                                      "representation": "redBright",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "Default",
                                      "thresholdValue": null,
                                      "representation": "lightBlue",
                                      "text": "{0}{1}"
                                    }
                                  ]
                                }
                              }
                            ],
                            "filter": true,
                            "labelSettings": [
                              {
                                "columnId": "CREATED_s",
                                "label": "Created Date"
                              },
                              {
                                "columnId": "DATABASE_ROLE_s",
                                "label": "Role"
                              },
                              {
                                "columnId": "LOG_MODE_s",
                                "label": "Log Mode"
                              },
                              {
                                "columnId": "CONTROLFILE_TYPE_s",
                                "label": "Control File Type"
                              },
                              {
                                "columnId": "OPEN_MODE_s",
                                "label": "Open Mode"
                              }
                            ]
                          },
                          "sortBy": [],
                          "chartSettings": {
                            "seriesLabelSettings": [
                              {
                                "seriesName": "Selects",
                                "color": "blue"
                              },
                              {
                                "seriesName": "DDL",
                                "color": "purple"
                              },
                              {
                                "seriesName": "DML",
                                "color": "turquoise"
                              }
                            ]
                          }
                        },
                        "showPin": true,
                        "name": "DBOverview",
                        "styleSettings": {
                          "showBorder": true
                        }
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "ORA_InstanceOverview_CL \r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| summarize arg_max(TimeGenerated, *) by PROVIDER_INSTANCE_s\r\n| project INSTANCE_NAME_s, HOST_NAME_s, INSTANCE_NUMBER_d, STARTUP_TIME_s, STATUS_s, ARCHIVER_s, DATABASE_STATUS_s, INSTANCE_ROLE_s, ACTIVE_STATE_s, DATABASE_TYPE_s\r\n",
                          "size": 0,
                          "title": "Instance Overview",
                          "color": "grayBlue",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "STATUS_s",
                                "formatter": 18,
                                "formatOptions": {
                                  "thresholdsOptions": "icons",
                                  "thresholdsGrid": [
                                    {
                                      "operator": "==",
                                      "thresholdValue": "OPEN",
                                      "representation": "success",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "MOUNTED",
                                      "representation": "2",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "CLOSED",
                                      "representation": "4",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "STARTED",
                                      "representation": "1",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "Default",
                                      "thresholdValue": null,
                                      "representation": "uninitialized",
                                      "text": "{0}{1}"
                                    }
                                  ]
                                }
                              },
                              {
                                "columnMatch": "ARCHIVER_s",
                                "formatter": 18,
                                "formatOptions": {
                                  "thresholdsOptions": "icons",
                                  "thresholdsGrid": [
                                    {
                                      "operator": "==",
                                      "thresholdValue": "STARTED",
                                      "representation": "success",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "STOPPED",
                                      "representation": "4",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "FAILED",
                                      "representation": "3",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "Default",
                                      "thresholdValue": null,
                                      "representation": "success",
                                      "text": "{0}{1}"
                                    }
                                  ]
                                }
                              },
                              {
                                "columnMatch": "DATABASE_STATUS_s",
                                "formatter": 18,
                                "formatOptions": {
                                  "thresholdsOptions": "colors",
                                  "thresholdsGrid": [
                                    {
                                      "operator": "==",
                                      "thresholdValue": "ACTIVE",
                                      "representation": "green",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "SUSPENDED",
                                      "representation": "gray",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "INSTANCE RECOVERY",
                                      "representation": "orange",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "Default",
                                      "thresholdValue": null,
                                      "representation": null,
                                      "text": "{0}{1}"
                                    }
                                  ]
                                }
                              },
                              {
                                "columnMatch": "ACTIVE_STATE_s",
                                "formatter": 18,
                                "formatOptions": {
                                  "thresholdsOptions": "icons",
                                  "thresholdsGrid": [
                                    {
                                      "operator": "==",
                                      "thresholdValue": "NORMAL",
                                      "representation": "success",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "QUIESCING",
                                      "representation": "2",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "thresholdValue": "QUIESCED",
                                      "representation": "4",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "==",
                                      "representation": "pending",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "Default",
                                      "thresholdValue": null,
                                      "representation": "success",
                                      "text": "{0}{1}"
                                    }
                                  ]
                                }
                              }
                            ],
                            "labelSettings": [
                              {
                                "columnId": "INSTANCE_NAME_s",
                                "label": "Instance"
                              },
                              {
                                "columnId": "HOST_NAME_s",
                                "label": "Host"
                              },
                              {
                                "columnId": "INSTANCE_NUMBER_d",
                                "label": "Instance Number"
                              },
                              {
                                "columnId": "STARTUP_TIME_s",
                                "label": "Startup Time"
                              },
                              {
                                "columnId": "STATUS_s",
                                "label": "Status"
                              },
                              {
                                "columnId": "ARCHIVER_s",
                                "label": "Archiver"
                              },
                              {
                                "columnId": "DATABASE_STATUS_s",
                                "label": "Database Status"
                              },
                              {
                                "columnId": "INSTANCE_ROLE_s",
                                "label": "Role"
                              },
                              {
                                "columnId": "ACTIVE_STATE_s",
                                "label": "State"
                              },
                              {
                                "columnId": "DATABASE_TYPE_s",
                                "label": "Type"
                              }
                            ]
                          },
                          "chartSettings": {
                            "seriesLabelSettings": [
                              {
                                "seriesName": "Selects",
                                "color": "blue"
                              },
                              {
                                "seriesName": "DDL",
                                "color": "purple"
                              },
                              {
                                "seriesName": "DML",
                                "color": "turquoise"
                              }
                            ]
                          }
                        },
                        "name": "InstanceOverview",
                        "styleSettings": {
                          "showBorder": true
                        }
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedTab",
                    "comparison": "isEqualTo",
                    "value": "LandscapeOverview"
                  },
                  "name": "LandscapeGroup"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "5ea0e962-b50d-4d1b-a45a-6361ce90c16a",
                              "cellValue": "SysUtilMenu",
                              "linkTarget": "parameter",
                              "linkLabel": "Memory Service Usage",
                              "subTarget": "MemoryService",
                              "preText": "Memory Service Usage",
                              "style": "link"
                            },
                            {
                              "id": "15d508e4-b300-4abe-9a1c-0be04a4fa664",
                              "cellValue": "SysUtilMenu",
                              "linkTarget": "parameter",
                              "linkLabel": "Disk Fragmentation",
                              "subTarget": "DiskFragmentation",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 9"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "let instanceOverview = ORA_InstanceOverview_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| summarize arg_max(Time_Generated_t, *) by PROVIDER_INSTANCE_s;\r\nORA_MemoryOverview_CL \r\n| where TimeGenerated {TimeFrame}\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| join kind = inner instanceOverview on PROVIDER_INSTANCE_s\r\n| project Time_Generated_t, INSTANCE_NAME_s, COMPONENT_s, SIZE_GB_d",
                                "size": 3,
                                "timeContextFromParameter": "TimeFrame",
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces",
                                "gridSettings": {
                                  "formatters": [
                                    {
                                      "columnMatch": "SIZE_GB_d",
                                      "formatter": 0,
                                      "numberFormat": {
                                        "unit": 5,
                                        "options": {
                                          "style": "decimal"
                                        }
                                      }
                                    }
                                  ],
                                  "labelSettings": [
                                    {
                                      "columnId": "Time_Generated_t",
                                      "label": "Time Generated"
                                    },
                                    {
                                      "columnId": "INSTANCE_NAME_s",
                                      "label": "Instance Name"
                                    },
                                    {
                                      "columnId": "COMPONENT_s",
                                      "label": "Component"
                                    },
                                    {
                                      "columnId": "SIZE_GB_d",
                                      "label": "Size"
                                    }
                                  ]
                                }
                              },
                              "name": "query - 0"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "SysUtilMenu",
                          "comparison": "isEqualTo",
                          "value": "MemoryService"
                        },
                        "name": "MemoryUsage"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "let instanceOverview = ORA_InstanceOverview_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| summarize arg_max(Time_Generated_t, *) by PROVIDER_INSTANCE_s;\r\nORA_DiskFragmentation_CL \r\n| where TimeGenerated {TimeFrame}\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| join kind = inner instanceOverview on PROVIDER_INSTANCE_s\r\n| project TimeGenerated, HOST_NAME_s, FILE_NAME_s, SIZE_GB_s, FREE_SPACE_GB_s, USED_PERCENT_s",
                                "size": 0,
                                "timeContextFromParameter": "TimeFrame",
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces",
                                "gridSettings": {
                                  "formatters": [
                                    {
                                      "columnMatch": "SIZE_GB_s",
                                      "formatter": 0,
                                      "numberFormat": {
                                        "unit": 5,
                                        "options": {
                                          "style": "decimal"
                                        }
                                      }
                                    },
                                    {
                                      "columnMatch": "FREE_SPACE_GB_s",
                                      "formatter": 0,
                                      "numberFormat": {
                                        "unit": 5,
                                        "options": {
                                          "style": "decimal"
                                        }
                                      }
                                    },
                                    {
                                      "columnMatch": "USED_PERCENT_s",
                                      "formatter": 4,
                                      "formatOptions": {
                                        "min": 0,
                                        "max": 100,
                                        "palette": "greenRed"
                                      },
                                      "numberFormat": {
                                        "unit": 1,
                                        "options": {
                                          "style": "decimal"
                                        }
                                      }
                                    }
                                  ],
                                  "sortBy": [
                                    {
                                      "itemKey": "$gen_bar_USED_PERCENT_s_5",
                                      "sortOrder": 2
                                    }
                                  ],
                                  "labelSettings": [
                                    {
                                      "columnId": "TimeGenerated",
                                      "label": "Time Generated"
                                    },
                                    {
                                      "columnId": "HOST_NAME_s",
                                      "label": "Host"
                                    },
                                    {
                                      "columnId": "FILE_NAME_s",
                                      "label": "File Name"
                                    },
                                    {
                                      "columnId": "SIZE_GB_s",
                                      "label": "Total Size"
                                    },
                                    {
                                      "columnId": "FREE_SPACE_GB_s",
                                      "label": "Unused Fragmentation"
                                    },
                                    {
                                      "columnId": "USED_PERCENT_s",
                                      "label": "% Used Fragmentation"
                                    }
                                  ]
                                },
                                "sortBy": [
                                  {
                                    "itemKey": "$gen_bar_USED_PERCENT_s_5",
                                    "sortOrder": 2
                                  }
                                ]
                              },
                              "name": "query - 0"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "SysUtilMenu",
                          "comparison": "isEqualTo",
                          "value": "DiskFragmentation"
                        },
                        "name": "group - 2"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedTab",
                    "comparison": "isEqualTo",
                    "value": "systemUtil"
                  },
                  "name": "SystemUtilization"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "ORA_TopWaitEvents_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| summarize arg_max(Time_Generated_t, *) by PROVIDER_INSTANCE_s\r\n| project EVENT_NAME_s, TOTAL_WAITS_d, TIME_WAITED_SECONDS_d, AVERAGE_WAIT_SECONDS_d",
                          "size": 0,
                          "timeContext": {
                            "durationMs": 86400000
                          },
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "TOTAL_WAITS_d",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "TIME_WAITED_SECONDS_d",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 24,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "AVERAGE_WAIT_SECONDS_d",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 24,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              }
                            ],
                            "labelSettings": [
                              {
                                "columnId": "EVENT_NAME_s",
                                "label": "Event Name"
                              },
                              {
                                "columnId": "TOTAL_WAITS_d",
                                "label": "Total Waits"
                              },
                              {
                                "columnId": "TIME_WAITED_SECONDS_d",
                                "label": "Waited Time",
                                "comment": "waiting time"
                              },
                              {
                                "columnId": "AVERAGE_WAIT_SECONDS_d",
                                "label": "Average Wait Time"
                              }
                            ]
                          }
                        },
                        "name": "TopWaitEvents"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedTab",
                    "comparison": "isEqualTo",
                    "value": "transactions"
                  },
                  "name": "Transactions"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "4b3d76d9-8ca2-4ae1-8aa4-f3c8f894fe87",
                              "cellValue": "SystemCheckMenu",
                              "linkTarget": "parameter",
                              "linkLabel": "Backup",
                              "subTarget": "Backup",
                              "style": "link"
                            },
                            {
                              "id": "82d423c6-dfa9-415c-9fb1-107ce4c0c023",
                              "cellValue": "SystemCheckMenu",
                              "linkTarget": "parameter",
                              "linkLabel": "Health",
                              "subTarget": "Health",
                              "style": "link"
                            },
                            {
                              "id": "ed5c5bfc-58f4-4dac-82ae-05f44034ecf9",
                              "cellValue": "SystemCheckMenu",
                              "linkTarget": "parameter",
                              "linkLabel": "Replication",
                              "subTarget": "Replication",
                              "style": "link"
                            },
                            {
                              "id": "7cc346b7-7820-45d2-827d-cef2e5fe3e99",
                              "cellValue": "SystemCheckMenu",
                              "linkTarget": "parameter",
                              "linkLabel": "Configuration Parameters",
                              "subTarget": "Configuration Parameters",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 0"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "ORA_Last_SuccessFul_Backup_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| project START_TIME_s, END_TIME_s, ELAPSED_SECONDS_d, INPUT_BYTES_PER_SEC_d, STATUS_s, INPUT_TYPE_s, COMPRESSION_RATIO_d, INPUT_BYTES_d, OPTIMIZED_s",
                                "size": 0,
                                "title": "Backup Status",
                                "timeContext": {
                                  "durationMs": 2592000000
                                },
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces",
                                "gridSettings": {
                                  "formatters": [
                                    {
                                      "columnMatch": "ELAPSED_SECONDS_d",
                                      "formatter": 0,
                                      "numberFormat": {
                                        "unit": 24,
                                        "options": {
                                          "style": "decimal"
                                        }
                                      }
                                    },
                                    {
                                      "columnMatch": "INPUT_BYTES_PER_SEC_d",
                                      "formatter": 0,
                                      "numberFormat": {
                                        "unit": 2,
                                        "options": {
                                          "style": "decimal"
                                        }
                                      }
                                    },
                                    {
                                      "columnMatch": "INPUT_BYTES_d",
                                      "formatter": 0,
                                      "numberFormat": {
                                        "unit": 2,
                                        "options": {
                                          "style": "decimal"
                                        }
                                      }
                                    },
                                    {
                                      "columnMatch": "TIME_TAKEN_DISPLAY_s",
                                      "formatter": 0,
                                      "numberFormat": {
                                        "unit": 25,
                                        "options": {
                                          "style": "decimal"
                                        }
                                      }
                                    },
                                    {
                                      "columnMatch": "INPUT_BYTES_DISPLAY_s",
                                      "formatter": 0,
                                      "numberFormat": {
                                        "unit": 5,
                                        "options": {
                                          "style": "decimal"
                                        }
                                      }
                                    },
                                    {
                                      "columnMatch": "INPUT_BYTES_PER_SEC_DISPLAY_s",
                                      "formatter": 0,
                                      "numberFormat": {
                                        "unit": 2,
                                        "options": {
                                          "style": "decimal"
                                        }
                                      }
                                    }
                                  ],
                                  "labelSettings": [
                                    {
                                      "columnId": "START_TIME_s",
                                      "label": "Start Time"
                                    },
                                    {
                                      "columnId": "END_TIME_s",
                                      "label": "End Time"
                                    },
                                    {
                                      "columnId": "ELAPSED_SECONDS_d",
                                      "label": "Time Taken"
                                    },
                                    {
                                      "columnId": "INPUT_BYTES_PER_SEC_d",
                                      "label": "Throughput"
                                    },
                                    {
                                      "columnId": "STATUS_s",
                                      "label": "Status"
                                    },
                                    {
                                      "columnId": "INPUT_TYPE_s",
                                      "label": "Type"
                                    },
                                    {
                                      "columnId": "COMPRESSION_RATIO_d",
                                      "label": "Compression Ratio"
                                    },
                                    {
                                      "columnId": "INPUT_BYTES_d",
                                      "label": "Size"
                                    },
                                    {
                                      "columnId": "OPTIMIZED_s",
                                      "label": "Optimized"
                                    }
                                  ]
                                }
                              },
                              "name": "Backup Status"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "ORA_ArchiveLogs_CL\r\n| where PROVIDER_INSTANCE_s == '{Provider}'\r\n| project ARCHIVE_INFO_s, Type",
                                "size": 0,
                                "title": "Archive Logs Information",
                                "timeContext": {
                                  "durationMs": 86400000
                                },
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces",
                                "gridSettings": {
                                  "labelSettings": [
                                    {
                                      "columnId": "ARCHIVE_INFO_s",
                                      "label": "Archive Log Information"
                                    }
                                  ]
                                }
                              },
                              "name": "Archive Log Information"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "SystemCheckMenu",
                          "comparison": "isEqualTo",
                          "value": "Backup"
                        },
                        "name": "Backup"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "ORA_ConnectionTimeinSeconds_CL\r\n|where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n|order by TimeGenerated\r\n|project TimeGenerated, AVERAGE_CONNECTION_TIME_SECONDS_d",
                                "size": 0,
                                "title": "Avg.Connection Time",
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces",
                                "visualization": "linechart",
                                "chartSettings": {
                                  "xAxis": "TimeGenerated",
                                  "xSettings": {
                                    "label": "Time"
                                  },
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 24,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    },
                                    "label": "Avg.Connection Time"
                                  }
                                }
                              },
                              "name": "Avg.Connection Time"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "ORA_Alert_Logs_CL\r\n//| where MESSAGE_TIME_s >= ago(1h)\r\n| where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n| order by MESSAGE_TIME_s\r\n| project MESSAGE_TIME_s, MESSAGE_TEXT_d",
                                "size": 0,
                                "title": "Alerts Log",
                                "timeContext": {
                                  "durationMs": 86400000
                                },
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces",
                                "gridSettings": {
                                  "labelSettings": [
                                    {
                                      "columnId": "MESSAGE_TIME_s",
                                      "label": "Message Time"
                                    },
                                    {
                                      "columnId": "MESSAGE_TEXT_d",
                                      "label": "Message Text"
                                    }
                                  ]
                                }
                              },
                              "name": "Alerts Log"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "SystemCheckMenu",
                          "comparison": "isEqualTo",
                          "value": "Health"
                        },
                        "name": "Health"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "ORA_DataGuard_Overview_CL\r\n| where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n| summarize arg_max(TimeGenerated, *) by PROVIDER_INSTANCE_s\r\n| project DATABASE_NAME_s, DATABASE_ROLE_s, DATABASE_OPEN_MODE_s, DATABASE_LOG_MODE_s, PROTECTION_MODE_s, PROTECTION_LEVEL_s, SWITCHOVER_STATUS_s, DATA_GUARD_BROKER_ENABLED_s, GUARD_STATUS_s, FAST_START_FAILOVER_STATUS_s, FAST_START_FAILOVER_MODE_s, FAST_START_FAILOVER_THRESHOLD_d",
                                "size": 0,
                                "title": "Dataguard Overview",
                                "timeContextFromParameter": "TimeFrame",
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces",
                                "gridSettings": {
                                  "labelSettings": [
                                    {
                                      "columnId": "DATABASE_NAME_s",
                                      "label": "Database Name"
                                    },
                                    {
                                      "columnId": "DATABASE_ROLE_s",
                                      "label": "Role"
                                    },
                                    {
                                      "columnId": "DATABASE_OPEN_MODE_s",
                                      "label": "Open Mode"
                                    },
                                    {
                                      "columnId": "DATABASE_LOG_MODE_s",
                                      "label": "Log Mode"
                                    },
                                    {
                                      "columnId": "PROTECTION_MODE_s",
                                      "label": "Protection Mode"
                                    },
                                    {
                                      "columnId": "PROTECTION_LEVEL_s",
                                      "label": "Protection Level",
                                      "comment": ""
                                    },
                                    {
                                      "columnId": "SWITCHOVER_STATUS_s",
                                      "label": "Switchover Status"
                                    },
                                    {
                                      "columnId": "DATA_GUARD_BROKER_ENABLED_s",
                                      "label": "Broker Status",
                                      "comment": "Data Guard broker Enabled?"
                                    },
                                    {
                                      "columnId": "GUARD_STATUS_s",
                                      "label": "Datagaurd Status"
                                    },
                                    {
                                      "columnId": "FAST_START_FAILOVER_STATUS_s",
                                      "label": "Fast Start Failover Status"
                                    },
                                    {
                                      "columnId": "FAST_START_FAILOVER_MODE_s",
                                      "label": "Fast Start Failover Mode"
                                    },
                                    {
                                      "columnId": "FAST_START_FAILOVER_THRESHOLD_d",
                                      "label": "Fast Start Failover Threshold"
                                    }
                                  ]
                                }
                              },
                              "conditionalVisibility": {
                                "parameterName": "SystemCheckMenu",
                                "comparison": "isEqualTo",
                                "value": "Replication"
                              },
                              "name": "Dataguard Overview"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "SystemCheckMenu",
                          "comparison": "isEqualTo",
                          "value": "Replication"
                        },
                        "name": "Replication"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "ORA_InitializationParameters_CL\r\n| where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n| summarize arg_max(TimeGenerated, *) by PARAMETER_NAME_s\r\n| project PARAMETER_NAME_s, CURRENT_VALUE_s, SPFILE_VALUE_s, DEFAULT_VALUE_s, DYNAMIC_s, DEPRECATED_s, PARAMETER_TYPE_d, DESCRIPTION_s",
                                "size": 0,
                                "title": " Initialization Parameters",
                                "timeContextFromParameter": "TimeFrame",
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces",
                                "gridSettings": {
                                  "labelSettings": [
                                    {
                                      "columnId": "PARAMETER_NAME_s",
                                      "label": "Name"
                                    },
                                    {
                                      "columnId": "CURRENT_VALUE_s",
                                      "label": "Current Value"
                                    },
                                    {
                                      "columnId": "SPFILE_VALUE_s",
                                      "label": "Value in Spfile"
                                    },
                                    {
                                      "columnId": "DEFAULT_VALUE_s",
                                      "label": "Dafault value"
                                    },
                                    {
                                      "columnId": "DYNAMIC_s",
                                      "label": "Dynamic?"
                                    },
                                    {
                                      "columnId": "DEPRECATED_s",
                                      "label": "Deprecated?"
                                    },
                                    {
                                      "columnId": "PARAMETER_TYPE_d",
                                      "label": "Type"
                                    },
                                    {
                                      "columnId": "DESCRIPTION_s",
                                      "label": "Description"
                                    }
                                  ]
                                }
                              },
                              "conditionalVisibility": {
                                "parameterName": "SystemCheckMenu",
                                "comparison": "isEqualTo",
                                "value": "Configuration Parameters"
                              },
                              "name": " Initialization Parameters"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "ORA_ControlFiles_CL \r\n| where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n| summarize arg_max(TimeGenerated, *) by CONTROL_FILE_s\r\n| project CONTROL_FILE_s",
                                "size": 0,
                                "title": "Controlfiles Configuration",
                                "timeContextFromParameter": "TimeFrame",
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces",
                                "gridSettings": {
                                  "labelSettings": [
                                    {
                                      "columnId": "CONTROL_FILE_s",
                                      "label": "Control Files"
                                    }
                                  ]
                                }
                              },
                              "conditionalVisibility": {
                                "parameterName": "SystemCheckMenu",
                                "comparison": "isEqualTo",
                                "value": "Configuration Parameters"
                              },
                              "name": "Controlfiles Configuration"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "ORA_HugePages_Overview_CL\r\n| where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n| summarize arg_max(TimeGenerated, *) by NAME_s\r\n| project NAME_s, VALUE_s",
                                "size": 0,
                                "title": "Hugepages Configuration",
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces",
                                "gridSettings": {
                                  "labelSettings": [
                                    {
                                      "columnId": "NAME_s",
                                      "label": "Name"
                                    },
                                    {
                                      "columnId": "VALUE_s",
                                      "label": "Value"
                                    }
                                  ]
                                }
                              },
                              "conditionalVisibility": {
                                "parameterName": "SystemCheckMenu",
                                "comparison": "isEqualTo",
                                "value": "Configuration Parameters"
                              },
                              "name": "Hugepages Configuration"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "SystemCheckMenu",
                          "comparison": "isEqualTo",
                          "value": "Configuration Parameters"
                        },
                        "name": "Configuration Parameters"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedTab",
                    "comparison": "isEqualTo",
                    "value": "systemCheck"
                  },
                  "name": "System Check"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "let LastOne = ORA_DataFiles_IO_CL\r\n| where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n| summarize TimeGenerated = max(TimeGenerated)\r\n| project TimeGenerated;\r\n\r\nORA_DataFiles_IO_CL  \r\n| join kind=inner (LastOne) on TimeGenerated\r\n| project FILE_NAME_s, TABLESPACE_NAME_s, STATUS_s, PHYSICAL_READS_d, PHYSICAL_WRITES_d\r\n| order by PHYSICAL_READS_d, PHYSICAL_WRITES_d",
                          "size": 0,
                          "title": "Datafiles IO",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "PHYSICAL_WRITES_d",
                                "formatter": 8,
                                "formatOptions": {
                                  "palette": "blue"
                                }
                              }
                            ],
                            "sortBy": [
                              {
                                "itemKey": "$gen_heatmap_PHYSICAL_WRITES_d_4",
                                "sortOrder": 2
                              }
                            ],
                            "labelSettings": [
                              {
                                "columnId": "FILE_NAME_s",
                                "label": "Data File  Name"
                              },
                              {
                                "columnId": "TABLESPACE_NAME_s",
                                "label": "Tablespace Name"
                              },
                              {
                                "columnId": "STATUS_s",
                                "label": "Status"
                              },
                              {
                                "columnId": "PHYSICAL_READS_d",
                                "label": "Physical Reads"
                              },
                              {
                                "columnId": "PHYSICAL_WRITES_d",
                                "label": "Physical Writes"
                              }
                            ]
                          },
                          "sortBy": [
                            {
                              "itemKey": "$gen_heatmap_PHYSICAL_WRITES_d_4",
                              "sortOrder": 2
                            }
                          ]
                        },
                        "name": "Datafiles IO"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedTab",
                    "comparison": "isEqualTo",
                    "value": "IO"
                  },
                  "name": "IO"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "ORA_TS_Summary_CL \r\n| where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n| summarize arg_max(TimeGenerated, *) by TABLESPACE_NAME_s\r\n| project TABLESPACE_NAME_s, CONTENT_TYPE_s, ALLOCATED_SIZE_GB_s, TOTAL_SIZE_GB_s, ALLOCATED_SIZE_USED_PERCENT_s,TOTAL_SIZE_USED_PERCENT_s,NUMBER_OF_DATA_FILES_s",
                          "size": 0,
                          "title": "Tablespaces",
                          "timeContextFromParameter": "TimeFrame",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "ALLOCATED_SIZE_GB_s",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 5,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "TOTAL_SIZE_GB_s",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 5,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "ALLOCATED_SIZE_USED_PERCENT_s",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 1,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "TOTAL_SIZE_USED_PERCENT_s",
                                "formatter": 4,
                                "formatOptions": {
                                  "palette": "greenRed"
                                },
                                "numberFormat": {
                                  "unit": 1,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              }
                            ],
                            "sortBy": [
                              {
                                "itemKey": "$gen_bar_TOTAL_SIZE_USED_PERCENT_s_5",
                                "sortOrder": 2
                              }
                            ],
                            "labelSettings": [
                              {
                                "columnId": "TABLESPACE_NAME_s",
                                "label": "Name"
                              },
                              {
                                "columnId": "CONTENT_TYPE_s",
                                "label": "Content Type"
                              },
                              {
                                "columnId": "ALLOCATED_SIZE_GB_s",
                                "label": "Allocated Size"
                              },
                              {
                                "columnId": "TOTAL_SIZE_GB_s",
                                "label": "Total Size"
                              },
                              {
                                "columnId": "ALLOCATED_SIZE_USED_PERCENT_s",
                                "label": "% Used Allocated Size"
                              },
                              {
                                "columnId": "TOTAL_SIZE_USED_PERCENT_s",
                                "label": "% Used Total Size"
                              },
                              {
                                "columnId": "NUMBER_OF_DATA_FILES_s",
                                "label": "Number of Datafiles"
                              }
                            ]
                          },
                          "sortBy": [
                            {
                              "itemKey": "$gen_bar_TOTAL_SIZE_USED_PERCENT_s_5",
                              "sortOrder": 2
                            }
                          ]
                        },
                        "customWidth": "50",
                        "name": "Tablespaces",
                        "styleSettings": {
                          "margin": "15px"
                        }
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "ORA_TS_Summary_CL \r\n| where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n| summarize arg_max(TimeGenerated, *) by TABLESPACE_NAME_s\r\n| order by toreal(ALLOCATED_SIZE_GB_s)\r\n| project TABLESPACE_NAME_s, toreal(ALLOCATED_SIZE_GB_s)",
                          "size": 0,
                          "title": "Top5 Tablespaces",
                          "timeContext": {
                            "durationMs": 2592000000
                          },
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "visualization": "barchart"
                        },
                        "customWidth": "50",
                        "name": "Top5 Tablespaces",
                        "styleSettings": {
                          "margin": "15"
                        }
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "ORA_RedoGroups_CL \r\n| where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n| summarize arg_max(TimeGenerated, *) by MEMBER_s\r\n| project MEMBER_s, TYPE_s, GROUP_STATUS_s, ARCHIVED_s, SIZE_GB_s, BLOCKSIZE_d, GROUP__d, MEMBERS_d, FIRST_CHANGE__d,FIRST_CHANGE_TIME_s, NEXT_CHANGE__d, NEXT_CHANGE_TIME_s",
                          "size": 0,
                          "title": "Redo Log Groups",
                          "timeContextFromParameter": "TimeFrame",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "TYPE_s",
                                "formatter": 18,
                                "formatOptions": {
                                  "thresholdsOptions": "icons",
                                  "thresholdsGrid": [
                                    {
                                      "operator": "==",
                                      "thresholdValue": "ONLINE",
                                      "representation": "success",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "representation": "more",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "Default",
                                      "thresholdValue": null,
                                      "representation": "more",
                                      "text": "{0}{1}"
                                    }
                                  ]
                                }
                              },
                              {
                                "columnMatch": "GROUP_STATUS_s",
                                "formatter": 18,
                                "formatOptions": {
                                  "thresholdsOptions": "colors",
                                  "thresholdsGrid": [
                                    {
                                      "operator": "==",
                                      "thresholdValue": "CURRENT",
                                      "representation": "green",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "Default",
                                      "thresholdValue": null,
                                      "representation": null,
                                      "text": "{0}{1}"
                                    }
                                  ]
                                }
                              },
                              {
                                "columnMatch": "SIZE_GB_s",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 5,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "BLOCKSIZE_d",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 2,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              }
                            ],
                            "labelSettings": [
                              {
                                "columnId": "MEMBER_s",
                                "label": "Member"
                              },
                              {
                                "columnId": "TYPE_s",
                                "label": "Type"
                              },
                              {
                                "columnId": "GROUP_STATUS_s",
                                "label": "Status"
                              },
                              {
                                "columnId": "ARCHIVED_s",
                                "label": "Archived"
                              },
                              {
                                "columnId": "SIZE_GB_s",
                                "label": "Size"
                              },
                              {
                                "columnId": "BLOCKSIZE_d",
                                "label": "Block Size"
                              },
                              {
                                "columnId": "GROUP__d",
                                "label": "Group"
                              },
                              {
                                "columnId": "MEMBERS_d",
                                "label": "Members"
                              },
                              {
                                "columnId": "FIRST_CHANGE__d",
                                "label": "First Change"
                              },
                              {
                                "columnId": "FIRST_CHANGE_TIME_s",
                                "label": "First Change Time"
                              },
                              {
                                "columnId": "NEXT_CHANGE__d",
                                "label": "Next Change"
                              },
                              {
                                "columnId": "NEXT_CHANGE_TIME_s",
                                "label": "Next Change Time"
                              }
                            ]
                          }
                        },
                        "name": "Redo Log Groups"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "ORA_FlashbackDB_CL \r\n| where PROVIDER_INSTANCE_s == \"{Provider}\"\r\n| summarize arg_max(TimeGenerated, *) by FILE_TYPE_s\r\n| project FILE_TYPE_s, NUMBER_OF_FILES_d,FLASHBACK_RETENTION_TARGET_MINUTES_s, SPACE_LIMIT_MB_d, SPACE_USED_MB_d, SPACE_RECLAIMABLE_MB_d\r\n",
                          "size": 0,
                          "title": "Fast Recovery Area",
                          "timeContextFromParameter": "TimeFrame",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "NUMBER_OF_FILES_d",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 17,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "FLASHBACK_RETENTION_TARGET_MINUTES_s",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 25,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "SPACE_LIMIT_MB_d",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 4,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "SPACE_USED_MB_d",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 4,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "SPACE_RECLAIMABLE_MB_d",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 4,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              }
                            ],
                            "labelSettings": [
                              {
                                "columnId": "FILE_TYPE_s",
                                "label": "Type"
                              },
                              {
                                "columnId": "NUMBER_OF_FILES_d",
                                "label": "Number of Files"
                              },
                              {
                                "columnId": "FLASHBACK_RETENTION_TARGET_MINUTES_s",
                                "label": "Flashback Retention Target"
                              },
                              {
                                "columnId": "SPACE_LIMIT_MB_d",
                                "label": "Space Limit"
                              },
                              {
                                "columnId": "SPACE_USED_MB_d",
                                "label": "Used Space"
                              },
                              {
                                "columnId": "SPACE_RECLAIMABLE_MB_d",
                                "label": "Reclaimable Space"
                              }
                            ]
                          }
                        },
                        "name": "Fast Recovery Area"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedTab",
                    "comparison": "isEqualTo",
                    "value": "Storage"
                  },
                  "name": "Storage"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "provider_table_exists",
              "comparison": "isEqualTo",
              "value": "1"
            },
            "name": "ora-provider"
          }
        ]
      },
      "name": "DB Monitoring group"
    }
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}