{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "ParameterCollectionItem/1.0",
        "parameters": [
          {
            "id": "4f40cabd-848b-41c7-b4a7-2ac7e64764be",
            "version": "ParameterItem/1.0",
            "name": "TimeRange",
            "label": "Time Range",
            "type": 4,
            "isRequired": true,
            "value": {
              "durationMs": 2592000000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2419200000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ]
            }
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "parameters - 1"
    },
    {
      "type": 1,
      "content": {
        "json": "## SDK Stats - Drop Reasons\n---\nThis workbook provides detailed insights into telemetry drop reasons from the Azure Monitor SDK. It focuses specifically on the `preview.item.dropped.count` metric and breaks down the different drop reasons over time. This helps teams identify patterns in data loss, understand why telemetry is being dropped, and take corrective actions to improve data collection reliability.\n\n### Key Metrics:\n- **Drop Reason Breakdown**: Visualizes different reasons why telemetry items are dropped\n- **Trend Analysis**: Shows how drop patterns change over time\n- **Total Drop Count**: Aggregated view of all dropped items by reason\n"
      },
      "name": "text - 2"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"preview.item.dropped.count\"\n| extend drop_reason = tostring(customDimensions[\"drop.reason\"])\n| where isnotempty(drop_reason)\n| summarize total_dropped = sum(value) by drop_reason, bin(timestamp, {TimeRange:grain})\n| project timestamp, drop_reason, total_dropped\n| render timechart",
        "size": 1,
        "title": "Telemetry Drop Reasons Over Time",
        "timeContext": {
          "durationMs": 0,
          "createdTime": "2025-07-30T00:00:00.000Z"
        },
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "Drop Reasons Timeseries"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"preview.item.dropped.count\"\n| extend drop_reason = tostring(customDimensions[\"drop.reason\"])\n| where isnotempty(drop_reason)\n| summarize total_dropped = sum(value) by drop_reason\n| order by total_dropped desc\n| render barchart",
        "size": 1,
        "title": "Total Dropped Items by Reason",
        "timeContext": {
          "durationMs": 0,
          "createdTime": "2025-07-30T00:00:00.000Z"
        },
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "Drop Reasons Summary"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"preview.item.dropped.count\"\n| extend drop_reason = tostring(customDimensions[\"drop.reason\"])\n| where isnotempty(drop_reason)\n| summarize \n    total_dropped = sum(value),\n    avg_dropped_per_period = avg(value),\n    max_dropped_per_period = max(value),\n    min_dropped_per_period = min(value),\n    drop_events = count()\n    by drop_reason\n| order by total_dropped desc\n| project \n    [\"Drop Reason\"] = drop_reason,\n    [\"Total Dropped\"] = total_dropped,\n    [\"Avg per Period\"] = round(avg_dropped_per_period, 2),\n    [\"Max per Period\"] = max_dropped_per_period,\n    [\"Min per Period\"] = min_dropped_per_period,\n    [\"Number of Events\"] = drop_events",
        "size": 1,
        "title": "Drop Reasons Statistics",
        "timeContext": {
          "durationMs": 0,
          "createdTime": "2025-07-30T00:00:00.000Z"
        },
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "Drop Reasons Statistics Table"
    }
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}
