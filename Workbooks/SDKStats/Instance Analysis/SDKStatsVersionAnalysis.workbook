{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "ParameterCollectionItem/1.0",
        "parameters": [
          {
            "id": "4f40cabd-848b-41c7-b4a7-2ac7e64764be",
            "version": "ParameterItem/1.0",
            "name": "TimeRange",
            "label": "Time Range",
            "type": 4,
            "isRequired": true,
            "value": {
              "durationMs": 2592000000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2419200000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ]
            }
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "parameters - 1"
    },
    {
      "type": 1,
      "content": {
        "json": "## SDK Stats - Version & Instance Analysis\n---\nThis workbook provides comprehensive analysis of SDK performance across different versions and application instances. By examining success and failure patterns by instrumentation key (iKey) and SDK version, this workbook helps identify version-specific issues, problematic SDK instances, and performance variations across your application ecosystem.\n\n### Key Analysis Areas:\n- **Cross-Version Performance**: Compare success rates across different SDK versions\n- **Instance-Level Insights**: Identify specific applications or services with performance issues\n- **Version Migration Impact**: Understand how SDK upgrades affect telemetry reliability\n- **Performance Correlation**: Discover relationships between SDK versions and application performance\n"
      },
      "name": "text - 2"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "let success_data = customMetrics\n| where name == \"preview.item.success.count\"\n| where isnotempty(iKey) and isnotempty(sdkVersion)\n| summarize total_success = sum(todouble(value)) by iKey, sdkVersion;\nlet dropped_data = customMetrics\n| where name == \"preview.item.dropped.count\"\n| where isnotempty(iKey) and isnotempty(sdkVersion)\n| summarize total_dropped = sum(todouble(value)) by iKey, sdkVersion;\nsuccess_data\n| join kind=fullouter dropped_data on iKey, sdkVersion\n| extend \n    iKey = coalesce(iKey, iKey1),\n    sdkVersion = coalesce(sdkVersion, sdkVersion1),\n    total_success = coalesce(total_success, 0.0),\n    total_dropped = coalesce(total_dropped, 0.0)\n| extend \n    total_items = total_success + total_dropped,\n    success_rate = round(total_success * 100.0 / (total_success + total_dropped), 2)\n| project iKey, sdkVersion, success_rate",
        "size": 0,
        "title": "Success Rate Analysis by iKey and SDK Version",
        "noDataMessage": "No data available for the selected time range",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "success_rate",
              "formatter": 8,
              "formatOptions": {
                "palette": "greenRed"
              }
            }
          ]
        },
        "timeContext": {
          "durationMs": 0,
          "createdTime": "2025-07-30T00:00:00.000Z"
        },
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "Success Rate Analysis"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"preview.item.success.count\"\n| where isnotempty(iKey) and isnotempty(sdkVersion)\n| summarize total_success = sum(value) by iKey, sdkVersion\n| project iKey, sdkVersion, total_success",
        "size": 0,
        "title": "Success Volume by iKey and SDK Version",
        "noDataMessage": "No data available for the selected time range",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "total_success",
              "formatter": 8,
              "formatOptions": {
                "palette": "blue"
              }
            }
          ]
        },
        "timeContext": {
          "durationMs": 0,
          "createdTime": "2025-07-30T00:00:00.000Z"
        },
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "Success Volume Analysis"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "customMetrics\n| where name == \"preview.item.dropped.count\"\n| where isnotempty(iKey) and isnotempty(sdkVersion)\n| summarize total_dropped = sum(value) by iKey, sdkVersion\n| project iKey, sdkVersion, total_dropped",
        "size": 0,
        "title": "Failure Volume by iKey and SDK Version",
        "noDataMessage": "No data available for the selected time range",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "total_dropped",
              "formatter": 8,
              "formatOptions": {
                "palette": "redBright"
              }
            }
          ]
        },
        "timeContext": {
          "durationMs": 0,
          "createdTime": "2025-07-30T00:00:00.000Z"
        },
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "Failure Volume Analysis"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "let success_data = customMetrics\n| where name == \"preview.item.success.count\"\n| where isnotempty(sdkVersion)\n| summarize total_success = sum(todouble(value)) by sdkVersion;\nlet dropped_data = customMetrics\n| where name == \"preview.item.dropped.count\"\n| where isnotempty(sdkVersion)\n| summarize total_dropped = sum(todouble(value)) by sdkVersion;\nsuccess_data\n| join kind=fullouter dropped_data on sdkVersion\n| extend \n    sdkVersion = coalesce(sdkVersion, sdkVersion1),\n    total_success = coalesce(total_success, 0.0),\n    total_dropped = coalesce(total_dropped, 0.0)\n| extend \n    total_items = total_success + total_dropped,\n    success_rate = round(total_success * 100.0 / (total_success + total_dropped), 2)\n| project \n    [\"SDK Version\"] = sdkVersion,\n    [\"Total Success\"] = tolong(total_success),\n    [\"Total Dropped\"] = tolong(total_dropped),\n    [\"Total Items\"] = tolong(total_items),\n    [\"Success Rate %\"] = success_rate\n| order by [\"Total Items\"] desc",
        "size": 1,
        "title": "SDK Version Performance Overview",
        "timeContext": {
          "durationMs": 0,
          "createdTime": "2025-07-30T00:00:00.000Z"
        },
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "SDK Version Overview"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "let success_data = customMetrics\n| where name == \"preview.item.success.count\"\n| where isnotempty(sdkVersion)\n| summarize total_success = sum(todouble(value)) by sdkVersion;\nlet dropped_data = customMetrics\n| where name == \"preview.item.dropped.count\"\n| where isnotempty(sdkVersion)\n| summarize total_dropped = sum(todouble(value)) by sdkVersion;\nsuccess_data\n| join kind=fullouter dropped_data on sdkVersion\n| extend \n    sdkVersion = coalesce(sdkVersion, sdkVersion1),\n    total_success = coalesce(total_success, 0.0),\n    total_dropped = coalesce(total_dropped, 0.0)\n| extend success_rate = round(total_success * 100.0 / (total_success + total_dropped), 2)\n| project sdkVersion, success_rate\n| render barchart",
        "size": 1,
        "title": "SDK Version Success Rate Comparison",
        "timeContext": {
          "durationMs": 0,
          "createdTime": "2025-07-30T00:00:00.000Z"
        },
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "SDK Version Success Rate Chart"
    }
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}
