{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "crossComponentResources": [
          "{Subscription}"
        ],
        "parameters": [
          {
            "id": "df624d07-1a42-4d88-8ea8-dbf675081a98",
            "version": "KqlParameterItem/1.0",
            "name": "Subscription",
            "type": 6,
            "description": "Subscription of Log Analytics Workspace containing your clusters' data",
            "isRequired": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "Resources | where type =~ \"microsoft.hdinsight/clusters\" \r\n| distinct subscriptionId | order by subscriptionId | project subscriptionId, label=subscriptionId, selected=row_number()==1",
            "crossComponentResources": [
              "value::all"
            ],
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 1,
            "resourceType": "microsoft.resourcegraph/resources"
          },
          {
            "id": "b73367a6-702d-4f86-b908-ac5335be25de",
            "version": "KqlParameterItem/1.0",
            "name": "Clusters",
            "type": 5,
            "description": "Select the Log Analytics workspaces you would like to see metrics for. Limited to 100 workspaces or workspaces in more than 25 different regions.",
            "isRequired": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "where type =~ 'microsoft.hdinsight/clusters'\r\n|  order by name asc\r\n| extend Rank = row_number()\r\n| project value = id, label = name, selected = Rank <= 20",
            "crossComponentResources": [
              "{Subscription}"
            ],
            "typeSettings": {
              "resourceTypeFilter": {
                "microsoft.hdinsight/clusters": true
              },
              "limitSelectTo": 500,
              "additionalResourceOptions": [
                "value::5",
                "value::10",
                "value::all"
              ],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "defaultValue": "value::10",
            "queryType": 1,
            "resourceType": "microsoft.resourcegraph/resources"
          },
          {
            "id": "47565476-ecba-4f53-80fc-14cbdcc779e9",
            "version": "KqlParameterItem/1.0",
            "name": "TimeRange",
            "type": 4,
            "description": "Time range used for queries ",
            "isRequired": true,
            "value": {
              "durationMs": 3600000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2419200000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ],
              "allowCustom": true
            },
            "timeContext": {
              "durationMs": 86400000
            }
          }
        ],
        "style": "pills",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources"
      },
      "name": "parameters - 0"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "02344c0b-1cda-414f-aff0-47d2999560a8",
            "cellValue": "monitor_tab",
            "linkTarget": "parameter",
            "linkLabel": "Monitored",
            "subTarget": "Monitored",
            "style": "link"
          },
          {
            "id": "a3b615be-9ea2-4532-9454-7009279243aa",
            "cellValue": "monitor_tab",
            "linkTarget": "parameter",
            "linkLabel": "Unmonitored",
            "subTarget": "Unmonitored",
            "style": "link"
          }
        ]
      },
      "name": "links - 9"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "762576d3-25ec-4079-8c2d-326d89e39fd2",
                  "cellValue": "tab",
                  "linkTarget": "parameter",
                  "linkLabel": "Overview",
                  "subTarget": "Overview",
                  "style": "link"
                },
                {
                  "id": "95e5d4d8-622c-4b43-9997-d2786e5c8d97",
                  "cellValue": "tab",
                  "linkTarget": "parameter",
                  "linkLabel": "HBase",
                  "subTarget": "HBase",
                  "style": "link"
                },
                {
                  "id": "3895f2fc-411b-4335-a11b-fe1ac1abde48",
                  "cellValue": "tab",
                  "linkTarget": "parameter",
                  "linkLabel": "Hive",
                  "subTarget": "Hive",
                  "style": "link"
                },
                {
                  "id": "1e34bf2d-acdf-4f89-a4a9-53441cef3d39",
                  "cellValue": "tab",
                  "linkTarget": "parameter",
                  "linkLabel": "Kafka",
                  "subTarget": "Kafka",
                  "style": "link"
                },
                {
                  "id": "0847ac85-85af-43cc-b916-9342b7dd9a5c",
                  "cellValue": "tab",
                  "linkTarget": "parameter",
                  "linkLabel": "Spark",
                  "subTarget": "Spark",
                  "style": "link"
                },
                {
                  "id": "431c8743-530d-4cc4-b978-c7fd1398974d",
                  "cellValue": "tab",
                  "linkTarget": "parameter",
                  "linkLabel": "Storm",
                  "subTarget": "Storm",
                  "style": "link"
                }
              ]
            },
            "name": "links - 2"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Clusters}"
              ],
              "parameters": [
                {
                  "id": "7ad14875-5da4-4cbb-99fe-4f2d8ca682fc",
                  "version": "KqlParameterItem/1.0",
                  "name": "hive_yarn_usage",
                  "type": 1,
                  "isRequired": true,
                  "query": "let hasNonEmptyTable = (T:string) \r\n{ \r\n   toscalar(\r\n   table(T) | where ClusterType == \"interactivehive\" or ClusterType == \"hadoop\" |take 1 | count as Count\r\n   | extend present = Count > 0\r\n   | project present)\r\n};\r\nlet TableName = 'HDInsightHadoopAndYarnMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName), \"present\", \"not present\")",
                  "crossComponentResources": [
                    "{Clusters}"
                  ],
                  "isHiddenWhenLocked": true,
                  "timeContext": {
                    "durationMs": 0
                  },
                  "timeContextFromParameter": "TimeRange",
                  "queryType": 0,
                  "resourceType": "microsoft.hdinsight/clusters"
                }
              ],
              "style": "pills",
              "doNotRunWhenHidden": true,
              "queryType": 0,
              "resourceType": "microsoft.hdinsight/clusters"
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "Hive"
            },
            "name": "parameters - 7"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Clusters}"
              ],
              "parameters": [
                {
                  "id": "a60bec62-057b-4d25-b5d8-c328330c37e7",
                  "version": "KqlParameterItem/1.0",
                  "name": "hbase_yarn_usage",
                  "type": 1,
                  "isRequired": true,
                  "query": "let hasNonEmptyTable = (T:string) \r\n{ \r\n   toscalar(\r\n   table(T) | where ClusterType == \"hbase\" |take 1 | count as Count\r\n   | extend present = Count > 0\r\n   | project present)\r\n};\r\nlet TableName = 'HDInsightHadoopAndYarnMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName), \"present\", \"not present\")",
                  "crossComponentResources": [
                    "{Clusters}"
                  ],
                  "isHiddenWhenLocked": true,
                  "timeContext": {
                    "durationMs": 0
                  },
                  "timeContextFromParameter": "TimeRange",
                  "queryType": 0,
                  "resourceType": "microsoft.hdinsight/clusters"
                }
              ],
              "style": "pills",
              "doNotRunWhenHidden": true,
              "queryType": 0,
              "resourceType": "microsoft.hdinsight/clusters"
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "HBase"
            },
            "name": "parameters - 18"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Clusters}"
              ],
              "parameters": [
                {
                  "id": "599fc866-5c6f-4759-bbea-80bf09b79c40",
                  "version": "KqlParameterItem/1.0",
                  "name": "spark_yarn_usage",
                  "type": 1,
                  "isRequired": true,
                  "query": "let hasNonEmptyTable = (T:string, T2:string) \r\n{ \r\n   toscalar( \r\n   union isfuzzy=true \r\n   ( table(T) | where  ClusterType =~ \"spark\" | take 1 | count as Count ),\r\n   ( table(T2) | where ClusterType =~ \"spark\"| take 1 | count as Count),\r\n   (print Count=0) \r\n   | summarize sum(Count) \r\n   ) > 1\r\n};\r\nlet TableName = 'HDInsightAmbariSystemMetrics';\r\nlet TableName2 = 'HDInsightHadoopAndYarnMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName,TableName2 ), \"present\", \"not present\")",
                  "crossComponentResources": [
                    "{Clusters}"
                  ],
                  "isHiddenWhenLocked": true,
                  "timeContext": {
                    "durationMs": 0
                  },
                  "timeContextFromParameter": "TimeRange",
                  "queryType": 0,
                  "resourceType": "microsoft.hdinsight/clusters"
                }
              ],
              "style": "pills",
              "doNotRunWhenHidden": true,
              "queryType": 0,
              "resourceType": "microsoft.hdinsight/clusters"
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "Spark"
            },
            "name": "parameters - 17"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Clusters}"
              ],
              "parameters": [
                {
                  "id": "e8a14c20-3142-4dc3-a9ec-86195834b541",
                  "version": "KqlParameterItem/1.0",
                  "name": "spark_usage",
                  "type": 1,
                  "isRequired": true,
                  "query": "let hasNonEmptyTable = (T:string) \r\n{ \r\n   toscalar(\r\n   table(T) | where ClusterType == \"spark\" |take 1 | count as Count\r\n   | extend present = Count > 0\r\n   | project present)\r\n};\r\nlet TableName = 'HDInsightHadoopAndYarnMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName), \"present\", \"not present\")",
                  "crossComponentResources": [
                    "{Clusters}"
                  ],
                  "isHiddenWhenLocked": true,
                  "timeContext": {
                    "durationMs": 0
                  },
                  "timeContextFromParameter": "TimeRange",
                  "queryType": 0,
                  "resourceType": "microsoft.hdinsight/clusters"
                }
              ],
              "style": "pills",
              "doNotRunWhenHidden": true,
              "queryType": 0,
              "resourceType": "microsoft.hdinsight/clusters"
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "Spark"
            },
            "name": "parameters - 16"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Clusters}"
              ],
              "parameters": [
                {
                  "id": "f749c0b1-71b6-425c-b83f-0b1224c121d0",
                  "version": "KqlParameterItem/1.0",
                  "name": "storm_usage",
                  "type": 1,
                  "isRequired": true,
                  "query": "let hasNonEmptyTable = (T:string, T2:string) \r\n{ \r\n   toscalar( \r\n   union isfuzzy=true \r\n   ( table(T) | take 1 | count as Count ),\r\n   ( table(T2) |  take 1 | count as Count),\r\n   (print Count=0) \r\n   | summarize sum(Count) \r\n   ) > 1\r\n};\r\nlet TableName = 'HDInsightStormMetrics';\r\nlet TableName2 = 'HDInsightStormTopologyMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName,TableName2 ), \"present\", \"not present\")",
                  "crossComponentResources": [
                    "{Clusters}"
                  ],
                  "isHiddenWhenLocked": true,
                  "timeContext": {
                    "durationMs": 0
                  },
                  "timeContextFromParameter": "TimeRange",
                  "queryType": 0,
                  "resourceType": "microsoft.hdinsight/clusters"
                }
              ],
              "style": "pills",
              "doNotRunWhenHidden": true,
              "queryType": 0,
              "resourceType": "microsoft.hdinsight/clusters"
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "Storm"
            },
            "name": "parameters - 15"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Clusters}"
              ],
              "parameters": [
                {
                  "id": "ee2e29fe-6005-4566-b071-fccf905904d5",
                  "version": "KqlParameterItem/1.0",
                  "name": "hive_usage",
                  "type": 1,
                  "isRequired": true,
                  "query": "let hasNonEmptyTable = (T:string) \r\n{ \r\n   toscalar(\r\n   table(T) | where (ClusterType =~ \"interactivehive\" or ClusterType == \"hadoop\") |take 1 | count as Count\r\n   | extend present = Count > 0\r\n   | project present)\r\n};\r\nlet TableName = 'HDInsightHiveAndLLAPMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName), \"present\", \"not present\")",
                  "crossComponentResources": [
                    "{Clusters}"
                  ],
                  "isHiddenWhenLocked": true,
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "queryType": 0,
                  "resourceType": "microsoft.hdinsight/clusters"
                }
              ],
              "style": "pills",
              "doNotRunWhenHidden": true,
              "queryType": 0,
              "resourceType": "microsoft.hdinsight/clusters"
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "Hive"
            },
            "name": "parameters - 14"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Clusters}"
              ],
              "parameters": [
                {
                  "id": "6eb95a97-75f0-4e1d-abce-b45cf07cda1c",
                  "version": "KqlParameterItem/1.0",
                  "name": "hbase_usage",
                  "type": 1,
                  "isRequired": true,
                  "query": "let hasNonEmptyTable = (T:string) \r\n{ \r\n   toscalar(\r\n   table(T) |   take 1 | count as Count\r\n   | extend present = Count > 0\r\n   | project present)\r\n};\r\nlet TableName = 'HDInsightHBaseMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName), \"present\", \"not present\")",
                  "crossComponentResources": [
                    "{Clusters}"
                  ],
                  "isHiddenWhenLocked": true,
                  "timeContext": {
                    "durationMs": 0
                  },
                  "timeContextFromParameter": "TimeRange",
                  "queryType": 0,
                  "resourceType": "microsoft.hdinsight/clusters"
                }
              ],
              "style": "pills",
              "doNotRunWhenHidden": true,
              "queryType": 0,
              "resourceType": "microsoft.hdinsight/clusters"
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "HBase"
            },
            "name": "parameters - 13"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Clusters}"
              ],
              "parameters": [
                {
                  "id": "49016c38-eb59-44f6-910d-d4a2456d1dde",
                  "version": "KqlParameterItem/1.0",
                  "name": "overview_usage",
                  "type": 1,
                  "isRequired": true,
                  "query": "\r\nlet hasNonEmptyTable = (T:string, T2:string) \r\n{ \r\n   toscalar( \r\n   union isfuzzy=true \r\n   ( table(T) |  take 1 | count as Count ),\r\n   ( table(T2) |   take 1 | count as Count),\r\n   (print Count=0) \r\n   | summarize sum(Count) \r\n   ) > 1\r\n};\r\nlet TableName = 'HDInsightAmbariSystemMetrics';\r\nlet TableName2 = 'HDInsightAmbariClusterAlerts';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName,TableName2 ), \"present\", \"not present\")",
                  "crossComponentResources": [
                    "{Clusters}"
                  ],
                  "isHiddenWhenLocked": true,
                  "timeContext": {
                    "durationMs": 0
                  },
                  "timeContextFromParameter": "TimeRange",
                  "queryType": 0,
                  "resourceType": "microsoft.hdinsight/clusters",
                  "value": null
                }
              ],
              "style": "pills",
              "doNotRunWhenHidden": true,
              "queryType": 0,
              "resourceType": "microsoft.hdinsight/clusters"
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "Overview"
            },
            "name": "parameters - 11"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Clusters}"
              ],
              "parameters": [
                {
                  "id": "f13f5877-e16e-4c6d-b47f-b38242f619a0",
                  "version": "KqlParameterItem/1.0",
                  "name": "kafka_usage",
                  "type": 1,
                  "isRequired": true,
                  "query": "let hasNonEmptyTable = (T:string) \r\n{ \r\n   toscalar(\r\n   table(T) |   take 1 | count as Count\r\n   | extend present = Count > 0\r\n   | project present)\r\n};\r\nlet TableName = 'HDInsightKafkaMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName), \"present\", \"not present\")",
                  "crossComponentResources": [
                    "{Clusters}"
                  ],
                  "isHiddenWhenLocked": true,
                  "timeContext": {
                    "durationMs": 0
                  },
                  "timeContextFromParameter": "TimeRange",
                  "queryType": 0,
                  "resourceType": "microsoft.hdinsight/clusters"
                }
              ],
              "style": "pills",
              "doNotRunWhenHidden": true,
              "queryType": 0,
              "resourceType": "microsoft.hdinsight/clusters"
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "Kafka"
            },
            "name": "kafka usage"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Clusters Overview",
              "items": [
                {
                  "type": 9,
                  "content": {
                    "version": "KqlParameterItem/1.0",
                    "parameters": [
                      {
                        "id": "2f02a53e-a88a-4ed9-92e4-4ff2ec17bbc4",
                        "version": "KqlParameterItem/1.0",
                        "name": "ClusterTypeParam",
                        "label": "ClusterType",
                        "type": 2,
                        "description": "Filtering overview display by cluster type",
                        "isRequired": true,
                        "multiSelect": true,
                        "quote": "'",
                        "delimiter": ",",
                        "value": [
                          "storm",
                          "kafka",
                          "interactivehive",
                          "hbase",
                          "spark",
                          "hadoop"
                        ],
                        "typeSettings": {
                          "additionalResourceOptions": [],
                          "showDefault": false
                        },
                        "jsonData": "[\r\n    { \"value\":\"hadoop\", \"label\":\"Hadoop\", \"selected\":true },\r\n    { \"value\":\"interactivehive\", \"label\":\"Hive\",\"selected\":true },\r\n    { \"value\":\"kafka\", \"label\":\"Kafka\", \"selected\":true},\r\n    { \"value\":\"storm\", \"label\":\"Storm\", \"selected\":true},\r\n    { \"value\":\"hbase\", \"label\":\"HBase\", \"selected\":true},\r\n    { \"value\":\"spark\", \"label\":\"Spark\", \"selected\":true}\r\n]\r\n ",
                        "timeContext": {
                          "durationMs": 86400000
                        }
                      }
                    ],
                    "style": "above",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces"
                  },
                  "name": "parameters - 3"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightAmbariSystemMetrics\r\n| where ClusterType in ({ClusterTypeParam})\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, ClusterType, HostName\r\n| summarize NodeCount = count(), DiskUsagePercentage = (1 - sum(DiskFree)/sum(DiskTotal))*100, CPUUsagePercentage = sum(CpuSystem + CpuUser + CpuIOWait) / sum(NumberOfCpu), MemoryUsagePercentage = (1 - sum(FreeMemory)/sum(TotalMemory))*100 by ClusterName , ClusterType\r\n| join kind=leftouter (HDInsightAmbariClusterAlerts\r\n| where State == \"CRITICAL\"\r\n| summarize CriticalAlerts = dcount(AlertID) by ClusterName)\r\non ClusterName\r\n| extend CriticalAlerts = iff(isempty(CriticalAlerts), 0, CriticalAlerts)\r\n| project ClusterName, NodeCount, ClusterType, CriticalAlerts,   CPUUsagePercentage, MemoryUsagePercentage, DiskUsagePercentage",
                    "size": 0,
                    "timeContext": {
                      "durationMs": 3600000
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "DiskPercentUsed",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 1,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false,
                              "maximumFractionDigits": 2
                            }
                          }
                        },
                        {
                          "columnMatch": "CPUUsagePercentage",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 1,
                            "options": {
                              "style": "decimal",
                              "maximumFractionDigits": 2
                            }
                          }
                        },
                        {
                          "columnMatch": "FreeMemoryBytes",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 2,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        }
                      ]
                    }
                  },
                  "conditionalVisibility": {
                    "parameterName": "tab",
                    "comparison": "isEqualTo"
                  },
                  "name": "ClusterMetrics"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "where type =~ 'microsoft.hdinsight/clusters' | project  name, id",
                    "size": 0,
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscription}"
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "tab",
                    "comparison": "isEqualTo"
                  },
                  "name": "ClusterResourceInfo"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"ffd5d871-3f9e-43e0-8a4f-497a1a750098\",\"mergeType\":\"inner\",\"leftTable\":\"ClusterMetrics\",\"rightTable\":\"ClusterResourceInfo\",\"leftColumn\":\"ClusterName\",\"rightColumn\":\"name\"}],\"projectRename\":[{\"originalName\":\"[ClusterResourceInfo].id\",\"mergedName\":\"ClusterName\",\"fromId\":\"ffd5d871-3f9e-43e0-8a4f-497a1a750098\"},{\"originalName\":\"[ClusterMetrics].NodeCount\",\"mergedName\":\"NodeCount\",\"fromId\":\"ffd5d871-3f9e-43e0-8a4f-497a1a750098\"},{\"originalName\":\"[ClusterMetrics].ClusterType\",\"mergedName\":\"ClusterType\",\"fromId\":\"ffd5d871-3f9e-43e0-8a4f-497a1a750098\"},{\"originalName\":\"[ClusterMetrics].CriticalAlerts\",\"mergedName\":\"CriticalAlerts\",\"fromId\":\"ffd5d871-3f9e-43e0-8a4f-497a1a750098\"},{\"originalName\":\"[ClusterMetrics].DiskPercentUsed\",\"mergedName\":\"DiskPercentUsed\",\"fromId\":\"ffd5d871-3f9e-43e0-8a4f-497a1a750098\"},{\"originalName\":\"[ClusterMetrics].CPUUsagePercentage\",\"mergedName\":\"CPUUsagePercentage\",\"fromId\":\"ffd5d871-3f9e-43e0-8a4f-497a1a750098\"},{\"originalName\":\"[ClusterMetrics].FreeMemoryBytes\",\"mergedName\":\"FreeMemoryBytes\",\"fromId\":\"ffd5d871-3f9e-43e0-8a4f-497a1a750098\"},{\"originalName\":\"[ClusterMetrics].MemoryUsagePercentage\",\"mergedName\":\"MemoryUsagePercentage\",\"fromId\":\"unknown\"},{\"originalName\":\"[ClusterMetrics].DiskUsagePercentage\",\"mergedName\":\"DiskUsagePercentage\",\"fromId\":\"unknown\"},{\"originalName\":\"[ClusterMetrics].ClusterName1\",\"mergedName\":\"ClusterName1\",\"fromId\":\"unknown\"},{\"originalName\":\"[ClusterMetrics].ClusterName2\",\"mergedName\":\"ClusterName2\",\"fromId\":\"unknown\"},{\"originalName\":\"[ClusterMetrics].ClusterName3\",\"mergedName\":\"ClusterName3\",\"fromId\":\"unknown\"},{\"originalName\":\"[ClusterResourceInfo].name\"},{\"originalName\":\"[ClusterMetrics].ClusterName\"}]}",
                    "size": 0,
                    "queryType": 7,
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "ClusterName",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": "Resource",
                            "subTarget": "azuremonitor",
                            "showIcon": true,
                            "customColumnWidthSetting": "40.8571ch"
                          }
                        },
                        {
                          "columnMatch": "CPUUsagePercentage",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "<",
                                "thresholdValue": "60",
                                "representation": "success",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "<",
                                "thresholdValue": "80",
                                "representation": "2",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "<",
                                "thresholdValue": "101",
                                "representation": "4",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "2",
                                "text": "ValueMissing"
                              }
                            ]
                          },
                          "numberFormat": {
                            "unit": 1,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false,
                              "maximumFractionDigits": 2
                            }
                          }
                        },
                        {
                          "columnMatch": "MemoryUsagePercentage",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "<",
                                "thresholdValue": "60",
                                "representation": "success",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "<",
                                "thresholdValue": "80",
                                "representation": "2",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "<",
                                "thresholdValue": "101",
                                "representation": "critical",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "2",
                                "text": "ValueMissing"
                              }
                            ]
                          },
                          "numberFormat": {
                            "unit": 1,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false,
                              "maximumFractionDigits": 2
                            }
                          }
                        },
                        {
                          "columnMatch": "DiskUsagePercentage",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": "<",
                                "thresholdValue": "60",
                                "representation": "success",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "<",
                                "thresholdValue": "80",
                                "representation": "2",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "<",
                                "thresholdValue": "101",
                                "representation": "4",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": "2",
                                "text": "ValueMissing"
                              }
                            ]
                          },
                          "numberFormat": {
                            "unit": 1,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false,
                              "maximumFractionDigits": 2
                            }
                          }
                        },
                        {
                          "columnMatch": "DiskPercentUsed",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 1,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false,
                              "maximumFractionDigits": 2
                            }
                          }
                        },
                        {
                          "columnMatch": "FreeMemoryBytes",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 2,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false
                            }
                          }
                        }
                      ],
                      "sortBy": [
                        {
                          "itemKey": "ClusterType",
                          "sortOrder": 1
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "ClusterType",
                        "sortOrder": 1
                      }
                    ]
                  },
                  "showPin": false,
                  "name": "query - 2"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "tab",
                "comparison": "isEqualTo",
                "value": "Overview"
              },
              {
                "parameterName": "overview_usage",
                "comparison": "isEqualTo",
                "value": "present"
              }
            ],
            "name": "Overview"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "f4876210-223e-4af9-b8a0-6c14579746e5",
                        "cellValue": "kafka_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Kafka Overview",
                        "subTarget": "Overview",
                        "style": "link"
                      },
                      {
                        "id": "8189d0e6-79b4-4f24-ae28-58d5658a58e6",
                        "cellValue": "kafka_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Kafka Graphs",
                        "subTarget": "Graphs",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "links - 2"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where TimeGenerated {TimeRange}\r\n| distinct ClusterName, HostName\r\n| count\r\n| extend TimeGenerated = now()\r\n| extend Name = \"BrokerCount\"",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "Count",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              }
                            },
                            "showBorder": false,
                            "sortCriteriaField": "Count"
                          }
                        },
                        "customWidth": "25",
                        "name": "query - 1"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where TimeGenerated {TimeRange}\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, HostName\r\n| summarize PartitionCount = sum(PartitionCount) by bin(TimeGenerated, 5m)\r\n| sort by TimeGenerated desc\r\n| take 1\r\n| extend Name = \"PartitionCount\"",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "PartitionCount",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              }
                            },
                            "showBorder": false,
                            "sortCriteriaField": "Count"
                          }
                        },
                        "customWidth": "25",
                        "name": "Partition Count"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where TimeGenerated {TimeRange}\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, HostName\r\n| summarize UnderreplicatedPartitions = sum(UnderReplicatedPartitions) by bin(TimeGenerated, {TimeRange:grain})\r\n| extend Name = \"UnderreplicatedPartitions\"\r\n| sort by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "UnderreplicatedPartitions",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              }
                            },
                            "showBorder": false,
                            "sortCriteriaField": "Count"
                          }
                        },
                        "customWidth": "25",
                        "name": "query - 1 - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where TimeGenerated {TimeRange}\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, HostName\r\n| summarize OfflinePartitions = sum(OfflinePartitionsCount) by bin(TimeGenerated, 5m)\r\n| sort by TimeGenerated desc\r\n| take 1\r\n| extend Name = \"OfflinePartitions\"",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "OfflinePartitions",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              }
                            },
                            "showBorder": false,
                            "sortCriteriaField": "Count"
                          }
                        },
                        "customWidth": "25",
                        "name": "Offline Partitions"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where TimeGenerated {TimeRange}\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, HostName\r\n| summarize BytesInPerSec = sum(BytesInPerSec) by bin(TimeGenerated, {TimeRange:grain})\r\n| sort by TimeGenerated desc\r\n| take 1\r\n| extend Name = \"BytesInPerSec\"",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "BytesInPerSec",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              },
                              "numberFormat": {
                                "unit": 11,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false
                                }
                              }
                            },
                            "showBorder": false,
                            "sortCriteriaField": "Count"
                          }
                        },
                        "customWidth": "25",
                        "name": "BytesInPerSec"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where TimeGenerated {TimeRange}\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, HostName\r\n| summarize BytesOutPerSec = sum(BytesOutPerSec) by bin(TimeGenerated, {TimeRange:grain})\r\n| sort by TimeGenerated desc\r\n| take 1\r\n| extend Name = \"BytesOutPerSec\"",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "BytesOutPerSec",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              },
                              "numberFormat": {
                                "unit": 11,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false
                                }
                              }
                            },
                            "showBorder": false,
                            "sortCriteriaField": "Count"
                          }
                        },
                        "customWidth": "25",
                        "name": "BytesInPerSec - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where TimeGenerated {TimeRange}\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, HostName\r\n| summarize OfflineLogDirectories = sum(OfflineLogDirectoryCount) by bin(TimeGenerated, {TimeRange:grain})\r\n| sort by TimeGenerated\r\n| take 1\r\n| extend Name = \"OfflineLogDirectories\"",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "OfflineLogDirectories",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              },
                              "numberFormat": {
                                "unit": 0,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false
                                }
                              }
                            },
                            "showBorder": false,
                            "sortCriteriaField": "Count"
                          }
                        },
                        "customWidth": "25",
                        "name": "BytesInPerSec - Copy - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where TimeGenerated {TimeRange}\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, HostName\r\n| summarize UncleanLeaderElectionsPerSec = sum(UncleanLeaderElectionsPerSec) by bin(TimeGenerated, {TimeRange:grain})\r\n| sort by TimeGenerated desc\r\n| take 1\r\n| extend Name = \"UncleanLeaderElectionsPerSec\"",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "UncleanLeaderElectionsPerSec",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              },
                              "numberFormat": {
                                "unit": 31,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false
                                }
                              }
                            },
                            "showBorder": false,
                            "sortCriteriaField": "Count"
                          }
                        },
                        "customWidth": "25",
                        "name": "UncleanLeaderElectionsPerSec"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated,*) by ClusterName, HostName\r\n| summarize ActiveControllerCount = sum(ActiveControllerCount),  LeaderCount = sum(LeaderCount), PartitionCount = sum(PartitionCount), UnderReplicatedPartitions = sum(UnderReplicatedPartitions), OfflinePartitions = sum(OfflinePartitionsCount), OfflineLogDirectories = sum(OfflineLogDirectoryCount), BytesInPerSec = sum(BytesInPerSec), BytesOutPerSec = sum(BytesOutPerSec) by ClusterName\r\n",
                          "size": 0,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ]
                        },
                        "name": "query - 0"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "kafka_tab",
                    "comparison": "isEqualTo",
                    "value": "Overview"
                  },
                  "name": "Kafka Overview"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where MetricName == \"BytesInPerSec\"\r\n| summarize BytesInPerSec = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Bytes In Per Second",
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "Bytes In"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where MetricName == \"BytesOutPerSec\"\r\n| summarize BytesOutPerSec = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Bytes Out Per Second",
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "Bytes Out Per Second"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where MetricName == \"UnderReplicatedPartitions\"\r\n| summarize UnderReplicatedPartitions = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Underreplicated Partitions",
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "Underreplicated Partitions"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where MetricName == \"LeaderCount\"\r\n| summarize LeaderCount = sum(MetricValue) by ClusterName, bin(TimeGenerated, 1m)\r\n",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Leader Count",
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "Leader Count"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightKafkaMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where MetricName == \"OfflinePartitionsCount\"\r\n| summarize OfflinePartitions = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                          "size": 0,
                          "aggregation": 5,
                          "showAnalytics": true,
                          "title": "Offline Partitions",
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "linechart"
                        },
                        "customWidth": "50",
                        "name": "Offline Partitions"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "kafka_tab",
                    "comparison": "isEqualTo",
                    "value": "Graphs"
                  },
                  "name": "Kafka Graphs"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "tab",
                "comparison": "isEqualTo",
                "value": "Kafka"
              },
              {
                "parameterName": "kafka_usage",
                "comparison": "isEqualTo",
                "value": "present"
              }
            ],
            "name": "Kafka"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "fa46844d-e503-4375-81d6-e87986013c4e",
                        "cellValue": "hbase_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "HBase Overview",
                        "subTarget": "HBaseOverview",
                        "style": "link"
                      },
                      {
                        "id": "4ec82fbd-f943-44bd-90db-d5769b31cd6a",
                        "cellValue": "hbase_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "HBase Graphs",
                        "subTarget": "HBaseGraphs",
                        "style": "link"
                      },
                      {
                        "id": "b3189be9-c1b9-4438-a968-443b16f0a9ef",
                        "cellValue": "hbase_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "YARN Overview",
                        "subTarget": "YARNOverview",
                        "style": "link"
                      },
                      {
                        "id": "383512ea-ddce-4da8-8138-bbc44b22ef9b",
                        "cellValue": "hbase_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "YARN Graphs",
                        "subTarget": "YARNGraphs",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "links - 5"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"numRegionServers\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName,HostName\r\n| summarize NumRegionServers = sum(MetricValue) by bin(TimeGenerated, 5m)\r\n| extend Name = \"NumRegionServers\"\r\n| sort by TimeGenerated desc\r\n| take 1\r\n",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "NumRegionServers",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "Number of Region Servers"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"numDeadRegionServers\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName,HostName\r\n| summarize DeadRegionServers = sum(MetricValue) by bin(TimeGenerated, 5m)\r\n| extend Name = \"DeadRegionServers\"\r\n| sort by TimeGenerated desc\r\n| take 1\r\n",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "DeadRegionServers",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "Number of Region Servers - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"regionCount\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName,HostName\r\n| summarize NumRegions = sum(MetricValue) by bin(TimeGenerated, 5m)\r\n| extend Name = \"NumRegions\"\r\n| sort by TimeGenerated desc\r\n| take 1\r\n",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "NumRegions",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "Number of Region Servers - Copy - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"writtenBytes\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName,HostName\r\n| summarize WrittenBytes = sum(MetricValue) by bin(TimeGenerated, 5m)\r\n| extend Name = \"WrittenBytes\"\r\n| sort by TimeGenerated desc\r\n| take 1\r\n",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "WrittenBytes",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              },
                              "numberFormat": {
                                "unit": 2,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "Number of Region Servers - Copy - Copy - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=Server\"\r\n| where MetricName == \"numRegionServers\" or MetricName == \"numDeadRegionServers\"\r\n| evaluate pivot(MetricName, avg(MetricValue), ClusterName, HostName, TimeGenerated, Tags)\r\n| summarize arg_max(TimeGenerated,*) by ClusterName, HostName\r\n| extend TagsJson = parse_json(Tags)\r\n| where TagsJson[\"tag.isActiveMaster\"] == true\r\n| summarize NumberOfRegionServers = avg(numRegionServers), NumberOfDeadRegionServers = avg(numDeadRegionServers) by ClusterName\r\n| join (HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName == \"regionCount\" or MetricName == \"hlogFileCount\" or  MetricName == \"storeFileCount\" or  MetricName == \"blockCacheCountHitPercent\" or  MetricName == \"readRequestCount\" or MetricName == \"writeRequestCount\"\r\n| evaluate pivot(MetricName, avg(MetricValue), ClusterName, HostName, TimeGenerated)\r\n| summarize arg_max(TimeGenerated,*) by ClusterName, HostName\r\n| summarize RegionCount = sum(regionCount), HLogFileCount = sum(hlogFileCount), StoreFileCount = sum(storeFileCount), BlockCacheHitPercent = avg(blockCacheCountHitPercent), ReadRequestCount = sum(readRequestCount), WriteRequestCount = sum(writeRequestCount) by ClusterName)\r\non ClusterName\r\n| project ClusterName, NumberOfRegionServers, NumberOfDeadRegionServers, RegionCount, HLogFileCount, BlockCacheHitPercent, ReadRequestCount, WriteRequestCount\r\n \r\n\r\n\r\n\r\n\r\n",
                          "size": 0,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "BlockCacheHitPercent",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 1,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": false,
                                    "maximumFractionDigits": 2
                                  }
                                }
                              }
                            ]
                          }
                        },
                        "name": "query - 4"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hbase_tab",
                      "comparison": "isEqualTo",
                      "value": "HBaseOverview"
                    },
                    {
                      "parameterName": "hbase_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "HBase Overview"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "60e0a752-2ec0-456b-9454-7c744e658854",
                              "cellValue": "hbase_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Health",
                              "subTarget": "Health",
                              "style": "link"
                            },
                            {
                              "id": "db7355f0-4a37-4ac4-b947-918b87739040",
                              "cellValue": "hbase_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Applications",
                              "subTarget": "Applications",
                              "style": "link"
                            },
                            {
                              "id": "94089044-ae86-4da5-a494-4fc6f699dda8",
                              "cellValue": "hbase_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Containers",
                              "subTarget": "Containers",
                              "style": "link"
                            },
                            {
                              "id": "b4196ec9-ab6f-42aa-a21c-2919c00659b7",
                              "cellValue": "hbase_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Memory",
                              "subTarget": "Memory",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 2"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsPending\"\r\n| summarize NumAppsPending = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Pending",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsFailed\"\r\n| summarize NumAppsFailed = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Failed",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsKilled\"\r\n| summarize NumAppsKilled = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Killed",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsSubmitted\"\r\n| summarize NumAppsSubmitted = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Submitted",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsRunning\"\r\n| summarize NumAppsRunning = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Running",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsCompleted\"\r\n| summarize NumAppsCOmpleted = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Completed",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy - Copy - Copy - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Applications"
                        },
                        "name": "Applications"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"ContainersRunning\"\r\n| summarize ContainersRunning = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Running Containers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"PendingContainers\"\r\n| summarize PendingContainers = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Pending Containers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where  ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"AllocatedContainers\"\r\n| summarize AllocatedContainers = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Allocated Containers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"PendingContainers\"\r\n| summarize PendingContainers = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Pending Containers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Containers"
                        },
                        "name": "Containers"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where HostName startswith(\"hn\")\r\n| evaluate pivot(MetricName, max(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize ClusterMemoryAvailable = avg(AvailableMB) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Cluster Memory Available",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "xAxis": "TimeGenerated",
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 4,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where  ClusterType == tolower(\"{tab}\")\r\n| where HostName startswith(\"hn\")\r\n| evaluate pivot(MetricName, max(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize ClusterMemoryAllocated = avg(AllocatedMB) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Cluster Memory Allocated",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "xAxis": "TimeGenerated",
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 4,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Memory"
                        },
                        "name": "Memory"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"NumUnhealthyNMs\"\r\n| summarize NumUnhealthyNMs = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Unhealthy Node Managers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"NumActiveNMs\"\r\n| summarize NumActiveNMs = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Active Node Managers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Health"
                        },
                        "name": "Health - Copy"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hbase_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNGraphs"
                    },
                    {
                      "parameterName": "hbase_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "YARN Graphs"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightHadoopAndYarnMetrics\r\n| where  ClusterType == tolower(\"{tab}\")\r\n| where HostName startswith(\"hn\")\r\n| evaluate pivot(MetricName, max(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated,*) by ClusterName\r\n| summarize NumActiveNMs = sum(NumActiveNMs), NumUnhealthyNMs = sum(NumUnhealthyNMs),AppsRunning = sum(AppsRunning), AppsFailed = sum(AppsFailed), ClusterMemoryAvailable = sum(AvailableMB), ResourceManagerHeapUsage = sum(MemHeapUsedM) by ClusterName\r\n| project ClusterName, NumActiveNMs, NumUnhealthyNMs,AppsRunning, AppsFailed, ClusterMemoryAvailable \r\n",
                    "size": 0,
                    "showAnalytics": true,
                    "timeContext": {
                      "durationMs": 3600000
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "NumActiveNMs",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "23.7143ch"
                          }
                        },
                        {
                          "columnMatch": "NumUnhealthyNMs",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "27.2857ch"
                          }
                        },
                        {
                          "columnMatch": "ClusterMemoryAvailable",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 4,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false
                            }
                          }
                        },
                        {
                          "columnMatch": "ResourceManagerHeapUsage",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 4,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hbase_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNOverview"
                    },
                    {
                      "parameterName": "hbase_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "YARN Overview"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "fa5a3487-052d-4c2d-94e3-ceaae3b7ec68",
                              "cellValue": "hbase_graphs_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Region Servers",
                              "subTarget": "RegionServers",
                              "preText": "Region Servers",
                              "style": "link"
                            },
                            {
                              "id": "ffdf4719-4992-4d72-9dee-ba88a54c1ce7",
                              "cellValue": "hbase_graphs_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Requests",
                              "subTarget": "Requests",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 1"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "Region Servers",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=Server\"\r\n| where MetricName == \"numRegionServers\"\r\n| extend TagsJson = parse_json(Tags)\r\n| where TagsJson[\"tag.isActiveMaster\"] == true\r\n| summarize numRegionServers=avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})\r\n\r\n\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Region Servers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=Master,sub=Server\"\r\n| where MetricName == \"numDeadRegionServers\"\r\n| extend TagsJson = parse_json(Tags)\r\n| where TagsJson[\"tag.isActiveMaster\"] == true\r\n| summarize numDeadRegionServers=avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})\r\n\r\n\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Dead Region Servers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName == \"hlogFileCount\"\r\n| summarize hlogFileCount=sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})\r\n\r\n\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "HLog File Count",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName == \"storeFileCount\"\r\n| summarize storeFileCount=sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})\r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Store File Count",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName == \"blockCacheCountHitPercent\"\r\n| summarize blockCacheCountHitPercent=avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Average Block Cache Hit Percent",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "xAxis": "TimeGenerated",
                                  "yAxis": [
                                    "blockCacheCountHitPercent"
                                  ],
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 1,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true,
                                        "maximumFractionDigits": 2
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "query - 0 - Copy - Copy - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_graphs_tab",
                          "comparison": "isEqualTo",
                          "value": "RegionServers"
                        },
                        "name": "Region Servers"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "title": "Requests",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName == \"readRequestCount\"\r\n| summarize readRequestCount=sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Read Request Count",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName == \"writeRequestCount\"\r\n| summarize writeRequestCount=sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Write Request Count",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricNamespace == \"Hadoop:service=HBase,name=RegionServer,sub=Server\"\r\n| where MetricName == \"totalRequestCount\"\r\n| summarize totalRequestCount=sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Total Request Count",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHBaseMetrics\r\n| where MetricName == \"SyncTime_95th_percentile\"\r\n| summarize WALSyncTime=sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "95th Percentile Sync Time",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "xAxis": "WALSyncTime",
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 23,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_graphs_tab",
                          "comparison": "isEqualTo",
                          "value": "Requests"
                        },
                        "name": "Requests"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hbase_tab",
                      "comparison": "isEqualTo",
                      "value": "HBaseGraphs"
                    },
                    {
                      "parameterName": "hbase_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "HBase Graphs"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No HBase logs or metrics were detected in Log Analytics workspaces for the clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hbase_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    },
                    {
                      "parameterName": "tab",
                      "comparison": "isEqualTo",
                      "value": "HBase"
                    },
                    {
                      "parameterName": "hbase_tab",
                      "comparison": "isEqualTo",
                      "value": "HBaseOverview"
                    }
                  ],
                  "name": "NoHBaseOverview Usage"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No HBase logs or metrics were detected in Log Analytics workspaces for the clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hbase_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    },
                    {
                      "parameterName": "tab",
                      "comparison": "isEqualTo",
                      "value": "HBase"
                    },
                    {
                      "parameterName": "hbase_tab",
                      "comparison": "isEqualTo",
                      "value": "HBaseGraphs"
                    }
                  ],
                  "name": "NoHBaseGraph Usage"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No YARN logs or metrics were detected in Log Analytics workspaces for the HBase clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hbase_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    },
                    {
                      "parameterName": "tab",
                      "comparison": "isEqualTo",
                      "value": "HBase"
                    },
                    {
                      "parameterName": "hbase_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNOverview"
                    }
                  ],
                  "name": "NoHBaseYarnOverview  usage"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No YARN logs or metrics were detected in Log Analytics workspaces for the HBase clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hbase_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    },
                    {
                      "parameterName": "tab",
                      "comparison": "isEqualTo",
                      "value": "HBase"
                    },
                    {
                      "parameterName": "hbase_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNGraphs"
                    }
                  ],
                  "name": "NoHBaseYarnGraphs usage"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "HBase"
            },
            "name": "HBase"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightStormTopologyMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where Status == \"ACTIVE\" and TimeGenerated > ago(30m)\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, TopologyId\r\n| count\r\n",
                    "size": 4,
                    "showAnalytics": true,
                    "title": "Active Topologies",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {},
                      "leftContent": {
                        "columnMatch": "Count",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "blue"
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "25",
                  "name": "query - 0"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightStormTopologyMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where Status == \"ACTIVE\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, TopologyId\r\n| summarize sum(WorkersTotal) by ClusterType\r\n",
                    "size": 4,
                    "showAnalytics": true,
                    "title": "Total Workers",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {},
                      "leftContent": {
                        "columnMatch": "sum_WorkersTotal",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "blue"
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "25",
                  "name": "query - 0 - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightStormTopologyMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where Status == \"ACTIVE\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, TopologyId\r\n| summarize sum(ExecutorsTotal) by ClusterType\r\n",
                    "size": 4,
                    "showAnalytics": true,
                    "title": "Total Executors",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {},
                      "leftContent": {
                        "columnMatch": "sum_ExecutorsTotal",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "blue"
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "25",
                  "name": "query - 0 - Copy - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightStormTopologyMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where Status == \"ACTIVE\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, TopologyId\r\n| summarize sum(TasksTotal) by ClusterType\r\n",
                    "size": 4,
                    "showAnalytics": true,
                    "title": "Total Tasks",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {},
                      "leftContent": {
                        "columnMatch": "sum_TasksTotal",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "blue"
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "25",
                  "name": "query - 0 - Copy - Copy - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightStormTopologyMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where  InstanceName == \"bolt\" \r\n| summarize arg_max(TimeGenerated,*) by ClusterName, TopologyId, BoltId\r\n| summarize Acked = sum(Acked) by bin(TimeGenerated, {TimeRange:grain})\r\n| sort by TimeGenerated desc\r\n| take 1\r\n",
                    "size": 4,
                    "showAnalytics": true,
                    "title": "Acked",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {},
                      "leftContent": {
                        "columnMatch": "Acked",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "blue"
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "25",
                  "name": "query - 0 - Copy - Copy - Copy - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightStormTopologyMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where  InstanceName == \"topology_stats\" and Id == \":all-time\"\r\n| summarize arg_max(TimeGenerated,*) by ClusterName, TopologyId\r\n| summarize Emitted = sum(Emitted) by bin(TimeGenerated, {TimeRange:grain})\r\n| sort by TimeGenerated desc\r\n| take 1\r\n",
                    "size": 4,
                    "showAnalytics": true,
                    "title": "Emitted",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {},
                      "leftContent": {
                        "columnMatch": "Emitted",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "blue"
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "25",
                  "name": "query - 0 - Copy - Copy - Copy - Copy - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightStormTopologyMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where  InstanceName == \"topology_stats\" and Id == \":all-time\"\r\n| summarize arg_max(TimeGenerated,*) by ClusterName, TopologyId\r\n| summarize Transferred = sum(Transferred) by bin(TimeGenerated, {TimeRange:grain})\r\n| sort by TimeGenerated desc\r\n| take 1\r\n",
                    "size": 4,
                    "showAnalytics": true,
                    "title": "Transferred",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {},
                      "leftContent": {
                        "columnMatch": "Transferred",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "blue"
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "25",
                  "name": "query - 0 - Copy - Copy - Copy - Copy - Copy - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightStormTopologyMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where  InstanceName == \"topology_stats\" and Id == \":all-time\"\r\n| summarize arg_max(TimeGenerated,*) by ClusterName, TopologyId\r\n| summarize Failed = sum(Failed) by bin(TimeGenerated, {TimeRange:grain})\r\n| sort by TimeGenerated desc\r\n| take 1\r\n",
                    "size": 4,
                    "showAnalytics": true,
                    "title": "Failed",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {},
                      "leftContent": {
                        "columnMatch": "Failed",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "blue"
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "25",
                  "name": "query - 0 - Copy - Copy - Copy - Copy - Copy - Copy - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightStormTopologyMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where Status == \"ACTIVE\" and TimeGenerated {TimeRange}\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, TopologyId\r\n| summarize TopologyCount=count(TopologyId),WorkersTotal = sum(WorkersTotal), ExecutorsTotal = sum(ExecutorsTotal), TasksTotal = sum(TasksTotal), AssignedTotalMemMB = sum(AssignedTotalMemMB) by ClusterName\r\n| project  ClusterName, TopologyCount, WorkersTotal, ExecutorsTotal, TasksTotal, AssignedTotalMemMB\r\n| join kind=fullouter (HDInsightStormMetrics\r\n| distinct ClusterName)\r\non ClusterName\r\n| extend TopologyCount = iff(isempty(TopologyCount), 0, tolong(TopologyCount))\r\n| extend WorkersTotal = iff(isempty(WorkersTotal), 0, tolong(WorkersTotal))\r\n| extend ExecutorsTotal = iff(isempty(ExecutorsTotal), 0, tolong(ExecutorsTotal))\r\n| extend TasksTotal = iff(isempty(TasksTotal),0, tolong(TasksTotal))\r\n| extend AssignedTotalMemMB = iff(isempty(AssignedTotalMemMB), 0, tolong(AssignedTotalMemMB))\r\n| extend ClusterName = ClusterName1\r\n| project ClusterName, TopologyCount, WorkersTotal, ExecutorsTotal, TasksTotal, AssignedTotalMemMB",
                    "size": 0,
                    "showAnalytics": true,
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "AssignedTotalMemMB",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 4,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false
                            }
                          }
                        }
                      ]
                    }
                  },
                  "name": "query - 6"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "tab",
                "comparison": "isEqualTo",
                "value": "Storm"
              },
              {
                "parameterName": "storm_usage",
                "comparison": "isEqualTo",
                "value": "present"
              }
            ],
            "name": "Storm"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "631987c0-5c41-4e8e-acbb-b9319b22c945",
                        "cellValue": "hive_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Hive Overview",
                        "subTarget": "HiveOverview",
                        "style": "link"
                      },
                      {
                        "id": "57193c0a-757d-40c8-b541-e2fcb8f5eb26",
                        "cellValue": "hive_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Hive Graphs",
                        "subTarget": "HiveGraphs",
                        "style": "link"
                      },
                      {
                        "id": "cf32c88c-d8e8-48c3-bb20-2f16519db6c8",
                        "cellValue": "hive_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "YARN Overview",
                        "subTarget": "YARNOverview",
                        "style": "link"
                      },
                      {
                        "id": "625685ff-520d-4e7d-afc2-96c9e24ef630",
                        "cellValue": "hive_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "YARN Graphs",
                        "subTarget": "YARNGraphs",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "links - 1"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where HostName contains \"wn\"\r\n| evaluate pivot(MetricName, avg(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated,*) by ClusterName, HostName\r\n| summarize TotalExecutors=sum(NumExecutors), TotalAvailableExecutors=sum(ExecutorNumExecutorsAvailable), AvgExecutorFreeSlots=avg(ExecutorAvailableFreeSlotsPercent), TotalExecutorMemory=sum(ExecutorMemoryPerInstance), TotalCacheMemory=sum(ExecutorCacheMemoryPerInstance), AvgFreeCacheCapacity=avg(CacheCapacityRemainingPercentage), AvgCacheHitRatio=avg(CacheHitRatio), TotalJvmMemory=sum(ExecutorJvmMaxMemory) by ClusterName\r\n\r\n",
                          "size": 0,
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "AvgExecutorFreeSlots",
                                "formatter": 8,
                                "formatOptions": {
                                  "min": 0,
                                  "max": 1,
                                  "palette": "redGreen"
                                },
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "percent",
                                    "useGrouping": false
                                  }
                                }
                              },
                              {
                                "columnMatch": "TotalExecutorMemory",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 2,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "TotalCacheMemory",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 2,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "AvgFreeCacheCapacity",
                                "formatter": 8,
                                "formatOptions": {
                                  "min": 0,
                                  "max": 1,
                                  "palette": "redGreen"
                                },
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "percent"
                                  }
                                }
                              },
                              {
                                "columnMatch": "AvgCacheHitRatio",
                                "formatter": 8,
                                "formatOptions": {
                                  "min": 0,
                                  "max": 1,
                                  "palette": "redGreen"
                                },
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "percent"
                                  }
                                }
                              },
                              {
                                "columnMatch": "TotalJvmMemory",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 2,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              }
                            ]
                          },
                          "sortBy": []
                        },
                        "name": "query - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hive_tab",
                      "comparison": "isEqualTo",
                      "value": "HiveOverview"
                    },
                    {
                      "parameterName": "hive_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "Hive Overview"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "5a3e9351-cf2c-4c40-a0ed-28ca81129487",
                              "cellValue": "hive_graphs_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Executors",
                              "subTarget": "Executors",
                              "style": "link"
                            },
                            {
                              "id": "9b100e84-a02f-487a-ac3e-145bcde766b7",
                              "cellValue": "hive_graphs_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Cache",
                              "subTarget": "Cache",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 3"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHiveAndLLAPMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where HostName contains \"wn\" and MetricName == \"NumExecutors\"\r\n| summarize TotalExecutors=sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "title": "Total Executors",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHiveAndLLAPMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where HostName contains \"wn\" and MetricName == \"ExecutorNumExecutorsAvailable\"\r\n| summarize ExecutorsAvailable=sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "title": "Available Executors",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHiveAndLLAPMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where HostName contains \"wn\" and MetricName == \"ExecutorAvailableFreeSlotsPercent\"\r\n| summarize AverageExecutorFreeSlotPercent=avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "title": "Available Executors Slots Percentage",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 0,
                                      "options": {
                                        "style": "percent",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHiveAndLLAPMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where HostName contains \"wn\" and MetricName == \"ExecutorMemoryPerInstance\"\r\n| summarize TotalExecutorMemory=avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "title": "Total Executor Memory",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 2,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hive_graphs_tab",
                          "comparison": "isEqualTo",
                          "value": "Executors"
                        },
                        "name": "Executors"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHiveAndLLAPMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where HostName contains \"wn\" and MetricName == \"ExecutorCacheMemoryPerInstance\"\r\n| summarize sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "title": "Total Cache Memory",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 2,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true,
                                        "maximumFractionDigits": 2
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "Total Cache Memory"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHiveAndLLAPMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where HostName contains \"wn\" and MetricName == \"CacheCapacityRemainingPercentage\"\r\n| summarize avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "title": "Average Free Cache Percentage",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 0,
                                      "options": {
                                        "style": "percent",
                                        "useGrouping": true,
                                        "maximumFractionDigits": 2
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHiveAndLLAPMetrics\r\n| where _ResourceId in~ ({Clusters})\r\n| where HostName contains \"wn\" and MetricName == \"CacheHitRatio\"\r\n| summarize avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})\r\n\r\n\r\n",
                                "size": 0,
                                "aggregation": 5,
                                "title": "Average Cache Hit Percentage",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 0,
                                      "options": {
                                        "style": "percent",
                                        "useGrouping": true,
                                        "maximumFractionDigits": 2
                                      }
                                    }
                                  }
                                }
                              },
                              "name": "query - 0 - Copy - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hive_graphs_tab",
                          "comparison": "isEqualTo",
                          "value": "Cache"
                        },
                        "name": "Cache"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hive_tab",
                      "comparison": "isEqualTo",
                      "value": "HiveGraphs"
                    },
                    {
                      "parameterName": "hive_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "Hive Graphs"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "HDInsightHadoopAndYarnMetrics\r\n| where  (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where HostName startswith(\"hn\")\r\n| evaluate pivot(MetricName, max(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated,*) by ClusterName\r\n| summarize NumActiveNMs = sum(NumActiveNMs), NumUnhealthyNMs = sum(NumUnhealthyNMs),AppsRunning = sum(AppsRunning), AppsFailed = sum(AppsFailed), ClusterMemoryAvailable = sum(AvailableMB), ResourceManagerHeapUsage = sum(MemHeapUsedM) by ClusterName\r\n| project ClusterName, NumActiveNMs, NumUnhealthyNMs,AppsRunning, AppsFailed, ClusterMemoryAvailable \r\n",
                    "size": 0,
                    "showAnalytics": true,
                    "timeContext": {
                      "durationMs": 3600000
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "NumActiveNMs",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "21.5714ch"
                          }
                        },
                        {
                          "columnMatch": "NumUnhealthyNMs",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "24.1429ch"
                          }
                        },
                        {
                          "columnMatch": "ClusterMemoryAvailable",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 4,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false
                            }
                          }
                        },
                        {
                          "columnMatch": "ResourceManagerHeapUsage",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 4,
                            "options": {
                              "style": "decimal"
                            }
                          }
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hive_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNOverview"
                    },
                    {
                      "parameterName": "hive_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "YARN Overview - Copy"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "60e0a752-2ec0-456b-9454-7c744e658854",
                              "cellValue": "hbase_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Health",
                              "subTarget": "Health",
                              "style": "link"
                            },
                            {
                              "id": "db7355f0-4a37-4ac4-b947-918b87739040",
                              "cellValue": "hbase_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Applications",
                              "subTarget": "Applications",
                              "style": "link"
                            },
                            {
                              "id": "94089044-ae86-4da5-a494-4fc6f699dda8",
                              "cellValue": "hbase_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Containers",
                              "subTarget": "Containers",
                              "style": "link"
                            },
                            {
                              "id": "b4196ec9-ab6f-42aa-a21c-2919c00659b7",
                              "cellValue": "hbase_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Memory",
                              "subTarget": "Memory",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 2"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where  (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsPending\"\r\n| summarize NumAppsPending = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Pending",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsFailed\"\r\n| summarize NumAppsFailed = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Failed",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsKilled\"\r\n| summarize NumAppsKilled = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Killed",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsSubmitted\"\r\n| summarize NumAppsSubmitted = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Submitted",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsRunning\"\r\n| summarize NumAppsRunning = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Running",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsCompleted\"\r\n| summarize NumAppsCOmpleted = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Completed",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy - Copy - Copy - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Applications"
                        },
                        "name": "Applications"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricName == \"ContainersRunning\"\r\n| summarize ContainersRunning = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Running Containers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricName == \"PendingContainers\"\r\n| summarize PendingContainers = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Pending Containers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where  (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricName == \"AllocatedContainers\"\r\n| summarize AllocatedContainers = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Allocated Containers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricName == \"PendingContainers\"\r\n| summarize PendingContainers = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Pending Containers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Containers"
                        },
                        "name": "Containers"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where HostName startswith(\"hn\")\r\n| evaluate pivot(MetricName, max(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize ClusterMemoryAvailable = avg(AvailableMB) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Cluster Memory Available",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "xAxis": "TimeGenerated",
                                  "yAxis": [
                                    "ClusterMemoryAvailable"
                                  ],
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 4,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where HostName startswith(\"hn\")\r\n| evaluate pivot(MetricName, max(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize ClusterMemoryAllocated = avg(AllocatedMB) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Cluster Memory Allocated",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "xAxis": "TimeGenerated",
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 4,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Memory"
                        },
                        "name": "Memory"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricName == \"NumUnhealthyNMs\"\r\n| summarize NumUnhealthyNMs = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Unhealthy Node Managers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where (ClusterType == \"interactivehive\" or ClusterType == \"hadoop\")\r\n| where MetricName == \"NumActiveNMs\"\r\n| summarize NumActiveNMs = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Active Node Managers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "hbase_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Health"
                        },
                        "name": "Health - Copy"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "hive_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNGraphs"
                    },
                    {
                      "parameterName": "hive_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "YARN Graphs - Copy"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No Hive logs or metrics were detected in Log Analytics workspaces for the clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.  Note that Hive metrics are not supported for ESP clusters.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "tab",
                      "comparison": "isEqualTo",
                      "value": "Hive"
                    },
                    {
                      "parameterName": "hive_tab",
                      "comparison": "isEqualTo",
                      "value": "HiveOverview"
                    },
                    {
                      "parameterName": "hive_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    }
                  ],
                  "name": "No Hive Overview  Usage"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No Hive logs or metrics were detected in Log Analytics workspaces for the clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters. Note that Hive metrics are not supported for ESP clusters.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "tab",
                      "comparison": "isEqualTo",
                      "value": "Hive"
                    },
                    {
                      "parameterName": "hive_tab",
                      "comparison": "isEqualTo",
                      "value": "HiveGraphs"
                    },
                    {
                      "parameterName": "hive_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    }
                  ],
                  "name": "No Hive Graphs Usage"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No YARN logs or metrics were detected in Log Analytics workspaces for the Hadoop and Interactive Hive clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "tab",
                      "comparison": "isEqualTo",
                      "value": "Hive"
                    },
                    {
                      "parameterName": "hive_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    },
                    {
                      "parameterName": "hive_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNGraphs"
                    }
                  ],
                  "name": "No Hive YAarnGraphs Usage - Copy"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No YARN logs or metrics were detected in Log Analytics workspaces for the Hadoop and Interactive Hive clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "tab",
                      "comparison": "isEqualTo",
                      "value": "Hive"
                    },
                    {
                      "parameterName": "hive_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNOverview"
                    },
                    {
                      "parameterName": "hive_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    }
                  ],
                  "name": "No Hive YAarnOverview Usage "
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "Hive"
            },
            "name": "Hive "
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "8df3e9b7-63e5-4fea-8c31-943e30f9a4c6",
                        "cellValue": "spark_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "Spark Overview",
                        "subTarget": "SparkOverview",
                        "style": "link"
                      },
                      {
                        "id": "19daf7f4-2b0e-448a-8460-2b0fe2959546",
                        "cellValue": "spark_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "YARN Overview",
                        "subTarget": "YARNOverview",
                        "style": "link"
                      },
                      {
                        "id": "e63ddd4e-0456-419d-974a-e3779ae21f7e",
                        "cellValue": "spark_tab",
                        "linkTarget": "parameter",
                        "linkLabel": "YARN Graphs",
                        "subTarget": "YARNGraphs",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "links - 2"
                },
                {
                  "type": 9,
                  "content": {
                    "version": "KqlParameterItem/1.0",
                    "crossComponentResources": [
                      "{Clusters}"
                    ],
                    "parameters": [
                      {
                        "id": "561f35ef-6a21-41d8-851c-a3df793c5f9c",
                        "version": "KqlParameterItem/1.0",
                        "name": "spark_application_usage",
                        "type": 1,
                        "isRequired": true,
                        "query": "let hasNonEmptyTable = (T:string, T2:string) \r\n{ \r\n   toscalar( \r\n   union isfuzzy=true \r\n   ( table(T) |  take 1 | count as Count ),\r\n   ( table(T2) | where ClusterType == \"spark\"|  take 1 | count as Count),\r\n   (print Count=0) \r\n   | summarize sum(Count) \r\n   ) > 1\r\n};\r\nlet TableName = 'HDInsightSparkApplicationEvents';\r\nlet TableName2 = 'HDInsightHadoopAndYarnMetrics';\r\nprint  IsPresent=iif(hasNonEmptyTable(TableName,TableName2 ), \"present\", \"not present\")",
                        "crossComponentResources": [
                          "{Clusters}"
                        ],
                        "isHiddenWhenLocked": true,
                        "timeContext": {
                          "durationMs": 86400000
                        },
                        "queryType": 0,
                        "resourceType": "microsoft.hdinsight/clusters"
                      }
                    ],
                    "style": "pills",
                    "queryType": 0,
                    "resourceType": "microsoft.hdinsight/clusters"
                  },
                  "name": "parameters - 1"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightSparkApplicationEvents\r\n| summarize SubmittedApps = dcount(ApplicationId), CompletedApps=countif(isnotempty(CompletionTime)) by ClusterDnsName\r\n| join (HDInsightHadoopAndYarnMetrics\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\"  and (MetricName == \"AllocatedVCores\" or MetricName == \"AllocatedMB\" or  MetricName == \"AppsFailed\")\r\n| summarize arg_max(TimeGenerated, *) by ClusterName, MetricNamespace, MetricName\r\n| evaluate pivot (MetricName, sum(MetricValue), ClusterName))\r\non $left.ClusterDnsName == $right.ClusterName\r\n| extend SubmittedApps = iff(isempty(SubmittedApps), 0, tolong(SubmittedApps))\r\n| extend CompletedApps = iff(isempty(CompletedApps), 0, tolong(CompletedApps))\r\n| project ClusterName, SubmittedApps, CompletedApps, FailedApps=AppsFailed, AllocatedVCores, AllocatedMB",
                          "size": 0,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "AllocatedMB",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 4,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": false
                                  }
                                }
                              }
                            ]
                          }
                        },
                        "conditionalVisibility": {
                          "parameterName": "spark_application_usage",
                          "comparison": "isEqualTo",
                          "value": "present"
                        },
                        "name": "query - 4"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "spark_tab",
                    "comparison": "isEqualTo",
                    "value": "SparkOverview"
                  },
                  "name": "Spark Overview"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No YARN logs or metrics were detected in Log Analytics workspaces for the Spark clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "spark_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNOverview"
                    },
                    {
                      "parameterName": "spark_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    }
                  ],
                  "name": "Spark No YARN Overview Usage"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No YARN logs or metrics were detected in Log Analytics workspaces for the Spark clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "spark_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNGraphs"
                    },
                    {
                      "parameterName": "spark_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    }
                  ],
                  "name": "Spark No YARN Overview Usage - Copy"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "No Spark Application were detected in Log Analytics workspaces for the clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters. Spark Application logs only flow when applications have been run.",
                          "style": "warning"
                        },
                        "name": "text - 0"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "spark_application_usage",
                      "comparison": "isEqualTo",
                      "value": "not present"
                    },
                    {
                      "parameterName": "spark_tab",
                      "comparison": "isEqualTo",
                      "value": "SparkOverview"
                    }
                  ],
                  "name": "Spark No Application Usage - Copy"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"NumActiveNMs\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName\r\n| summarize NumActiveNMs = sum(MetricValue) by bin(TimeGenerated, {TimeRange:grain})\r\n| extend Name = \"NumActiveNMs\"\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "NumActiveNMs",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 17,
                                "options": {
                                  "style": "decimal",
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "query - 0"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where  ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"NumUnhealthyNMs\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName\r\n| summarize NumUnhealthyNMs = sum(MetricValue) by bin(TimeGenerated, {TimeRange:grain})\r\n| extend Name = \"NumUnhealthyNMs\"\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "NumUnhealthyNMs",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 17,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false,
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "query - 0 - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"AppsRunning\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName\r\n| summarize AppsRunning = sum(MetricValue) by bin(TimeGenerated, {TimeRange:grain})\r\n| extend Name = \"AppsRunning\"\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "AppsRunning",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 17,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false,
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "query - 0 - Copy - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"AppsFailed\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName\r\n| summarize AppsFailed = sum(MetricValue) by bin(TimeGenerated, {TimeRange:grain})\r\n| extend Name = \"AppsFailed\"\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "AppsFailed",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 17,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": false,
                                  "maximumFractionDigits": 2,
                                  "maximumSignificantDigits": 3
                                }
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "query - 0 - Copy - Copy - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where HostName startswith(\"hn\")\r\n| evaluate pivot(MetricName, max(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize arg_max(TimeGenerated,*) by ClusterName\r\n| summarize NumActiveNMs = sum(NumActiveNMs), NumUnhealthyNMs = sum(NumUnhealthyNMs),AppsRunning = sum(AppsRunning), AppsFailed = sum(AppsFailed), ClusterMemoryAvailable = sum(AvailableMB), ResourceManagerHeapUsage = sum(MemHeapUsedM) by ClusterName\r\n| project ClusterName, NumActiveNMs, NumUnhealthyNMs,AppsRunning, AppsFailed, ClusterMemoryAvailable \r\n",
                          "size": 0,
                          "showAnalytics": true,
                          "timeContext": {
                            "durationMs": 3600000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.hdinsight/clusters",
                          "crossComponentResources": [
                            "{Clusters}"
                          ],
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "ClusterMemoryAvailable",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 4,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": false
                                  }
                                }
                              },
                              {
                                "columnMatch": "ResourceManagerHeapUsage",
                                "formatter": 0,
                                "numberFormat": {
                                  "unit": 4,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              }
                            ]
                          }
                        },
                        "name": "query - 4"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "spark_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNOverview"
                    },
                    {
                      "parameterName": "spark_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "YARN"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "tabs",
                          "links": [
                            {
                              "id": "60e0a752-2ec0-456b-9454-7c744e658854",
                              "cellValue": "spark_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Health",
                              "subTarget": "Health",
                              "style": "link"
                            },
                            {
                              "id": "db7355f0-4a37-4ac4-b947-918b87739040",
                              "cellValue": "spark_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Applications",
                              "subTarget": "Applications",
                              "style": "link"
                            },
                            {
                              "id": "94089044-ae86-4da5-a494-4fc6f699dda8",
                              "cellValue": "spark_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Containers",
                              "subTarget": "Containers",
                              "style": "link"
                            },
                            {
                              "id": "b4196ec9-ab6f-42aa-a21c-2919c00659b7",
                              "cellValue": "spark_yarn_graph_tab",
                              "linkTarget": "parameter",
                              "linkLabel": "Memory",
                              "subTarget": "Memory",
                              "style": "link"
                            }
                          ]
                        },
                        "name": "links - 2"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"NumUnhealthyNMs\"\r\n| summarize NumUnhealthyNMs = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Unhealthy Node Managers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"NumActiveNMs\"\r\n| summarize NumActiveNMs = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Active Node Managers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "spark_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Health"
                        },
                        "name": "Health"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where  ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsPending\"\r\n| summarize NumAppsPending = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Pending",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsFailed\"\r\n| summarize NumAppsFailed = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Failed",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsKilled\"\r\n| summarize NumAppsKilled = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Killed",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsSubmitted\"\r\n| summarize NumAppsSubmitted = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Submitted",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsRunning\"\r\n| summarize NumAppsRunning = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Running",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy - Copy - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricNamespace != \"Hadoop:service=NodeManager,name=NodeManagerMetrics\" and MetricName == \"AppsCompleted\"\r\n| summarize NumAppsCOmpleted = sum(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Number of Apps Completed",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "Num Apps Query"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "spark_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Applications"
                        },
                        "name": "Applications"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where  ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"ContainersRunning\"\r\n| summarize ContainersRunning = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Running Containers",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"PendingContainers\"\r\n| summarize PendingContainers = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Pending Containers",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"AllocatedContainers\"\r\n| summarize AllocatedContainers = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Allocated Containers",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"PendingContainers\"\r\n| summarize PendingContainers = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Pending Containers",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy - Copy - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "spark_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Containers"
                        },
                        "name": "Containers"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where HostName startswith(\"hn\")\r\n| evaluate pivot(MetricName, max(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize ClusterMemoryAvailable = avg(AvailableMB) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Cluster Memory Available",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "xAxis": "TimeGenerated",
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 4,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where ClusterType == tolower(\"{tab}\")\r\n| where HostName startswith(\"hn\")\r\n| evaluate pivot(MetricName, max(MetricValue), TimeGenerated, ClusterName, HostName)\r\n| summarize ClusterMemoryAllocated = avg(AllocatedMB) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "showAnalytics": true,
                                "title": "Cluster Memory Allocated",
                                "timeContext": {
                                  "durationMs": 0
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart",
                                "chartSettings": {
                                  "xAxis": "TimeGenerated",
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 4,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "spark_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Memory"
                        },
                        "name": "Memory"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where _ResourceId in~ ({Clusters}) and ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"NumUnhealthyNMs\"\r\n| summarize NumUnhealthyNMs = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "title": "Number of Unhealthy Node Managers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "HDInsightHadoopAndYarnMetrics\r\n| where _ResourceId in~ ({Clusters}) and ClusterType == tolower(\"{tab}\")\r\n| where MetricName == \"NumActiveNMs\"\r\n| summarize NumActiveNMs = avg(MetricValue) by ClusterName, bin(TimeGenerated, {TimeRange:grain})",
                                "size": 0,
                                "aggregation": 5,
                                "title": "Number of Active Node Managers",
                                "timeContext": {
                                  "durationMs": 3600000
                                },
                                "timeContextFromParameter": "TimeRange",
                                "queryType": 0,
                                "resourceType": "microsoft.hdinsight/clusters",
                                "crossComponentResources": [
                                  "{Clusters}"
                                ],
                                "visualization": "linechart"
                              },
                              "customWidth": "50",
                              "name": "query - 0 - Copy"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "spark_yarn_graph_tab",
                          "comparison": "isEqualTo",
                          "value": "Health"
                        },
                        "name": "Health"
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "spark_tab",
                      "comparison": "isEqualTo",
                      "value": "YARNGraphs"
                    },
                    {
                      "parameterName": "spark_yarn_usage",
                      "comparison": "isEqualTo",
                      "value": "present"
                    }
                  ],
                  "name": "YARN Graphs"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where MetricName == \"NumActiveSources\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName\r\n| summarize NumActiveSources = sum(MetricValue) by bin(TimeGenerated, {TimeRange:grain})\r\n| extend Name = \"NumActiveSources\"\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "timeContext": {
                            "durationMs": 2419200000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "crossComponentResources": [
                            "{LogAnalyticsWorkspaces}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "NumActiveSources",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "query - 7"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where MetricName == \"NumActiveSinks\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName\r\n| summarize NumActiveSinks = sum(MetricValue) by bin(TimeGenerated, {TimeRange:grain})\r\n| extend Name = \"NumActiveSinks\"\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "timeContext": {
                            "durationMs": 2419200000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "crossComponentResources": [
                            "{LogAnalyticsWorkspaces}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "NumActiveSinks",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "query - 7 - Copy"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "HDInsightHiveAndLLAPMetrics\r\n| where MetricName == \"NumActiveSinks\"\r\n| summarize arg_max(TimeGenerated, *) by ClusterName\r\n| summarize NumActiveSinks = sum(MetricValue) by bin(TimeGenerated, {TimeRange:grain})\r\n| extend Name = \"NumActiveSinks\"\r\n| order by TimeGenerated desc\r\n| take 1",
                          "size": 4,
                          "timeContext": {
                            "durationMs": 2419200000
                          },
                          "timeContextFromParameter": "TimeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "crossComponentResources": [
                            "{LogAnalyticsWorkspaces}"
                          ],
                          "visualization": "tiles",
                          "tileSettings": {
                            "titleContent": {
                              "columnMatch": "Name"
                            },
                            "leftContent": {
                              "columnMatch": "NumActiveSinks",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "blue"
                              }
                            },
                            "showBorder": false
                          }
                        },
                        "customWidth": "25",
                        "name": "query - 7 - Copy - Copy"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "tab",
                    "comparison": "isEqualTo",
                    "value": "Hive"
                  },
                  "name": "Hive"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "Spark"
            },
            "name": "Spark"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "No log or metrics were detected in Log Analytics workspaces for the clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                    "style": "warning"
                  },
                  "name": "text - 0"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "tab",
                "comparison": "isEqualTo",
                "value": "Overview"
              },
              {
                "parameterName": "overview_usage",
                "comparison": "isEqualTo",
                "value": "not present"
              }
            ],
            "name": "No Overview Logs"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "No Kafka logs or metrics were detected in Log Analytics workspaces for the clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                    "style": "warning"
                  },
                  "name": "text - 0"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "kafka_usage",
                "comparison": "isEqualTo",
                "value": "not present"
              },
              {
                "parameterName": "tab",
                "comparison": "isEqualTo",
                "value": "Kafka"
              }
            ],
            "name": "No Kafka Usage"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "No Storm metrics were detected in Log Analytics workspaces for the clusters you selected. Please make sure you have selected the clusters you are interested in the toggle \"Clusters\" above and the Azure Monitor Integration is turned on for these clusters.",
                    "style": "warning"
                  },
                  "name": "text - 0"
                }
              ]
            },
            "conditionalVisibilities": [
              {
                "parameterName": "storm_usage",
                "comparison": "isEqualTo",
                "value": "not present"
              },
              {
                "parameterName": "tab",
                "comparison": "isEqualTo",
                "value": "Storm"
              }
            ],
            "name": "No  Storm Usage"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "monitor_tab",
        "comparison": "isEqualTo",
        "value": "Monitored"
      },
      "name": "MonitoredClusters"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{Subscription}"
              ],
              "parameters": [
                {
                  "id": "7c573245-9200-4070-88e7-4676a887804d",
                  "version": "KqlParameterItem/1.0",
                  "name": "AllClustersInSelectedSubs",
                  "type": 5,
                  "description": "Used to identify all clusters in user's subscriptions that have monitoring enabled",
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "where type =~ 'microsoft.hdinsight/clusters'\r\n|  order by name asc\r\n| extend Rank = row_number()\r\n| project value = id, label = name, selected = Rank <= 20",
                  "crossComponentResources": [
                    "{Subscription}"
                  ],
                  "isHiddenWhenLocked": true,
                  "typeSettings": {
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "defaultValue": "value::all",
                  "queryType": 1,
                  "resourceType": "microsoft.resourcegraph/resources"
                }
              ],
              "style": "pills",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources"
            },
            "name": "parameters - 3"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "HDInsightAmbariSystemMetrics\r\n| distinct _ResourceId",
              "size": 0,
              "queryType": 0,
              "resourceType": "microsoft.hdinsight/clusters",
              "crossComponentResources": [
                "{AllClustersInSelectedSubs}"
              ],
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "DiskPercentUsed",
                    "formatter": 0,
                    "numberFormat": {
                      "unit": 1,
                      "options": {
                        "style": "decimal",
                        "useGrouping": false,
                        "maximumFractionDigits": 2
                      }
                    }
                  },
                  {
                    "columnMatch": "CPUUsagePercentage",
                    "formatter": 0,
                    "numberFormat": {
                      "unit": 1,
                      "options": {
                        "style": "decimal",
                        "maximumFractionDigits": 2
                      }
                    }
                  },
                  {
                    "columnMatch": "FreeMemoryBytes",
                    "formatter": 0,
                    "numberFormat": {
                      "unit": 2,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  }
                ]
              }
            },
            "conditionalVisibility": {
              "parameterName": "monitor_tab",
              "comparison": "isEqualTo"
            },
            "name": "ClusterMetrics"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "where type =~ 'microsoft.hdinsight/clusters'| extend nameid = id | project nameid, id",
              "size": 0,
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscription}"
              ]
            },
            "conditionalVisibility": {
              "parameterName": "monitor_tab",
              "comparison": "isEqualTo"
            },
            "name": "ClusterResourceInfo"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"31e32675-efbd-41ae-878e-349f2d2922ec\",\"mergeType\":\"rightanti\",\"leftTable\":\"ClusterMetrics\",\"rightTable\":\"ClusterResourceInfo\",\"leftColumn\":\"_ResourceId\",\"rightColumn\":\"nameid\"}],\"projectRename\":[{\"originalName\":\"[ClusterResourceInfo].nameid\",\"mergedName\":\"ClusterName\",\"fromId\":\"31e32675-efbd-41ae-878e-349f2d2922ec\"},{\"originalName\":\"[ClusterResourceInfo].id\",\"mergedName\":\"Enable Monitoring Link\",\"fromId\":\"31e32675-efbd-41ae-878e-349f2d2922ec\"}]}",
              "size": 0,
              "queryType": 7,
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "ClusterName",
                    "formatter": 13,
                    "formatOptions": {
                      "linkColumn": "ClusterName",
                      "linkTarget": "Resource",
                      "subTarget": "",
                      "showIcon": true,
                      "customColumnWidthSetting": "70ch"
                    }
                  },
                  {
                    "columnMatch": "Enable Monitoring Link",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "subTarget": "azuremonitor",
                      "linkLabel": "Enable Monitoring Here",
                      "linkIsContextBlade": false,
                      "showIcon": false,
                      "bladeOpenContext": {
                        "bladeParameters": []
                      }
                    }
                  }
                ]
              }
            },
            "showPin": false,
            "name": "query - 2"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "monitor_tab",
        "comparison": "isEqualTo",
        "value": "Unmonitored"
      },
      "name": "UnmonitoredClusters"
    }
  ],
  "fallbackResourceIds": [
    "Azure Monitor"
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}