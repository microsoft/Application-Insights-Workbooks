{
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json",
  "version": "Notebook/1.0",
  "isLocked": true,
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "9d96ed8c-defe-4e32-ab9d-1cc86e1b4a30",
            "version": "KqlParameterItem/1.0",
            "name": "TimeRange",
            "label": "Time Range",
            "type": 4,
            "description": "Choose the time range for this report.",
            "isRequired": true,
            "value": {
              "durationMs": 86400000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ],
              "allowCustom": true
            }
          },
          {
            "id": "67456dca-90f1-4d64-87bc-f172add8dccb",
            "version": "KqlParameterItem/1.0",
            "name": "TopNumber",
            "label": "Top Number",
            "type": 1,
            "isRequired": true,
            "value": "1000",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "e4152b00-9f31-4ac2-b1c9-2f0964513368",
            "version": "KqlParameterItem/1.0",
            "name": "usageStandardDimension",
            "type": 1,
            "description": "Query Standard dimension ",
            "isRequired": true,
            "query": "let dimensionList = datatable(ColumnName:string, label:string)[\r\n\t'application_Version', 'Application version',\r\n\t'user_AuthenticatedId', 'Authenticated or anonymous traffic',\r\n\t'client_Browser', 'Browser version', \r\n\t'client_City', 'City',\r\n    'client_CountryOrRegion', 'Country or region', \r\n\t'cloud_RoleInstance', 'Cloud role instance', \r\n\t'cloud_RoleName', 'Cloud role name',\r\n\t'client_Model', 'Device model', \r\n    'client_OS', 'Operating system',\r\n\t'client_Type', 'Device type',\r\n\t'isSynthetic', 'Is real user traffic',\r\n    'name', 'Name', \r\n\t'operation_Name', 'Operation name',\r\n\t'performanceBucket', 'Performance',\r\n    'resultCode', 'Result code',\r\n    'responseCode', 'Response code',\r\n\t'tostring(parseurl(url)[\"Host\"])', 'URL host', \r\n\t'tostring(parseurl(url)[\"Path\"])', 'URL path',\r\n\t'operation_SyntheticSource', 'Source of synthetic traffic',\r\n\t'client_StateOrProvince', 'State or province', \r\n\t'success', 'Successful request',\r\n    'type','Telemetry type'\r\n\t] | order by label asc;\r\nunion customEvents,pageViews\r\n    | where timestamp {TimeRange}\r\n    | getschema \r\n    | where ColumnType == \"string\"\r\n    | summarize count() by ColumnName\r\n    | join kind = inner dimensionList on ColumnName\r\n    | project ColumnName, label\r\n    | order by label asc\r\n    | project data = strcat(\"'\", replace(@\"\\'\",@\"/:/\", ColumnName),\"','\",replace(@\"\\'\",@\"/:/\", label),\"','Standard Properties'\")",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "b6db195f-a819-45ff-8eed-bae7c09ab135",
            "version": "KqlParameterItem/1.0",
            "name": "getCustomDimensions",
            "type": 1,
            "description": "The query is used by ByValue, SplityBy and Properties dropdown",
            "isRequired": true,
            "query": "union customEvents,pageViews\r\n            | where timestamp {TimeRange}\r\n            | project  column_ifexists(\"customDimensions\",'')\r\n            | evaluate bag_unpack(column_ifexists(\"customDimensions\",''))\r\n            | getschema \r\n            | top-nested 800 of ColumnName by Count = count() desc\r\n            | project value =strcat(\"customDimensions[\\\"\", ColumnName, \"\\\"]\"), label =ColumnName, group='Custom Properties'\r\n            | order by label asc\r\n            | project data = strcat(\"'\", replace(@\"\\'\",@\"/:/\", value),\"','\",replace(@\"\\'\",@\"/:/\", label),\"','\",group,\"'\")",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "8b11feda-c3d4-4fb6-93d4-92321ccabd9d",
            "version": "KqlParameterItem/1.0",
            "name": "formattedCustomDimensions",
            "type": 1,
            "isRequired": true,
            "query": "print iff(isempty('{getCustomDimensions:escape}'), '[]',iff('{getCustomDimensions:escape}' startswith '[', '{getCustomDimensions:escape}', strcat('[','{getCustomDimensions:escape}',']')))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "5cb59496-3f78-417f-a79f-e0b99af5203f",
            "version": "KqlParameterItem/1.0",
            "name": "commonFilterDimensions",
            "type": 1,
            "isRequired": true,
            "value": "['user_AccountId', 'Account Id',  'Standard Properties', 'user_AuthenticatedId', 'Authenticated user Id', 'Standard Properties', 'operation_Id', 'Operation Id', 'Standard Properties', 'session_Id', 'Session Id',  'Standard Properties', 'user_Id', 'User Id', 'Standard Properties']",
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "['user_AccountId', 'Account Id',  'Standard Properties', 'user_AuthenticatedId', 'Authenticated user Id', 'Standard Properties', 'operation_Id', 'Operation Id', 'Standard Properties', 'session_Id', 'Session Id',  'Standard Properties', 'user_Id', 'User Id', 'Standard Properties']"
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "26f4f215-7a79-4d03-9b8c-a00beafc0e55",
            "version": "KqlParameterItem/1.0",
            "name": "componentId",
            "type": 1,
            "description": "componentId for users link",
            "isHiddenWhenLocked": true
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "parameters - main"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "acfb2e69-9b1c-4eb0-9547-f8c1d4af47a5",
            "cellValue": "IsViewMode",
            "linkTarget": "parameter",
            "linkLabel": "Edit",
            "subTarget": "0",
            "style": "link"
          },
          {
            "id": "e8107f36-31d7-4c73-94f5-818586d76a39",
            "cellValue": "IsViewMode",
            "linkTarget": "parameter",
            "linkLabel": "View",
            "subTarget": "1",
            "postText": "",
            "style": "link"
          }
        ]
      },
      "name": "links - Tabs"
    },
    {
      "type": 1,
      "content": {
        "json": "Set funnels steps in Edit tab and then you are able to see results in View tab.",
        "style": "info"
      },
      "conditionalVisibility": {
        "parameterName": "IsViewMode",
        "comparison": "isEqualTo",
        "value": "0"
      },
      "name": "TabInfo text"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "67554b71-b858-417a-9946-6620d5a17906",
            "version": "KqlParameterItem/1.0",
            "name": "TopStep",
            "label": "Top Step",
            "type": 2,
            "description": " Choose an item as top step from top events and page views.",
            "query": "union withsource = SourceTable customEvents, pageViews\r\n    | where timestamp {TimeRange}\r\n    | summarize count() by name, SourceTable\r\n    | top {TopNumber} by count_ \r\n    | project value = name, label =name, selected=false, group =SourceTable\r\n    | order by group desc, label asc\r\n",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "265f5412-cd9d-4ec2-a90a-25b36d7336f4",
            "version": "KqlParameterItem/1.0",
            "name": "Step1EnableFilter1",
            "type": 1,
            "isRequired": true,
            "value": "0",
            "isHiddenWhenLocked": true
          }
        ],
        "style": "formHorizontal",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibility": {
        "parameterName": "IsViewMode",
        "comparison": "isEqualTo",
        "value": "0"
      },
      "customWidth": "100",
      "name": "parameters - TopStep",
      "styleSettings": {
        "maxWidth": "500px"
      }
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "paragraph",
        "links": [
          {
            "id": "46c94cc8-4714-4c19-be42-ed06ee0dc4d8",
            "cellValue": "Step1EnableFilter1",
            "linkTarget": "parameter",
            "linkLabel": "Add filters",
            "subTarget": "1",
            "preText": "",
            "style": "link"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "links - step1AddFilter"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterDimension1",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| order by group desc, label asc\r\n",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "30a9cd77-3c20-49bf-8470-1711cabdfafb",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterOperator1",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterValues1text",
            "label": "Value",
            "type": 1,
            "description": "Delimiter with comma for \"is in\" and \"is not in\" operators, like \"a, b\"",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "26daf779-8964-4640-9b3f-16ace257559f",
            "version": "KqlParameterItem/1.0",
            "name": "isStep1Filter1Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (Step1FilterDimension1 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterDimension1",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step1FilterValues1text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterValues1text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step1FilterOperator1 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step1FilterOperator1 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "0df9d19a-2860-4630-9e90-9cb299a24901",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterValues1",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step1FilterValues1text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step1Filter1Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep1Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step1FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step1FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step1FilterDimension1} in ({Step1FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step1FilterDimension1} !in ({Step1FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step1FilterDimension1} {Step1FilterOperator1} \"{Step1FilterValues1text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "Step1EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        }
      ],
      "name": "parameters - Step1FilterDimension1"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterDimension2",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step1FilterDimension1}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterOperator2",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterValues2text",
            "label": "Value",
            "description": "Delimiter with comma for \"is in\" and \"is not in\" operators, like \"a, b\"",
            "type": 1,
            "value": "",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep1Filter2Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep1Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep1Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step1FilterDimension2 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterDimension2",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step1FilterValues2text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterValues2text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step1FilterOperator2 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step1FilterOperator2 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "84e41a71-221a-49eb-abac-a0537b2226d1",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterValues2",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step1FilterValues2text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step1Filter2Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep1Filter2Completed == '2'), result = 'true'",
                "criteriaContext": {
                  "leftOperand": "isStep1Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "condition": "if (Step1FilterOperator2 == 'isempty'), result = 'isempty({Step1FilterDimension2})'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step1FilterDimension2})"
                }
              },
              {
                "condition": "if (Step1FilterOperator2 == 'isnotempty'), result = 'isnotempty({Step1FilterDimension2})'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step1FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step1FilterDimension2} in ({Step1FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step1FilterDimension2} !in ({Step1FilterValues2})"
                }
              },
              {
                "condition": "else result = '{Step1FilterDimension2} {Step1FilterOperator2} \"{Step1FilterValues2text}\"'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step1FilterDimension2} {Step1FilterOperator2} \"{Step1FilterValues2text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Step1EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep1Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step1FilterDimension2"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterDimension3",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step1FilterDimension1}' and value != '{Step1FilterDimension2}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterOperator3",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterValues3text",
            "label": "Value",
            "description": "Delimiter with comma for \"is in\" and \"is not in\" operators, like \"a, b\"",
            "type": 1,
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep1Filter3Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep1Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep1Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (isStep1Filter2Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep1Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step1FilterDimension3 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterDimension3",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step1FilterValues3text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterValues3text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step1FilterOperator3 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step1FilterOperator3 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "f0d28efa-5c5f-4df8-919b-233c47d4d292",
            "version": "KqlParameterItem/1.0",
            "name": "Step1FilterValues3",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step1FilterValues3text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step1Filter3Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep1Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step1FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step1FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step1FilterDimension3} in ({Step1FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step1FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step1FilterDimension3} !in ({Step1FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step1FilterDimension3} {Step1FilterOperator3} \"{Step1FilterValues3text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep1Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep1Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step1EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        }
      ],
      "name": "parameters - Step1FilterDimension3"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "7b2d237c-3dff-4bba-89c2-fac04b4324a9",
            "version": "KqlParameterItem/1.0",
            "name": "topFilter",
            "type": 1,
            "isRequired": true,
            "value": "",
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep1Filter3Completed == '1'), result = '| where {step1Filter1Query} and {step1Filter2Query} and {step1Filter3Query}'",
                "criteriaContext": {
                  "leftOperand": "isStep1Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step1Filter1Query} and {step1Filter2Query} and {step1Filter3Query}"
                }
              },
              {
                "condition": "if (isStep1Filter2Completed == '1'), result = '| where {step1Filter1Query} and {step1Filter2Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep1Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step1Filter1Query} and {step1Filter2Query} "
                }
              },
              {
                "condition": "if (isStep1Filter1Completed == '1'), result = '| where {step1Filter1Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep1Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step1Filter1Query} "
                }
              },
              {
                "condition": "else result = '| where true'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "| where true"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep1Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step1EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        }
      ],
      "name": "parameters - Step1FiltersQuery"
    },
    {
      "type": 1,
      "content": {
        "json": "<hr width=\\\"100%\\\" color=\\\"#ccc\\\" size=1>"
      },
      "conditionalVisibility": {
        "parameterName": "IsViewMode",
        "comparison": "isEqualTo",
        "value": "0"
      },
      "name": "text - Step1FiltersLine"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "cbafcd9c-1d54-49be-8569-06b41fa9f018",
            "version": "KqlParameterItem/1.0",
            "name": "SecondStep",
            "label": "Second Step",
            "type": 2,
            "description": "Choose an item as second step from top events and page views.",
            "query": "union withsource = SourceTable customEvents, pageViews\r\n    | where timestamp {TimeRange}\r\n    | summarize count() by name, SourceTable\r\n    | top {TopNumber} by count_ \r\n    | project value = name, label =name, selected=false, group =SourceTable\r\n    | order by group desc, label asc\r\n",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "feaf365d-cde1-46b5-88dc-8932544ea55c",
            "version": "KqlParameterItem/1.0",
            "name": "Step2EnableFilter1",
            "type": 1,
            "isRequired": true,
            "value": "0",
            "isHiddenWhenLocked": true
          }
        ],
        "style": "formHorizontal",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibility": {
        "parameterName": "IsViewMode",
        "comparison": "isEqualTo",
        "value": "0"
      },
      "customWidth": "100",
      "name": "parameters - SecondStep",
      "styleSettings": {
        "maxWidth": "500px"
      }
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "paragraph",
        "links": [
          {
            "id": "02292c7d-a729-465e-8e64-df8c2b7c0a1e",
            "cellValue": "Step2EnableFilter1",
            "linkTarget": "parameter",
            "linkLabel": "Add filters",
            "subTarget": "1",
            "preText": "",
            "style": "link"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "links - step2AddFilter"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterDimension1",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| order by group desc, label asc\r\n",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "30a9cd77-3c20-49bf-8470-1711cabdfafb",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterOperator1",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterValues1text",
            "description": "Delimiter with comma for \"is in\" and \"is not in\" operators, like \"a, b\"",
            "label": "Value",
            "type": 1,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "26daf779-8964-4640-9b3f-16ace257559f",
            "version": "KqlParameterItem/1.0",
            "name": "isStep2Filter1Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (Step2FilterDimension1 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step2FilterDimension1",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step2FilterValues1text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step2FilterValues1text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step2FilterOperator1 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step2FilterOperator1 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "de07a91d-dcc2-4547-9f99-641d57f42f05",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterValues1",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step2FilterValues1text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step2Filter1Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep2Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step2FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step2FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step2FilterDimension1} in ({Step2FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step2FilterDimension1} !in ({Step2FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step2FilterDimension1} {Step2FilterOperator1} \"{Step2FilterValues1text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "Step2EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        }
      ],
      "name": "parameters - Step2FilterDimension1"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterDimension2",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string){formattedCustomDimensions};\r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension};\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step2FilterDimension1}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterOperator2",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterValues2text",
            "label": "Value",
            "description": "Delimiter with comma for \"is in\" and \"is not in\" operators, like \"a, b\"",
            "type": 1,
            "value": "",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep2Filter2Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep2Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterDimension2",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterValues2text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "6289bc52-89cd-48ec-a4e1-5a65ec32ae26",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterValues2",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step2FilterValues2text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step2Filter2Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep2Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step2FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step2FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step2FilterDimension2} in ({Step2FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step2FilterDimension2} !in ({Step2FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step2FilterDimension2} {Step2FilterOperator2} \"{Step2FilterValues2text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Step2EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep2Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        }
      ],
      "name": "parameters - Step2FilterDimension2"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterDimension3",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string){formattedCustomDimensions};\r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension};\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step2FilterDimension1}' and value != '{Step2FilterDimension2}'\r\n| order by group desc, label asc\r\n",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterOperator3",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterValues3text",
            "label": "Value",
            "description": "Delimiter with comma for \"is in\" and \"is not in\" operators, like \"a, b\"",
            "type": 1,
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep2Filter3Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep2Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep2Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (isStep2Filter2Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep2Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step2FilterDimension3 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step2FilterDimension3",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step2FilterValues3text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step2FilterValues3text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step2FilterOperator3 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step2FilterOperator3 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "4ac64edd-cb17-4ca3-a37e-98010504e854",
            "version": "KqlParameterItem/1.0",
            "name": "Step2FilterValues3",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step2FilterValues3text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step2Filter3Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep2Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step2FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step2FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step2FilterDimension3} in ({Step2FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step2FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step2FilterDimension3} !in ({Step2FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step2FilterDimension3} {Step2FilterOperator3} \"{Step2FilterValues3text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep2Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep2Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step2EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        }
      ],
      "name": "parameters - Step2FilterDimension3"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "7b2d237c-3dff-4bba-89c2-fac04b4324a9",
            "version": "KqlParameterItem/1.0",
            "name": "secondFilter",
            "type": 1,
            "isRequired": true,
            "value": "",
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep2Filter3Completed == '1'), result = '| where {step2Filter1Query} and {step2Filter2Query} and {step2Filter3Query}'",
                "criteriaContext": {
                  "leftOperand": "isStep2Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step2Filter1Query} and {step2Filter2Query} and {step2Filter3Query}"
                }
              },
              {
                "condition": "if (isStep2Filter2Completed == '1'), result = '| where {step2Filter1Query} and {step2Filter2Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep2Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step2Filter1Query} and {step2Filter2Query} "
                }
              },
              {
                "condition": "if (isStep2ilter1Completed == '1'), result = '| where {step2Filter1Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep2Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step2Filter1Query} "
                }
              },
              {
                "condition": "else result = '| where true'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "| where true"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep2Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step2EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        }
      ],
      "name": "parameters - Step2FiltersQuery"
    },
    {
      "type": 1,
      "content": {
        "json": "<hr width=\\\"100%\\\" color=\\\"#ccc\\\" size=1>"
      },
      "conditionalVisibility": {
        "parameterName": "IsViewMode",
        "comparison": "isEqualTo",
        "value": "0"
      },
      "name": "text - Step2FiltersLine"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "7ae1f814-f743-43da-8ed5-a7009bfea727",
            "version": "KqlParameterItem/1.0",
            "name": "ThirdStep",
            "label": "Third Step",
            "type": 2,
            "description": "Choose an item as third step from top events and page views.",
            "query": "union withsource = SourceTable customEvents, pageViews\r\n    | where timestamp {TimeRange}\r\n    | summarize count() by name, SourceTable\r\n    | top {TopNumber} by count_ \r\n    | project value = name, label =name, selected=false, group =SourceTable\r\n    | order by group desc, label asc\r\n",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "499a0fe1-5be0-4e40-be4a-970ed42ab159",
            "version": "KqlParameterItem/1.0",
            "name": "Step3EnableFilter1",
            "type": 1,
            "isRequired": true,
            "value": "0",
            "isHiddenWhenLocked": true
          }
        ],
        "style": "formHorizontal",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        }
      ],
      "customWidth": "100",
      "name": "parameters - ThirdStep",
      "styleSettings": {
        "maxWidth": "500px"
      }
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "paragraph",
        "links": [
          {
            "id": "398f2fd7-5e48-4740-8bfc-e1579d615c91",
            "cellValue": "Step3EnableFilter1",
            "linkTarget": "parameter",
            "linkLabel": "Add filters",
            "subTarget": "1",
            "preText": "",
            "style": "link"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "links - step3AddFilter"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterDimension1",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| order by group desc, label asc\r\n",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "30a9cd77-3c20-49bf-8470-1711cabdfafb",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterOperator1",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterValues1text",
            "label": "Value",
            "description": "Delimiter with comma for \"is in\" and \"is not in\" operators, like \"a, b\"",
            "type": 1,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "26daf779-8964-4640-9b3f-16ace257559f",
            "version": "KqlParameterItem/1.0",
            "name": "isStep3Filter1Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (Step3FilterDimension1 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step3FilterDimension1",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step3FilterValues1text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step3FilterValues1text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step3FilterOperator1 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step3FilterOperator1 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "7199530e-bc72-4a63-81f2-acb67f7ffc29",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterValues1",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step3FilterValues1text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step3Filter1Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep3Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step3FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step3FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step3FilterDimension1} in ({Step3FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step3FilterDimension1} !in ({Step3FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step3FilterDimension1} {Step3FilterOperator1} \"{Step3FilterValues1text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "Step3EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step3FilterDimension1"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterDimension2",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step3FilterDimension1}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterOperator2",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterValues2text",
            "label": "Value",
            "description": "Delimiter with comma for \"is in\" and \"is not in\" operators, like \"a, b\"",
            "type": 1,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep3Filter2Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep3Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep3Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step3FilterDimension2 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step3FilterDimension2",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step3FilterValues2text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step3FilterValues2text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step3FilterOperator2 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step3FilterOperator2 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "e8c921dc-8a36-417f-a4b6-8a39bd14951c",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterValues2",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step3FilterValues2text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step3Filter2Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep3Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step3FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step3FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step3FilterDimension2} in ({Step3FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step3FilterDimension2} !in ({Step3FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step3FilterDimension2} {Step3FilterOperator2} \"{Step3FilterValues2text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Step3EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep3Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step3FilterDimension2"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterDimension3",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step3FilterDimension1}' and value != '{Step3FilterDimension2}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterOperator3",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterValues3text",
            "label": "Value",
            "description": "Delimiter with comma for \"in\" and \"!in\" operators, like \"a, b\"",
            "type": 1,
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep3Filter3Completed",
            "type": 1,
            "isRequired": true,
            "value": "2",
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep3Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep3Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "isStep3Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterDimension3",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterValues3text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "a4fc0b77-fbf1-41f4-9c81-8a3b3398bd8f",
            "version": "KqlParameterItem/1.0",
            "name": "Step3FilterValues3",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step3FilterValues3text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step3Filter3Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep3Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step3FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step3FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step3FilterDimension3} in ({Step3FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step3FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step3FilterDimension3} !in ({Step3FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step3FilterDimension3} {Step3FilterOperator3} \"{Step3FilterValues3text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep3Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep3Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step3EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step3FilterDimension3"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "7b2d237c-3dff-4bba-89c2-fac04b4324a9",
            "version": "KqlParameterItem/1.0",
            "name": "thirdFilter",
            "type": 1,
            "isRequired": true,
            "value": "",
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep3Filter3Completed == '1'), result = '| where {step3Filter1Query} and {step3Filter2Query} and {step3Filter3Query}'",
                "criteriaContext": {
                  "leftOperand": "isStep3Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step3Filter1Query} and {step3Filter2Query} and {step3Filter3Query}"
                }
              },
              {
                "condition": "if (isStep3Filter2Completed == '1'), result = '| where {step3Filter1Query} and {step3Filter2Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep3Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step3Filter1Query} and {step3Filter2Query} "
                }
              },
              {
                "condition": "if (isStep3ilter1Completed == '1'), result = '| where {step3Filter1Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep3Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step3Filter1Query} "
                }
              },
              {
                "condition": "else result = '| where true'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "| where true"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep3Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step3EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        }
      ],
      "name": "parameters - Step3FiltersQuery"
    },
    {
      "type": 1,
      "content": {
        "json": "<hr width=\\\"100%\\\" color=\\\"#ccc\\\" size=1>"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "text - Step3FiltersLine"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "a5213d1e-f97d-4fb3-9920-887e6ef7706a",
            "version": "KqlParameterItem/1.0",
            "name": "FourthStep",
            "label": "Fourth Step",
            "type": 2,
            "description": "Choose an item as fourth step from top events and page views.",
            "query": "union withsource = SourceTable customEvents, pageViews\r\n    | where timestamp {TimeRange}\r\n    | summarize count() by name, SourceTable\r\n    | top {TopNumber} by count_ \r\n    | project value = name, label =name, selected=false, group =SourceTable\r\n    | order by group desc, label asc\r\n",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "16fae4fd-e713-4426-87e2-5a1cbb9cc425",
            "version": "KqlParameterItem/1.0",
            "name": "Step4EnableFilter1",
            "type": 1,
            "isRequired": true,
            "value": "0",
            "isHiddenWhenLocked": true
          }
        ],
        "style": "formHorizontal",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "customWidth": "100",
      "name": "parameters - FourthStep",
      "styleSettings": {
        "maxWidth": "500px"
      }
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "paragraph",
        "links": [
          {
            "id": "f94e4805-240a-4fb2-8378-bed2216c6f6c",
            "cellValue": "Step4EnableFilter1",
            "linkTarget": "parameter",
            "linkLabel": "Add filters",
            "subTarget": "1",
            "preText": "",
            "style": "link"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "links - step4AddFilter"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterDimension1",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "30a9cd77-3c20-49bf-8470-1711cabdfafb",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterOperator1",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterValues1text",
            "label": "Value",
            "type": 1,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "26daf779-8964-4640-9b3f-16ace257559f",
            "version": "KqlParameterItem/1.0",
            "name": "isStep4Filter1Completed",
            "type": 1,
            "isRequired": true,
            "value": "2",
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (Step4FilterDimension1 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterDimension1",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step4FilterValues1text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterValues1text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step4FilterOperator1 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step4FilterOperator1 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "a4fc0b77-fbf1-41f4-9c81-8a3b3398bd23",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterValues1",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step4FilterValues1text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step4Filter1Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep4Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step4FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step4FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step4FilterDimension1} in ({Step4FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step4FilterDimension1} !in ({Step4FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step4FilterDimension1} {Step4FilterOperator1} \"{Step4FilterValues1text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "Step4EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step4FilterDimension1"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterDimension2",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step4FilterDimension1}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterOperator2",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterValues2text",
            "label": "Value",
            "type": 1,
            "value": "",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep4Filter2Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep4Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep4Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step4FilterDimension2 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterDimension2",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step4FilterValues2text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterValues2text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step4FilterOperator2 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step4FilterOperator2 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "90c6a8ce-3358-41c6-995c-770b72e95254",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterValues2",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step4FilterValues2text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step4Filter2Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep4Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step4FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step4FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step4FilterDimension2} in ({Step4FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step4FilterDimension2} !in ({Step4FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step4FilterDimension2} {Step4FilterOperator2} \"{Step4FilterValues2text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Step4EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep4Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step4FilterDimension2"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterDimension3",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step4FilterDimension1}' and value != '{Step4FilterDimension2}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterOperator3",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterValues3text",
            "label": "Value",
            "type": 1,
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep4Filter3Completed",
            "type": 1,
            "isRequired": true,
            "value": "2",
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep4Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep4Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (isStep4Filter2Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep4Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step4FilterDimension3 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterDimension3",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step4FilterValues3text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterValues3text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step4FilterOperator3 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step4FilterOperator3 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "a4fc0b77-fbf1-41f4-9c81-8a3b3398bd8f",
            "version": "KqlParameterItem/1.0",
            "name": "Step4FilterValues3",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step4FilterValues3text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step4Filter3Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep4Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step4FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step4FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step4FilterDimension3} in ({Step4FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step4FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step4FilterDimension3} !in ({Step4FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step4FilterDimension3} {Step4FilterOperator3} \"{Step4FilterValues3text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep4Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep4Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step4EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step4FilterDimension3"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "7b2d237c-3dff-4bba-89c2-fac04b4324a9",
            "version": "KqlParameterItem/1.0",
            "name": "fourthFilter",
            "type": 1,
            "isRequired": true,
            "value": "",
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep4Filter3Completed == '1'), result = '| where {step4Filter1Query} and {step4Filter2Query} and {step4Filter3Query}'",
                "criteriaContext": {
                  "leftOperand": "isStep4Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step4Filter1Query} and {step4Filter2Query} and {step4Filter3Query}"
                }
              },
              {
                "condition": "if (isStep4Filter2Completed == '1'), result = '| where {step4Filter1Query} and {step4Filter2Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep4Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step4Filter1Query} and {step4Filter2Query} "
                }
              },
              {
                "condition": "if (isStep4ilter1Completed == '1'), result = '| where {step4Filter1Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep4Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step4Filter1Query} "
                }
              },
              {
                "condition": "else result = '| where true'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "| where true"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep4Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step4EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        }
      ],
      "name": "parameters - Step4FiltersQuery"
    },
    {
      "type": 1,
      "content": {
        "json": "<hr width=\\\"100%\\\" color=\\\"#ccc\\\" size=1>"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "text - Step4FiltersLine"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "e584575d-c382-41c7-b94f-f4c5d68c6d5d",
            "version": "KqlParameterItem/1.0",
            "name": "FifthStep",
            "label": "Fifth Step",
            "type": 2,
            "description": "Choose an item as fifth step from top events and page views.",
            "query": "union withsource = SourceTable customEvents, pageViews\r\n    | where timestamp {TimeRange}\r\n    | summarize count() by name, SourceTable\r\n    | top {TopNumber} by count_ \r\n    | project value = name, label =name, selected=false, group =SourceTable\r\n    | order by group desc, label asc\r\n\r\n",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "19d43a6f-f2f9-488c-9167-8fe3d0f761b0",
            "version": "KqlParameterItem/1.0",
            "name": "Step5EnableFilter1",
            "type": 1,
            "isRequired": true,
            "value": "0",
            "isHiddenWhenLocked": true
          }
        ],
        "style": "formHorizontal",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "customWidth": "100",
      "name": "parameters - FifthStep",
      "styleSettings": {
        "maxWidth": "500px"
      }
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "paragraph",
        "links": [
          {
            "id": "f5d438e6-d86c-4266-a5b5-ba6817b4e6e1",
            "cellValue": "Step5EnableFilter1",
            "linkTarget": "parameter",
            "linkLabel": "Add filters",
            "subTarget": "1",
            "preText": "",
            "style": "link"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "links - step5AddFilter"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterDimension1",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "30a9cd77-3c20-49bf-8470-1711cabdfafb",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterOperator1",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterValues1text",
            "label": "Value",
            "type": 1,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "26daf779-8964-4640-9b3f-16ace257559f",
            "version": "KqlParameterItem/1.0",
            "name": "isStep5Filter1Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (Step5FilterDimension1 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterDimension1",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step5FilterValues1text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterValues1text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step5FilterOperator1 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step5FilterOperator1 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "a4fc0b77-fbf1-41f4-9c81-8a3b3398bd23",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterValues1",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step5FilterValues1text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step5Filter1Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep5Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step5FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step5FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step5FilterDimension1} in ({Step5FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step5FilterDimension1} !in ({Step5FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step5FilterDimension1} {Step5FilterOperator1} \"{Step5FilterValues1text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "Step5EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step5FilterDimension1"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterDimension2",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step5FilterDimension1}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterOperator2",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterValues2text",
            "label": "Value",
            "type": 1,
            "value": "",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep5Filter2Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep5Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep5Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step5FilterDimension2 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterDimension2",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step5FilterValues2text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterValues2text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step5FilterOperator2 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step5FilterOperator2 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "0ff3b26b-fdad-4742-b660-079b484a4786",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterValues2",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step5FilterValues2text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step5Filter2Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep5Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step5FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step5FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step5FilterDimension2} in ({Step5FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step5FilterDimension2} !in ({Step5FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step5FilterDimension2} {Step5FilterOperator2} \"{Step5FilterValues2text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Step5EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep5Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step5FilterDimension2"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterDimension3",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step5FilterDimension1}' and value != '{Step5FilterDimension2}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterOperator3",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterValues3text",
            "label": "Value",
            "type": 1,
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep5Filter3Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep5Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep5Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (isStep5Filter2Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep5Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step5FilterDimension3 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterDimension3",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step5FilterValues3text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterValues3text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step5FilterOperator3 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step5FilterOperator3 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "5dfd6704-7ed1-4b12-a937-b3d1e2971c7e",
            "version": "KqlParameterItem/1.0",
            "name": "Step5FilterValues3",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step5FilterValues3text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step5Filter3Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep5Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step5FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step5FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step5FilterDimension3} in ({Step5FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step5FilterDimension3} !in ({Step5FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step5FilterDimension3} {Step5FilterOperator3} \"{Step5FilterValues3text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep5Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep5Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step5EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step5FilterDimension3"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "7b2d237c-3dff-4bba-89c2-fac04b4324a9",
            "version": "KqlParameterItem/1.0",
            "name": "fifthFilter",
            "type": 1,
            "isRequired": true,
            "value": "",
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep5Filter3Completed == '1'), result = '| where {step5Filter1Query} and {step5Filter2Query} and {step5Filter3Query}'",
                "criteriaContext": {
                  "leftOperand": "isStep5Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step5Filter1Query} and {step5Filter2Query} and {step5Filter3Query}"
                }
              },
              {
                "condition": "if (isStep5Filter2Completed == '1'), result = '| where {step5Filter1Query} and {step5Filter2Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep5Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step5Filter1Query} and {step5Filter2Query} "
                }
              },
              {
                "condition": "if (isStep5ilter1Completed == '1'), result = '| where {step5Filter1Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep5Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step5Filter1Query} "
                }
              },
              {
                "condition": "else result = '| where true'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "| where true"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep5Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step5EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        }
      ],
      "name": "parameters - Step5FiltersQuery"
    },
    {
      "type": 1,
      "content": {
        "json": "<hr width=\\\"100%\\\" color=\\\"#ccc\\\" size=1>"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "text - Step5FiltersLine"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "af67c22b-6a2f-49f4-8559-6e6a254df0b3",
            "version": "KqlParameterItem/1.0",
            "name": "SixthStep",
            "label": "Sixth Step",
            "type": 2,
            "description": "Choose an item as sixth step from top events and page views.",
            "query": "union withsource = SourceTable customEvents, pageViews\r\n    | where timestamp {TimeRange}\r\n    | summarize count() by name, SourceTable\r\n    | top {TopNumber} by count_ \r\n    | project value = name, label =name, selected=false, group =SourceTable\r\n    | order by group desc, label asc\r\n",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "3e5c09fb-7638-4bb5-bd67-cf98c3fe51a9",
            "version": "KqlParameterItem/1.0",
            "name": "Step6EnableFilter1",
            "type": 1,
            "isRequired": true,
            "value": "0",
            "isHiddenWhenLocked": true
          },
          {
            "id": "3fc06689-290a-45d5-951d-5cbcea727d10",
            "version": "KqlParameterItem/1.0",
            "name": "StepsNumber",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "TopStep",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "0"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "SecondStep",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "ThirdStep",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "FourthStep",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "3"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "FifthStep",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "4"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "SixthStep",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "5"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "6"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0
          }
        ],
        "style": "formHorizontal",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "customWidth": "100",
      "name": "parameters - SixthStep",
      "styleSettings": {
        "maxWidth": "500px"
      }
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "paragraph",
        "links": [
          {
            "id": "b9c4c67e-321a-4dc3-9cd0-14d8d9377844",
            "cellValue": "Step6EnableFilter1",
            "linkTarget": "parameter",
            "linkLabel": "Add filters",
            "subTarget": "1",
            "preText": "",
            "style": "link"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "SixthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "links - step6AddFilter"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterDimension1",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "30a9cd77-3c20-49bf-8470-1711cabdfafb",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterOperator1",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterValues1text",
            "label": "Value",
            "type": 1,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "26daf779-8964-4640-9b3f-16ace257559f",
            "version": "KqlParameterItem/1.0",
            "name": "isStep6Filter1Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (Step6FilterDimension1 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterDimension1",
                  "operator": "is Empty",
                  "rightValType": "static",
                  "rightVal": "",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step6FilterValues1text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterValues1text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step6FilterOperator1 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step6FilterOperator1 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "a4fc0b77-fbf1-41f4-9c81-8a3b3398bdcd",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterValues1",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step6FilterValues1text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step6Filter1Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep6Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step6FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step6FilterDimension1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step6FilterDimension1} in ({Step6FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step5FilterOperator1",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step6FilterDimension1} !in ({Step6FilterValues1})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step6FilterDimension1} {Step6FilterOperator1} \"{Step6FilterValues1text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "SixthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "Step6EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step6FilterDimension1"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterDimension2",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step6FilterDimension1}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterOperator2",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterValues2text",
            "label": "Value",
            "type": 1,
            "value": "",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep6Filter2Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep6Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep6Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step6FilterDimension2 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterDimension2",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step6FilterValues2text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterValues2text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step6FilterOperator2 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step6FilterOperator2 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "a4fc0b77-fbf1-41f4-9c81-8a323398bd23",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterValues2",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step6FilterValues2text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step6Filter2Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep6Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step6FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step6FilterDimension2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step6FilterDimension2} in ({Step6FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator2",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step6FilterDimension2} !in ({Step6FilterValues2})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step6FilterDimension2} {Step6FilterOperator2} \"{Step6FilterValues2text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Step6EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep6Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SixthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step6FilterDimension2"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ed55d4b0-7ca0-4a60-afeb-95a005c87e1a",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterDimension3",
            "label": "Dimension",
            "type": 2,
            "query": "let customDimension = datatable(value:string, label:string, group: string) \r\n{formattedCustomDimensions}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label); \r\nlet dimensionList = datatable(value:string, label:string, group: string) {usageStandardDimension}\r\n| extend value = replace(@\"/:/\", @\"\\'\", value), label = replace(@\"/:/\", @\"\\'\", label);\r\nlet commonFilterDimensionList = datatable(value:string, label:string, group: string) \r\n{commonFilterDimensions};\r\nunion dimensionList, customDimension, commonFilterDimensionList\r\n| project value, label, selected=false, group\r\n| where value != '{Step6FilterDimension1}' and value != '{Step6FilterDimension2}'\r\n| order by group desc, label asc",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "d5f89cf5-6ae3-4a27-8afc-80a8112b1391",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterOperator3",
            "label": "Operator",
            "type": 2,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    { \"value\":\"==\", \"label\":\"==\", \"selected\":true },\r\n    { \"value\":\"!=\", \"label\":\"!=\" },\r\n    { \"value\":\"contains\", \"label\":\"contains\" },\r\n    { \"value\":\"!contains\", \"label\":\"does not contain\" },\r\n    { \"value\":\"startswith\", \"label\":\"starts with\" },\r\n    { \"value\":\"!startswith\", \"label\":\"does not start with\" },\r\n    { \"value\":\"endswith\", \"label\":\"ends with\" },\r\n    { \"value\":\"!endswith\", \"label\":\"does not end with\" },\r\n    { \"value\":\"isempty\", \"label\":\"is empty\" },\r\n    { \"value\":\"isnotempty\", \"label\":\"is not empty\" },\r\n    { \"value\":\"in\", \"label\":\"is in\" },\r\n    { \"value\":\"!in\", \"label\":\"is not in\" }\r\n]",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "ef15d795-cfec-4bcf-ba31-8e4344251143",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterValues3text",
            "label": "Value",
            "type": 1,
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "06f2574c-b29c-4ab3-92c4-2e837289f6b5",
            "version": "KqlParameterItem/1.0",
            "name": "isStep6Filter3Completed",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep6Filter1Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep6Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (isStep6Filter2Completed == '2'), result = '2'",
                "criteriaContext": {
                  "leftOperand": "isStep6Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step6FilterDimension3 is empty ), result = '2'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterDimension3",
                  "operator": "is Empty",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              },
              {
                "condition": "if (Step6FilterValues3text is not empty ), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterValues3text",
                  "operator": "isNotNull",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step6FilterOperator3 == 'isempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "if (Step6FilterOperator3 == 'isnotempty'), result = '1'",
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "1"
                }
              },
              {
                "condition": "else result = '2'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "2"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "a4fc0b77-fbf1-41f4-1181-8a3b3398bd23",
            "version": "KqlParameterItem/1.0",
            "name": "Step6FilterValues3",
            "type": 1,
            "isRequired": true,
            "query": "print trim_end(\"]\",substring(split(trim_end(\" \", trim_start(\" \", replace(@' ,', @',', replace(@', ', @',', '{Step6FilterValues3text:escapejson}')))),\",\"),1))",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6aaefa03-6368-423e-a797-34df9c319772",
            "version": "KqlParameterItem/1.0",
            "name": "step6Filter3Query",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "isStep6Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isempty",
                  "resultValType": "static",
                  "resultVal": "isempty({Step6FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "isnotempty",
                  "resultValType": "static",
                  "resultVal": "isnotempty({Step6FilterDimension3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "in",
                  "resultValType": "static",
                  "resultVal": "{Step6FilterDimension3} in ({Step6FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "Step6FilterOperator3",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "!in",
                  "resultValType": "static",
                  "resultVal": "{Step6FilterDimension3} !in ({Step6FilterValues3})"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "{Step6FilterDimension3} {Step6FilterOperator3} \"{Step6FilterValues3text:escapejson}\""
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep6Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "isStep6Filter2Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step6EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SixthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "parameters - Step6FilterDimension3"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "7b2d237c-3dff-4bba-89c2-fac04b4324a9",
            "version": "KqlParameterItem/1.0",
            "name": "sixthFilter",
            "type": 1,
            "isRequired": true,
            "value": "",
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "condition": "if (isStep6Filter3Completed == '1'), result = '| where {step6Filter1Query} and {step6Filter2Query} and {step6Filter3Query}'",
                "criteriaContext": {
                  "leftOperand": "isStep6Filter3Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step6Filter1Query} and {step6Filter2Query} and {step6Filter3Query}"
                }
              },
              {
                "condition": "if (isStep6Filter2Completed == '1'), result = '| where {step6Filter1Query} and {step6Filter2Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep6Filter2Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step6Filter1Query} and {step6Filter2Query} "
                }
              },
              {
                "condition": "if (isStep6ilter1Completed == '1'), result = '| where {step6Filter1Query} '",
                "criteriaContext": {
                  "leftOperand": "isStep6Filter1Completed",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "| where {step6Filter1Query} "
                }
              },
              {
                "condition": "else result = '| where true'",
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "| where true"
                }
              }
            ],
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange"
          },
          {
            "id": "57814ab8-17c2-45b5-b30f-44c26544718a",
            "version": "KqlParameterItem/1.0",
            "name": "funnelStep1",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "let step1 = materialize(all | where name == \"{TopStep:escape}\" {topFilter} | summarize arg_min(timestamp, *) by user_Id | project user_Id, step1_time = timestamp);"
                }
              }
            ]
          },
          {
            "id": "eea62752-1fab-4aca-8479-c7d08ff71f5e",
            "version": "KqlParameterItem/1.0",
            "name": "funnelStep2",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "let step2 = materialize(step1 | join hint.strategy=broadcast (all | where name == \"{SecondStep:escape}\" {secondFilter} | project user_Id, step2_time=timestamp ) on user_Id | where step1_time < step2_time   | summarize arg_min(step2_time, *) by user_Id | project user_Id, step1_time,step2_time); "
                }
              }
            ]
          },
          {
            "id": "b50b0f3b-5cb1-4461-815b-3ce6ff0f8910",
            "version": "KqlParameterItem/1.0",
            "name": "funnelStep3",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "let step3 = materialize(step2 | join hint.strategy=broadcast (all | where name == \"{ThirdStep:escape}\" {thirdFilter} | project user_Id, step3_time=timestamp ) on user_Id | where step2_time < step3_time | summarize arg_min(step3_time, *) by user_Id | project user_Id, step1_time,step2_time,step3_time); "
                }
              }
            ]
          },
          {
            "id": "2904b590-d3bc-4928-ab01-d1f0bc36abeb",
            "version": "KqlParameterItem/1.0",
            "name": "funnelStep4",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "let step4 = materialize(step3 | join hint.strategy=broadcast (all | where name == \"{FourthStep:escape}\" {fourthFilter} | project user_Id, step4_time=timestamp) on user_Id | where step3_time < step4_time | summarize arg_min(step4_time, *) by user_Id | project user_Id, step1_time,step2_time,step3_time,step4_time); "
                }
              }
            ]
          },
          {
            "id": "b7fb95ff-db51-4071-8328-d6868d447b19",
            "version": "KqlParameterItem/1.0",
            "name": "funnelStep5",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "let step5 = materialize(step4 | join hint.strategy=broadcast (all | where name == \"{FifthStep:escape}\" {fifthFilter} | project user_Id, step5_time=timestamp) on user_Id | where step4_time < step5_time | summarize arg_min(step5_time, *) by user_Id | project user_Id, step1_time,step2_time,step3_time,step4_time, step5_time); "
                }
              }
            ]
          },
          {
            "id": "6dd53790-5d4a-43e3-bcf6-e0c5e10ec0c5",
            "version": "KqlParameterItem/1.0",
            "name": "funnelStep6",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "let step6 = materialize(step5 \t| join hint.strategy=broadcast (all | where name == \"{SixthStep:escape}\" {sixthFilter} | project user_Id, step6_time=timestamp ) on user_Id | where step5_time < step6_time | summarize arg_min(step6_time, *) by user_Id | project user_Id, step1_time,step2_time,step3_time,step4_time, step5_time, step6_time);  "
                }
              }
            ]
          },
          {
            "id": "a54b820b-3278-40eb-b774-45b9e37addff",
            "version": "KqlParameterItem/1.0",
            "name": "funnelsQuery",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "StepsNumber",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "0",
                  "resultValType": "static",
                  "resultVal": "let topStepName = strcat('1. ', '{TopStep}');  let allEvents=customEvents      \t| where timestamp {TimeRange};  let allPageViews=pageViews       \t| where timestamp {TimeRange};  let all = allEvents  \t| union allPageViews;  {funnelStep1} let id1 = step1 | summarize userCount= dcount(user_Id) | extend STEP = topStepName, rate = iff(userCount == 0, 0.0,todouble(100));  id1 | project STEP, ['USER COUNT'] = userCount, ['% TOTAL'] = rate "
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "StepsNumber",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "static",
                  "resultVal": "let topStepName = strcat('1. ', '{TopStep}');  let allEvents=customEvents      \t| where timestamp {TimeRange};  let allPageViews=pageViews       \t| where timestamp {TimeRange};  let all = allEvents  \t| union allPageViews;  {funnelStep1} let id1 = step1 | summarize userCount= dcount(user_Id) | extend STEP = topStepName, rate = iff(userCount == 0, 0.0,todouble(100));  id1 | project STEP, ['USER COUNT'] = userCount, ['% TOTAL'] = rate "
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "StepsNumber",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "2",
                  "resultValType": "static",
                  "resultVal": "let topStepName = strcat('1. ', '{TopStep}');  let secondStepName = strcat('2. ', '{SecondStep}');  let allEvents=customEvents      \t| where timestamp {TimeRange};  let allPageViews=pageViews       \t| where timestamp {TimeRange};  let all = allEvents  \t| union allPageViews;  {funnelStep1}  {funnelStep2}  let id1 = step1 | summarize userCount= dcount(user_Id) | extend STEP = topStepName, rate = iff(userCount == 0, 0.0,todouble(100));  let step1Count = toscalar(id1);  let id2 = step2 | summarize userCount= dcount(user_Id) | extend STEP = secondStepName, rate = iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  union id1, id2 | project STEP, ['USER COUNT'] = userCount, ['% TOTAL'] = rate | order by STEP asc"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "StepsNumber",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "3",
                  "resultValType": "static",
                  "resultVal": "let topStepName = strcat('1. ', '{TopStep}');  let secondStepName = strcat('2. ', '{SecondStep}');  let thirdStepName = strcat('3. ', '{ThirdStep}');  let allEvents=customEvents      \t| where timestamp {TimeRange};  let allPageViews=pageViews       \t| where timestamp {TimeRange};  let all = allEvents  \t| union allPageViews;  {funnelStep1} {funnelStep2} {funnelStep3} let id1 = step1 | summarize userCount= dcount(user_Id) | extend STEP = topStepName, rate = iff(userCount == 0, 0.0,todouble(100));  let step1Count = toscalar(id1);  let id2 = step2 | summarize userCount= dcount(user_Id) | extend STEP = secondStepName, rate = iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  let step2Count = toscalar(id2);  let id3 = step3 | summarize userCount= dcount(user_Id) | extend STEP = thirdStepName, rate =  iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));   union id1, id2, id3 | project STEP, ['USER COUNT'] = userCount, ['% TOTAL'] = rate | order by STEP asc"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "StepsNumber",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "4",
                  "resultValType": "static",
                  "resultVal": "let topStepName = strcat('1. ', '{TopStep}');  let secondStepName = strcat('2. ', '{SecondStep}');  let thirdStepName = strcat('3. ', '{ThirdStep}');  let fourthStepName = strcat('4. ', '{FourthStep}');  let allEvents=customEvents      \t| where timestamp {TimeRange};  let allPageViews=pageViews       \t| where timestamp {TimeRange};  let all = allEvents  \t| union allPageViews;  {funnelStep1} {funnelStep2} {funnelStep3} {funnelStep4} let id1 = step1 | summarize userCount= dcount(user_Id) | extend STEP = topStepName, rate = iff(userCount == 0, 0.0,todouble(100));  let step1Count = toscalar(id1);  let id2 = step2 | summarize userCount= dcount(user_Id) | extend STEP = secondStepName, rate = iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  let step2Count = toscalar(id2);  let id3 = step3 | summarize userCount= dcount(user_Id) | extend STEP = thirdStepName, rate =  iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  let step3Count = toscalar(id3);  let id4 = step4 | summarize userCount= dcount(user_Id) | extend STEP = fourthStepName, rate =  iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  union id1, id2, id3, id4 | project STEP, ['USER COUNT'] = userCount, ['% TOTAL'] = rate | order by STEP asc"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "StepsNumber",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "5",
                  "resultValType": "static",
                  "resultVal": "let topStepName = strcat('1. ', '{TopStep}');  let secondStepName = strcat('2. ', '{SecondStep}');  let thirdStepName = strcat('3. ', '{ThirdStep}');  let fourthStepName = strcat('4. ', '{FourthStep}');  let fifthStepName = strcat('5. ', '{FifthStep}');  let allEvents=customEvents      \t| where timestamp {TimeRange};  let allPageViews=pageViews       \t| where timestamp {TimeRange};  let all = allEvents  \t| union allPageViews;  {funnelStep1} {funnelStep2} {funnelStep3} {funnelStep4} {funnelStep5}  let id1 = step1 | summarize userCount= dcount(user_Id) | extend STEP = topStepName, rate = iff(userCount == 0, 0.0,todouble(100));  let step1Count = toscalar(id1);  let id2 = step2 | summarize userCount= dcount(user_Id) | extend STEP = secondStepName, rate = iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  let step2Count = toscalar(id2);  let id3 = step3 | summarize userCount= dcount(user_Id) | extend STEP = thirdStepName, rate =  iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  let step3Count = toscalar(id3);  let id4 = step4 | summarize userCount= dcount(user_Id) | extend STEP = fourthStepName, rate =  iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  let step4Count = toscalar(id4);  let id5 = step5 | summarize userCount= dcount(user_Id) | extend STEP = fifthStepName, rate =  iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  union id1, id2, id3, id4, id5 | project STEP, ['USER COUNT'] = userCount, ['% TOTAL'] = rate | order by STEP asc"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "rightValType": "param",
                  "resultValType": "static",
                  "resultVal": "let topStepName = strcat('1. ', '{TopStep}');  let secondStepName = strcat('2. ', '{SecondStep}');  let thirdStepName = strcat('3. ', '{ThirdStep}');  let fourthStepName = strcat('4. ', '{FourthStep}');  let fifthStepName = strcat('5. ', '{FifthStep}');  let sixthStepName = strcat('6. ', '{SixthStep}');  let allEvents=customEvents      \t| where timestamp {TimeRange};  let allPageViews=pageViews       \t| where timestamp {TimeRange};  let all = allEvents  \t| union allPageViews;  {funnelStep1} {funnelStep2} {funnelStep3} {funnelStep4} {funnelStep5} {funnelStep6} let id1 = step1 | summarize userCount= dcount(user_Id) | extend STEP = topStepName, rate = iff(userCount == 0, 0.0,todouble(100));  let step1Count = toscalar(id1);  let id2 = step2 | summarize userCount= dcount(user_Id) | extend STEP = secondStepName, rate = iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  let step2Count = toscalar(id2);  let id3 = step3 | summarize userCount= dcount(user_Id) | extend STEP = thirdStepName, rate =  iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  let step3Count = toscalar(id3);  let id4 = step4 | summarize userCount= dcount(user_Id) | extend STEP = fourthStepName, rate =  iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  let step4Count = toscalar(id4);  let id5 = step5 | summarize userCount= dcount(user_Id) | extend STEP = fifthStepName, rate =  iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  let step5Count = toscalar(id5);  let id6 = step6 | summarize userCount= dcount(user_Id) | extend STEP = sixthStepName, rate =  iff(userCount == 0, 0.0, todouble(100 * userCount / step1Count));  union id1, id2, id3, id4, id5, id6 | project STEP, ['USER COUNT'] = userCount, ['% TOTAL'] = rate | order by STEP asc"
                }
              }
            ]
          },
          {
            "id": "25c7b651-ce0a-4e43-a952-126a6ffd1ca8",
            "version": "KqlParameterItem/1.0",
            "name": "StepId",
            "type": 1,
            "query": "print strcat('1. ', '{TopStep}')",
            "isHiddenWhenLocked": true,
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "isStep6Filter1Completed",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "Step6EnableFilter1",
          "comparison": "isEqualTo",
          "value": "1"
        }
      ],
      "name": "parameters - Step6FiltersQuery"
    },
    {
      "type": 1,
      "content": {
        "json": "<hr width=\\\"100%\\\" color=\\\"#ccc\\\" size=1>"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "0"
        },
        {
          "parameterName": "SixthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FifthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "FourthStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "ThirdStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "SecondStep",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "TopStep",
          "comparison": "isNotEqualTo",
          "value": ""
        }
      ],
      "name": "text - Step6FiltersLine"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{funnelsQuery}",
              "size": 3,
              "timeContext": {
                "durationMs": 43200000
              },
              "timeContextFromParameter": "TimeRange",
              "exportFieldName": "STEP",
              "exportParameterName": "StepId",
              "exportDefaultValue": "",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "table",
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "USER COUNT",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "200px"
                    },
                    "numberFormat": {
                      "unit": 17,
                      "options": {
                        "style": "decimal",
                        "useGrouping": false
                      }
                    }
                  },
                  {
                    "columnMatch": "% TOTAL",
                    "formatter": 20,
                    "formatOptions": {
                      "min": 0,
                      "max": 100,
                      "palette": "blue",
                      "customColumnWidthSetting": "200px"
                    },
                    "numberFormat": {
                      "unit": 1,
                      "options": {
                        "style": "decimal",
                        "useGrouping": false,
                        "maximumFractionDigits": 2
                      }
                    }
                  },
                  {
                    "columnMatch": "id",
                    "formatter": 5
                  }
                ]
              },
              "tileSettings": {
                "showBorder": false,
                "titleContent": {
                  "columnMatch": "STEP",
                  "formatter": 1
                },
                "leftContent": {
                  "columnMatch": "USER COUNT",
                  "formatter": 12,
                  "formatOptions": {
                    "palette": "auto"
                  },
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "maximumSignificantDigits": 3,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              },
              "graphSettings": {
                "type": 0,
                "topContent": {
                  "columnMatch": "STEP",
                  "formatter": 1
                },
                "centerContent": {
                  "columnMatch": "USER COUNT",
                  "formatter": 1,
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "maximumSignificantDigits": 3,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "conditionalVisibility": {
              "parameterName": "IsViewMode",
              "comparison": "isEqualTo",
              "value": "1"
            },
            "showPin": true,
            "name": "query - 7"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let conversioncalc=(endTime: datetime, startTime: datetime)\r\n{\r\n    let allEvents=customEvents\r\n        | where timestamp between (startTime..endTime);\r\n    let allPageViews=pageViews \r\n        | where timestamp between (startTime..endTime);\r\n    let all = allEvents | union allPageViews; \r\n    let step1 = materialize(all\r\n            | where name == '{TopStep}'\r\n            {topFilter}\r\n            | summarize arg_min(timestamp, *) by user_Id\r\n            | project user_Id, step1_time = timestamp);\r\n    let step2 = materialize(step1 \r\n        | join(all\r\n            | where name == '{SecondStep}'\r\n            {secondFilter} \r\n            | project user_Id, step2_time=timestamp\r\n        ) on user_Id\r\n        | where step1_time < step2_time\r\n        | summarize arg_min(step2_time, *) by user_Id\r\n        | project user_Id, step1_time,step2_time);\r\n    let step3 = materialize(step2 \r\n        | join(all\r\n            | where name == '{ThirdStep}'\r\n            {thirdFilter}\r\n            | project user_Id, step3_time=timestamp\r\n        ) on user_Id\r\n        | where step2_time < step3_time\r\n        | summarize arg_min(step3_time, *) by user_Id\r\n        | project user_Id, step1_time,step2_time,step3_time);\r\n    let step4 = materialize(step3 \r\n        | join(all\r\n            | where name == '{FourthStep}'\r\n            {fourthFilter}\r\n            | project user_Id, step4_time=timestamp\r\n        ) on user_Id\r\n        | where step3_time < step4_time\r\n        | summarize arg_min(step4_time, *) by user_Id\r\n        | project user_Id, step1_time,step2_time,step3_time,step4_time);\r\n    let step5 = materialize(step4 \r\n        | join(all\r\n            | where name == '{FifthStep}'\r\n            {fifthFilter}\r\n            | project user_Id, step5_time=timestamp\r\n        ) on user_Id\r\n        | where step4_time < step5_time\r\n        | summarize arg_min(step5_time, *) by user_Id\r\n        | project user_Id, step1_time,step2_time,step3_time,step4_time,step5_time);\r\n    let step6 = materialize(step5\r\n        | join(all\r\n            | where name == '{SixthStep}'\r\n            {sixthFilter}\r\n            | project user_Id, step6_time=timestamp\r\n        ) on user_Id\r\n        | where step5_time < step6_time\r\n        | summarize arg_min(step6_time, *) by user_Id\r\n        | project user_Id, step1_time,step2_time,step3_time,step4_time,step5_time,step6_time);\r\n    let id1=step1 | summarize total1 = todouble(count(user_Id)), id = '1';\r\n    let id2=step2 | summarize total = todouble(count(user_Id)), id = '2';\r\n    let id3=step3 | summarize total = todouble(count(user_Id)), id = '3';\r\n    let id4=step4 | summarize total = todouble(count(user_Id)), id = '4';\r\n    let id5=step5 | summarize total = todouble(count(user_Id)), id = '5';\r\n    let id6=step6 | summarize total = todouble(count(user_Id)), id = '6';\r\n    union id1, id2, id3, id4, id5, id6\r\n        | where id == '1' or id == '{StepsNumber}'\r\n        | summarize initialTotal = sum(total1), finalTotal = sum(total)\r\n        | project ConversionRate = round(iff(initialTotal <= 0 , 0.0, todouble(finalTotal * 100 / initialTotal)), 2), Date = endTime\r\n};\r\n    \r\nlet grain = 7d;\r\nlet endDt = {TimeRange:end};\r\nunion hint.concurrency = 8\r\n(conversioncalc(endDt - (0 * grain), endDt - (1 * grain))), (conversioncalc(endDt - (1 * grain), endDt - (2 * grain))), (conversioncalc(endDt - (2 * grain), endDt - (3 * grain))), (conversioncalc(endDt - (3 * grain), endDt - (4 * grain))), (conversioncalc(endDt - (4 * grain), endDt - (5 * grain))), (conversioncalc(endDt - (5 * grain), endDt - (6 * grain))), (conversioncalc(endDt - (6 * grain), endDt - (7 * grain))), (conversioncalc(endDt - (7 * grain), endDt - (8 * grain))), (conversioncalc(endDt - (8 * grain), endDt - (9 * grain))), (conversioncalc(endDt - (9 * grain), endDt - (10 * grain))), (conversioncalc(endDt - (10 * grain), endDt - (11 * grain))), (conversioncalc(endDt - (11 * grain), endDt - (12 * grain)))| order by Date asc",
              "size": 0,
              "aggregation": 3,
              "title": "HISTORICAL CONVERSION BY WEEK",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "timechart",
              "chartSettings": {
                "ySettings": {
                  "unit": 1,
                  "min": 0,
                  "max": null
                }
              }
            },
            "conditionalVisibility": {
              "parameterName": "IsViewMode",
              "comparison": "isEqualTo",
              "value": "1"
            },
            "name": "query - 9"
          }
        ],
        "exportParameters": true
      },
      "customWidth": "60",
      "name": "group - mainCharts",
      "styleSettings": {
        "maxWidth": "calc(100%-550px)"
      }
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "2ab1cd51-1de4-4f8b-810e-9ea6f4799fb8",
                  "version": "KqlParameterItem/1.0",
                  "name": "activeNumber",
                  "type": 1,
                  "query": "print iff('{StepId}' == ' ', 1, toint(substring('{StepId}', 0, 1)));",
                  "isHiddenWhenLocked": true,
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "queryType": 0,
                  "resourceType": "microsoft.insights/components"
                },
                {
                  "id": "893dd1ba-662d-440d-9c12-8b79e29e6634",
                  "version": "KqlParameterItem/1.0",
                  "name": "firstLinkText",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "<=",
                        "rightValType": "static",
                        "rightVal": "1",
                        "resultValType": "static",
                        "resultVal": "Show users in first step in funnel"
                      }
                    },
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "Show converted users from previous step in funnel"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  }
                },
                {
                  "id": "d541cbaf-4e1b-48c6-9a65-f6fe51d5baa5",
                  "version": "KqlParameterItem/1.0",
                  "name": "secondLinkText",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "Show dropped users from previous step in funnel"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 0
                  }
                },
                {
                  "id": "4afcd926-14ba-48c9-af8b-f4cfdddd6a73",
                  "version": "KqlParameterItem/1.0",
                  "name": "timeRangeStr",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "{TimeRange}"
                      }
                    }
                  ]
                },
                {
                  "id": "231398eb-6499-4451-ad87-99d3499bf78d",
                  "version": "KqlParameterItem/1.0",
                  "name": "usersQuery",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "0",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} step1 | project user_Id"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "1",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} step1 | project user_Id"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "2",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape}  step2  | project user_Id"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "3",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} step3 | project user_Id"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "4",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} step4 | project user_Id"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "5",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews; {funnelStep1} {funnelStep2} {funnelStep3} {funnelStep4} {funnelStep5} step5 | project user_Id | extend hashedUserId = hash(user_Id) | distinct hashedUserId "
                      }
                    },
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} {funnelStep5:escape} {funnelStep6:escape} step6 | project user_Id"
                      }
                    }
                  ]
                },
                {
                  "id": "76020004-6361-40f5-a49f-a2dbad8d208c",
                  "version": "KqlParameterItem/1.0",
                  "name": "droppedUsersQuery",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "3",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} let user3 = step3 | project user_Id | summarize makeset(user_Id, 1000000); step2 | project user_Id | where user_Id !in (user3)"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "4",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} let user4 = step4 | project user_Id | summarize makeset(user_Id, 1000000); step3 | project user_Id | where user_Id !in (user4)"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "5",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} {funnelStep5:escape} let user5 = step5 | project user_Id | summarize makeset(user_Id, 1000000); step4 | project user_Id | where user_Id !in (user5)"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "activeNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "6",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} {funnelStep5:escape}  {funnelStep6:escape} let user6 = step6 | project user_Id | summarize makeset(user_Id, 1000000); step5 | project user_Id | where user_Id !in (user6)"
                      }
                    },
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} let user2 = step2 | project user_Id | summarize makeset(user_Id, 1000000); step1 | project user_Id | where user_Id !in (user2)"
                      }
                    }
                  ]
                },
                {
                  "id": "0e8fc497-7e03-48e8-8398-931cc71e32e5",
                  "version": "KqlParameterItem/1.0",
                  "name": "workbookParams",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "leftOperand": "StepsNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "6",
                        "resultValType": "static",
                        "resultVal": "{\"Users who stayed for{TopStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} step1 | project user_Id\", \"Users who stayed for{SecondStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape}  step2  | project user_Id\", \"Users who stayed for{ThirdStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} step3 | project user_Id\", \"Users who stayed for{FourthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} step4 | project user_Id\", \"Users who stayed for{FifthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} {funnelStep5:escape} step5 | project user_Id\", \"Users who stayed for{SixthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} {funnelStep5:escape} {funnelStep6:escape} step6 | project user_Id\", \"Users who dropped before{SecondStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} let user2 = step2 | project user_Id | summarize makeset(user_Id, 1000000); step1 | project user_Id | where user_Id !in (user2)\", \"Users who dropped before{ThirdStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} let user3 = step3 | project user_Id | summarize makeset(user_Id, 1000000); step2 | project user_Id | where user_Id !in (user3)\", \"Users who dropped before{FourthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} let user4 = step4 | project user_Id | summarize makeset(user_Id, 1000000); step3 | project user_Id | where user_Id !in (user4)\", \"Users who dropped before{FifthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} {funnelStep5:escape} let user5 = step5 | project user_Id | summarize makeset(user_Id, 1000000); step4 | project user_Id | where user_Id !in (user5)\", \"Users who dropped before{SixthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} {funnelStep5:escape}  {funnelStep6:escape} let user6 = step6 | project user_Id | summarize makeset(user_Id, 1000000); step5 | project user_Id | where user_Id !in (user6)\"}"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "StepsNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "5",
                        "resultValType": "static",
                        "resultVal": "{\"Users who stayed for{TopStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} step1 | project user_Id\", \"Users who stayed for{SecondStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape}  step2  | project user_Id\", \"Users who stayed for{ThirdStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} step3 | project user_Id\", \"Users who stayed for{FourthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} step4 | project user_Id\", \"Users who stayed for{FifthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} {funnelStep5:escape} step5 | project user_Id\", \"Users who dropped before{SecondStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} let user2 = step2 | project user_Id | summarize makeset(user_Id, 1000000); step1 | project user_Id | where user_Id !in (user2)\", \"Users who dropped before{ThirdStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} let user3 = step3 | project user_Id | summarize makeset(user_Id, 1000000); step2 | project user_Id | where user_Id !in (user3)\", \"Users who dropped before{FourthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} let user4 = step4 | project user_Id | summarize makeset(user_Id, 1000000); step3 | project user_Id | where user_Id !in (user4)\", \"Users who dropped before{FifthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} {funnelStep5:escape} let user5 = step5 | project user_Id | summarize makeset(user_Id, 1000000); step4 | project user_Id | where user_Id !in (user5)\"}"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "StepsNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "4",
                        "resultValType": "static",
                        "resultVal": "{\"Users who stayed for{TopStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} step1 | project user_Id\", \"Users who stayed for{SecondStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape}  step2  | project user_Id\", \"Users who stayed for{ThirdStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} step3 | project user_Id\", \"Users who stayed for{FourthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} step4 | project user_Id\", \"Users who dropped before{SecondStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} let user2 = step2 | project user_Id | summarize makeset(user_Id, 1000000); step1 | project user_Id | where user_Id !in (user2)\", \"Users who dropped before{ThirdStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} let user3 = step3 | project user_Id | summarize makeset(user_Id, 1000000); step2 | project user_Id | where user_Id !in (user3)\", \"Users who dropped before{FourthStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} {funnelStep4:escape} let user4 = step4 | project user_Id | summarize makeset(user_Id, 1000000); step3 | project user_Id | where user_Id !in (user4)\"}"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "StepsNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "3",
                        "resultValType": "static",
                        "resultVal": "{\"Users who stayed for{TopStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} step1 | project user_Id\", \"Users who stayed for{SecondStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape}  step2  | project user_Id\", \"Users who stayed for{ThirdStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} step3 | project user_Id\", \"Users who dropped before{SecondStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} let user2 = step2 | project user_Id | summarize makeset(user_Id, 1000000); step1 | project user_Id | where user_Id !in (user2)\", \"Users who dropped before{ThirdStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} {funnelStep3:escape} let user3 = step3 | project user_Id | summarize makeset(user_Id, 1000000); step2 | project user_Id | where user_Id !in (user3)\"}"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "StepsNumber",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "2",
                        "resultValType": "static",
                        "resultVal": "{\"Users who stayed for{TopStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} step1 | project user_Id\", \"Users who stayed for{SecondStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} {funnelStep2:escape}  step2  | project user_Id\", \"Users who dropped before{SecondStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents | union allPageViews;  {funnelStep1:escape} {funnelStep2:escape} let user2 = step2 | project user_Id | summarize makeset(user_Id, 1000000); step1 | project user_Id | where user_Id !in (user2)\"}"
                      }
                    },
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "{\"Users who stayed for{TopStep:escape}\":\"let allEvents=customEvents | where timestamp {timeRangeStr:escape}; let allPageViews=pageViews | where timestamp {timeRangeStr:escape}; let all = allEvents  | union allPageViews; {funnelStep1:escape} step1 | project user_Id\"}"
                      }
                    }
                  ]
                },
                {
                  "id": "2fb64078-dccc-41c6-ad4b-27beb1583b4b",
                  "version": "KqlParameterItem/1.0",
                  "name": "firstLinkCohort",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "{\"cohort\":\"{usersQuery}\",\"isBelong\":\"true\",\"id\":\"\"}"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  }
                },
                {
                  "id": "21e9d1e6-f954-4521-9a4a-ee53536fe743",
                  "version": "KqlParameterItem/1.0",
                  "name": "secondLinkCohort",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "{\"cohort\":\"{droppedUsersQuery}\",\"isBelong\":\"true\",\"id\":\"\"}"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  }
                },
                {
                  "id": "12acf150-7909-4c95-a822-e967422715f3",
                  "version": "KqlParameterItem/1.0",
                  "name": "firstLinkParam",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "{\"UsersList\":\"{firstLinkCohort:escape}\"}"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  }
                },
                {
                  "id": "b73967ad-cd7e-41b4-8dfa-d3bf1d78180d",
                  "version": "KqlParameterItem/1.0",
                  "name": "secondLinkParam",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "{\"UsersList\":\"{secondLinkCohort:escape}\"}"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  }
                }
              ],
              "style": "above",
              "queryType": 0,
              "resourceType": "microsoft.insights/components"
            },
            "conditionalVisibility": {
              "parameterName": "1",
              "comparison": "isEqualTo",
              "value": "2"
            },
            "name": "parameters - 51 "
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Insights for users in step  {StepId}",
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": ""
                  },
                  "name": "text - 3"
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "nav",
                    "links": [
                      {
                        "id": "aceabce3-2ccb-4966-a78e-7e4a72d573de",
                        "linkTarget": "OpenBlade",
                        "linkLabel": "{firstLinkText}",
                        "preText": " ",
                        "style": "link",
                        "bladeOpenContext": {
                          "bladeName": "UsageWorkbookViewerBlade",
                          "extensionName": "AppInsightsExtension",
                          "bladeParameters": [
                            {
                              "name": "ComponentId",
                              "source": "parameter",
                              "value": "componentId"
                            },
                            {
                              "name": "TimeRange",
                              "source": "parameter",
                              "value": "TimeRange"
                            },
                            {
                              "name": "ConfigurationId",
                              "source": "static",
                              "value": "community-Workbooks/UsageMetrics/Usage - Users"
                            },
                            {
                              "name": "UsageSourceType",
                              "source": "static",
                              "value": "0"
                            },
                            {
                              "name": "NotebookParams",
                              "source": "parameter",
                              "value": "firstLinkParam"
                            },
                            {
                              "name": "CustomUserUserCohorts",
                              "source": "parameter",
                              "value": "workbookParams"
                            }
                          ]
                        }
                      }
                    ]
                  },
                  "name": "links - 0",
                  "styleSettings": {
                    "margin": "0px"
                  }
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "nav",
                    "links": [
                      {
                        "id": "1a750f7c-95d3-4a70-bfda-6ec760b4c920",
                        "linkTarget": "OpenBlade",
                        "linkLabel": "{secondLinkText}",
                        "preText": "",
                        "style": "link",
                        "bladeOpenContext": {
                          "bladeName": "UsageWorkbookViewerBlade",
                          "extensionName": "AppInsightsExtension",
                          "bladeParameters": [
                            {
                              "name": "ComponentId",
                              "source": "parameter",
                              "value": "componentId"
                            },
                            {
                              "name": "TimeRange",
                              "source": "parameter",
                              "value": "TimeRange"
                            },
                            {
                              "name": "ConfigurationId",
                              "source": "static",
                              "value": "community-Workbooks/UsageMetrics/Usage - Users"
                            },
                            {
                              "name": "UsageSourceType",
                              "source": "static",
                              "value": "0"
                            },
                            {
                              "name": "NotebookParams",
                              "source": "parameter",
                              "value": "secondLinkParam"
                            },
                            {
                              "name": "CustomUserUserCohorts",
                              "source": "parameter",
                              "value": "workbookParams"
                            }
                          ]
                        }
                      }
                    ]
                  },
            "conditionalVisibility": {
              "parameterName": "activeNumber",
              "comparison": "isNotEqualTo",
              "value": "1"
            },
                  "name": "links - 1",
                  "styleSettings": {
                    "margin": "0px",
                    "padding": "0px"
                  }
                }
              ]
            },
            "name": "group - link",
            "styleSettings": {
              "margin": "20px",
              "showBorder": true
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Immediately before {StepId}",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let allEvents=customEvents\r\n    | where timestamp {TimeRange};\r\nlet allPageViews=pageViews \r\n    | where timestamp {TimeRange};\r\nlet all = allEvents | union allPageViews;\r\nlet step1 = materialize(all\r\n            | where name == '{TopStep}'\r\n            {topFilter}\r\n            | summarize arg_min(timestamp, *) by user_Id\r\n            | project user_Id, step1_time = timestamp);\r\nlet step2 = materialize(step1 \r\n            | join hint.strategy=broadcast \r\n                (all\r\n                    | where name == '{SecondStep}'\r\n                    {secondFilter}\r\n                    | project user_Id, step2_time=timestamp\r\n                ) on user_Id\r\n                | where step1_time < step2_time\r\n                | summarize arg_min(step2_time, *) by user_Id\r\n                | project user_Id, step1_time,step2_time);\r\nlet step3 = materialize(step2 \r\n            | join hint.strategy=broadcast \r\n                (all\r\n                    | where name == '{ThirdStep}'\r\n                    {thirdFilter}\r\n                    | project user_Id, step3_time=timestamp\r\n                ) on user_Id\r\n                | where step2_time < step3_time\r\n                | summarize arg_min(step3_time, *) by user_Id\r\n                | project user_Id, step1_time,step2_time,step3_time);\r\nlet step4 = materialize(step3 \r\n            | join hint.strategy=broadcast \r\n                (all\r\n                    | where name == '{FourthStep}'\r\n                    {fourthFilter}\r\n                    | project user_Id, step4_time=timestamp\r\n                ) on user_Id\r\n                | where step3_time < step4_time\r\n                | summarize arg_min(step4_time, *) by user_Id\r\n                | project user_Id, step1_time,step2_time,step3_time,step4_time);\r\nlet step5 = materialize(step4 \r\n            | join hint.strategy=broadcast \r\n                (all\r\n                    | where name == '{FifthStep}'\r\n                    {fifthFilter}\r\n                    | project user_Id, step5_time=timestamp\r\n                ) on user_Id\r\n                | where step4_time < step5_time\r\n                | summarize arg_min(step5_time, *) by user_Id\r\n                | project user_Id, step1_time,step2_time,step3_time,step4_time,step5_time);\r\nlet step6 = materialize(step5 \r\n            | join hint.strategy=broadcast \r\n                (all\r\n                    | where name == '{SixthStep}'\r\n                    {sixthFilter}\r\n                    | project user_Id, step6_time=timestamp\r\n                ) on user_Id\r\n                | where step5_time < step6_time\r\n                | summarize arg_min(step6_time, *) by user_Id\r\n                | project user_Id, step1_time,step2_time,step3_time,step4_time,step5_time,step6_time);\r\n\r\nlet result1 = (step1)\r\n    | join hint.strategy=broadcast\r\n    ( all  ) on user_Id\r\n        | where timestamp < step1_time | summarize arg_max(timestamp, name) by user_Id | summarize Count=count() by name | top 5 by Count desc | project Name = name, Count, step = strcat('1. ', '{TopStep}');\r\nlet result2 = (step2)\r\n    | join hint.strategy=broadcast\r\n    ( all  ) on user_Id\r\n        | where timestamp between (step1_time .. (step2_time-1tick)) | summarize arg_max(timestamp, name) by user_Id | summarize Count=count() by name | top 5 by Count desc | project Name = name, Count, step = strcat('2. ', '{SecondStep}');\r\nlet result3 = (step3)\r\n    | join hint.strategy=broadcast\r\n    ( all  ) on user_Id\r\n        | where timestamp between (step2_time .. (step3_time-1tick)) | summarize arg_max(timestamp, name) by user_Id | summarize Count=count() by name | top 5 by Count desc | project Name = name, Count, step = strcat('3. ', '{ThirdStep}');\r\nlet result4 = (step4)\r\n    | join hint.strategy=broadcast\r\n    ( all  ) on user_Id\r\n        | where timestamp between (step3_time .. (step4_time-1tick)) | summarize arg_max(timestamp, name) by user_Id | summarize Count=count() by name | top 5 by Count desc | project Name = name, Count, step = strcat('4. ', '{FourthStep}');\r\nlet result5 = (step5)\r\n    | join hint.strategy=broadcast\r\n    ( all  ) on user_Id\r\n        | where timestamp between (step4_time .. (step5_time-1tick)) | summarize arg_max(timestamp, name) by user_Id | summarize Count=count() by name | top 5 by Count desc | project Name = name, Count, step = strcat('5. ', '{FifthStep}');\r\nlet result6 = (step6)\r\n    | join hint.strategy=broadcast\r\n    ( all  ) on user_Id\r\n        | where timestamp between (step5_time .. (step6_time-1tick)) | summarize arg_max(timestamp, name) by user_Id | summarize Count=count() by name | top 5 by Count desc | project Name = name, Count, step = strcat('6. ', '{SixthStep}');\r\nunion result1, result2, result3, result4, result5, result6\r\n| where step == iif('{StepId}' == ' ', strcat('1. ', '{TopStep}'), '{StepId}')\r\n| project Name, Count",
                    "size": 1,
                    "timeContext": {
                      "durationMs": 43200000
                    },
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "Count",
                          "formatter": 3,
                          "formatOptions": {
                            "palette": "blue",
                            "customColumnWidthSetting": "200px"
                          },
                          "numberFormat": {
                            "unit": 17,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false
                            }
                          }
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "IsViewMode",
                      "comparison": "isEqualTo",
                      "value": "1"
                    },
                    {
                      "parameterName": "StepsNumber",
                      "comparison": "isNotEqualTo",
                      "value": "0"
                    }
                  ],
                  "name": "query - 8",
                  "styleSettings": {
                    "padding": "0px"
                  }
                }
              ]
            },
            "name": "group - gridlayout1",
            "styleSettings": {
              "margin": "20px",
              "showBorder": true
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Immediately after {StepId}",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let allEvents=customEvents\r\n    | where timestamp {TimeRange};\r\nlet allPageViews=pageViews \r\n    | where timestamp {TimeRange};\r\nlet all = allEvents | union allPageViews;\r\nlet step1 = materialize(all\r\n            | where name == '{TopStep}'\r\n            {topFilter} \r\n            | summarize arg_min(timestamp, *) by user_Id\r\n            | project user_Id, step1_time = timestamp);\r\nlet step2 = materialize(step1 \r\n            | join hint.strategy=broadcast \r\n                (all\r\n                    | where name == '{SecondStep}'\r\n                    {secondFilter}\r\n                    | project user_Id, step2_time=timestamp\r\n                ) on user_Id\r\n                | where step1_time < step2_time\r\n                | summarize arg_min(step2_time, *) by user_Id\r\n                | project user_Id, step1_time,step2_time);\r\nlet step3 = materialize(step2 \r\n            | join hint.strategy=broadcast \r\n                (all\r\n                    | where name == '{ThirdStep}'\r\n                    {thirdFilter}\r\n                    | project user_Id, step3_time=timestamp\r\n                ) on user_Id\r\n                | where step2_time < step3_time\r\n                | summarize arg_min(step3_time, *) by user_Id\r\n                | project user_Id, step1_time,step2_time,step3_time);\r\nlet step4 = materialize(step3 \r\n            | join hint.strategy=broadcast \r\n                (all\r\n                    | where name == '{FourthStep}'\r\n                    {fourthFilter}\r\n                    | project user_Id, step4_time=timestamp\r\n                ) on user_Id\r\n                | where step3_time < step4_time\r\n                | summarize arg_min(step4_time, *) by user_Id\r\n                | project user_Id, step1_time,step2_time,step3_time,step4_time);\r\nlet step5 = materialize(step4 \r\n            | join hint.strategy=broadcast \r\n                (all\r\n                    | where name == '{FifthStep}'\r\n                    {fifthFilter}\r\n                    | project user_Id, step5_time=timestamp\r\n                ) on user_Id\r\n                | where step4_time < step5_time\r\n                | summarize arg_min(step5_time, *) by user_Id\r\n                | project user_Id, step1_time,step2_time,step3_time,step4_time,step5_time);\r\nlet step6 = materialize(step5 \r\n            | join hint.strategy=broadcast \r\n                (all\r\n                    | where name == '{SixthStep}'\r\n                    {sixthFilter}\r\n                    | project user_Id, step6_time=timestamp\r\n                ) on user_Id\r\n                | where step5_time < step6_time\r\n                | summarize arg_min(step6_time, *) by user_Id\r\n                | project user_Id, step1_time,step2_time,step3_time,step4_time,step5_time,step6_time);\r\nlet result1 = step1  | join hint.strategy=broadcast\r\n    ( all ) on user_Id\r\n        | where timestamp > step1_time | summarize arg_min(timestamp, name) by user_Id\r\n        | summarize Count=count() by name | top 5 by Count desc | project Name = name, Count, step = strcat('1. ', '{TopStep}');\r\nlet result2 = step2  | join hint.strategy=broadcast\r\n             ( all ) on user_Id\r\n             | where timestamp > step2_time | summarize arg_min(timestamp, name) by user_Id\r\n             | summarize Count=count() by name | top 5 by Count desc | project Name=name, Count, step = strcat('2. ', '{SecondStep}');\r\nlet result3 = step3  | join hint.strategy=broadcast\r\n             ( all ) on user_Id\r\n             | where timestamp > step3_time | summarize arg_min(timestamp, name) by user_Id\r\n             | summarize Count=count() by name | top 5 by Count desc | project Name=name, Count, step = strcat('3. ', '{ThirdStep}');\r\nlet result4 = step4  | join hint.strategy=broadcast\r\n             ( all ) on user_Id\r\n             | where timestamp > step4_time | summarize arg_min(timestamp, name) by user_Id\r\n             | summarize Count=count() by name | top 5 by Count desc | project Name=name, Count, step = strcat('4. ', '{FourthStep}');\r\nlet result5 = step5  | join hint.strategy=broadcast\r\n             ( all ) on user_Id\r\n             | where timestamp > step5_time | summarize arg_min(timestamp, name) by user_Id\r\n             | summarize Count=count() by name | top 5 by Count desc | project Name=name, Count, step = strcat('5. ', '{FifthStep}');\r\nlet result6 = step6  | join hint.strategy=broadcast\r\n             ( all ) on user_Id\r\n             | where timestamp > step6_time | summarize arg_min(timestamp, name) by user_Id\r\n             | summarize Count=count() by name | top 5 by Count desc | project Name=name, Count, step = strcat('6. ', '{SixthStep}');\r\nunion result1,result2, result3, result4, result5, result6\r\n| where step == iif('{StepId}' == ' ', strcat('1. ', '{TopStep}'), '{StepId}')\r\n| project Name, Count",
                    "size": 1,
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "Count",
                          "formatter": 3,
                          "formatOptions": {
                            "palette": "blue",
                            "customColumnWidthSetting": "200px"
                          },
                          "numberFormat": {
                            "unit": 17,
                            "options": {
                              "style": "decimal",
                              "useGrouping": false
                            }
                          }
                        }
                      ]
                    }
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "IsViewMode",
                      "comparison": "isEqualTo",
                      "value": "1"
                    },
                    {
                      "parameterName": "StepsNumber",
                      "comparison": "isNotEqualTo",
                      "value": "0"
                    }
                  ],
                  "name": "query - 8b",
                  "styleSettings": {
                    "padding": "0px"
                  }
                }
              ]
            },
            "name": "group - gridlayout2",
            "styleSettings": {
              "margin": "20px",
              "showBorder": true
            }
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "IsViewMode",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "StepsNumber",
          "comparison": "isNotEqualTo",
          "value": "0"
        }
      ],
      "customWidth": "40",
      "name": "group - usersLink",
      "styleSettings": {
        "margin": "0px",
        "padding": "0px"
      }
    }
  ]
}