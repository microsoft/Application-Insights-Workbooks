{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "e726c4da-6cd7-40c6-89a0-331bb949e0bb",
            "version": "KqlParameterItem/1.0",
            "name": "timerange",
            "label": "Time Range",
            "type": 4,
            "isRequired": true,
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2419200000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ],
              "allowCustom": true
            },
            "value": {
              "durationMs": 3600000
            }
          },
          {
            "id": "fb10311d-3294-4c6f-ab4d-c07e249a5ecf",
            "version": "KqlParameterItem/1.0",
            "name": "AppInsightsInstance",
            "type": 5,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false,
              "componentIdOnly": true
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "b5d26796-7e2d-4d58-9fa1-e2dcbe9aa186",
            "version": "KqlParameterItem/1.0",
            "name": "Prometheus",
            "label": "AMW",
            "type": 1,
            "isRequired": true,
            "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"{AppInsightsInstance}?api-version=2018-05-01-preview\",\"urlParams\":[],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.properties.AzureMonitorWorkspaceResourceId\",\"columns\":[]}}]}",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 12,
            "value": null
          }
        ],
        "style": "pills",
        "queryType": 0
      },
      "name": "parameters - 0"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "{\"version\":\"1.0.0\",\"content\":\"[\\r\\n\\t{ \\\"value\\\": \\\"● Server Response Time (P99)\\\" },\\r\\n    { \\\"value\\\": \\\"● Server Response Time (Avg)\\\" },\\r\\n\\t{ \\\"value\\\": \\\"● Server Failure Rate (HTTP)\\\" },\\r\\n\\t{ \\\"value\\\": \\\"● Client Failure Rate (HTTP)\\\" },\\r\\n\\t{ \\\"value\\\": \\\"● Server Failure Rate (RPC)\\\" },\\r\\n\\t{ \\\"value\\\": \\\"● Client Failure Rate (RPC)\\\" }\\r\\n]\",\"transformers\":null}",
        "size": 4,
        "queryType": 8
      },
      "conditionalVisibility": {
        "parameterName": "debug",
        "comparison": "isEqualTo",
        "value": "true"
      },
      "name": "ScenarioStaticList"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "{\"version\":\"PrometheusQueryProvider/1.0\",\"customEndpoint\":false,\"queryText\":\"__name__\",\"type\":\"labelvalues\"}",
        "size": 1,
        "timeContext": {
          "durationMs": 86400000
        },
        "queryType": 16,
        "resourceType": "microsoft.monitor/accounts",
        "crossComponentResources": [
          "{Prometheus}"
        ]
      },
      "conditionalVisibility": {
        "parameterName": "debug",
        "comparison": "isEqualTo",
        "value": "true"
      },
      "name": "MetricList"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "3985a96d-1f47-457f-a8cb-f634d1c44160",
            "version": "KqlParameterItem/1.0",
            "name": "Scenario",
            "label": "Quick Start",
            "type": 2,
            "isRequired": true,
            "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"1bdf843c-40c0-4c15-b02e-dcddd1db4024\",\"mergeType\":\"union\",\"leftTable\":\"ScenarioStaticList\",\"rightTable\":\"MetricList\"}]}",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 7,
            "value": "● Client Failure Rate (RPC)"
          },
          {
            "id": "7efe4521-ecb8-454d-8808-c915c4549acc",
            "version": "KqlParameterItem/1.0",
            "name": "IsScenario",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "Scenario",
                  "operator": "startsWith",
                  "rightValType": "static",
                  "rightVal": "●",
                  "resultValType": "static",
                  "resultVal": "true"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "false"
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            }
          }
        ],
        "style": "pills",
        "queryType": 7
      },
      "customWidth": "40",
      "name": "paramScenario"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "9c76a7b5-8343-4789-8c7a-df9dc2b3daae",
            "version": "KqlParameterItem/1.0",
            "name": "ScenarioGroupBy",
            "label": "Group By",
            "type": 2,
            "multiSelect": true,
            "quote": "\"",
            "delimiter": ",",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    \"Service Name\",\r\n    \"Route\",\r\n    \"Method\"\r\n]",
            "timeContext": {
              "durationMs": 86400000
            },
            "value": []
          },
          {
            "id": "2d36ed83-e9f9-445d-8013-52f3b96955ff",
            "version": "KqlParameterItem/1.0",
            "name": "ScenarioFilterBy",
            "label": "Filter By",
            "type": 2,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[\r\n    \"Service Name\",\r\n    \"Route\"\r\n]",
            "timeContext": {
              "durationMs": 86400000
            },
            "value": "Service Name"
          },
          {
            "id": "f7e6f878-e3fb-4133-8d95-c3c05fc286b7",
            "version": "KqlParameterItem/1.0",
            "name": "ScenarioFilterByLabel",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "ScenarioFilterBy",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "Service Name",
                  "resultValType": "static",
                  "resultVal": "service.name"
                }
              },
              {
                "criteriaContext": {
                  "leftOperand": "ScenarioFilterBy",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "Route",
                  "resultValType": "static",
                  "resultVal": "http.route"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "up"
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "4b25a0d3-597d-49eb-8e41-73c6a3593110",
            "version": "KqlParameterItem/1.0",
            "name": "ScenarioFilterValue",
            "label": "Filter Value",
            "type": 2,
            "query": "{\"version\":\"PrometheusQueryProvider/1.0\",\"customEndpoint\":false,\"queryText\":\"{ScenarioFilterByLabel}\",\"type\":\"labelvalues\",\"filterName\":\"{\\\"http.server.request.duration\\\"}\"}",
            "crossComponentResources": [
              "{Prometheus}"
            ],
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 16,
            "resourceType": "microsoft.monitor/accounts",
            "value": null
          }
        ],
        "style": "pills",
        "doNotRunWhenHidden": true,
        "queryType": 0,
        "resourceType": "microsoft.monitor/accounts"
      },
      "conditionalVisibility": {
        "parameterName": "IsScenario",
        "comparison": "isEqualTo",
        "value": "true"
      },
      "name": "paramGroupByScenario"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "crossComponentResources": [
          "{Prometheus}"
        ],
        "parameters": [
          {
            "id": "b47c15bc-fe64-4f14-8eea-6829228376b5",
            "version": "KqlParameterItem/1.0",
            "name": "MetricGroupBy",
            "label": "Group By",
            "type": 2,
            "multiSelect": true,
            "quote": "\"",
            "delimiter": ",",
            "query": "{\"version\":\"PrometheusQueryProvider/1.0\",\"customEndpoint\":false,\"queryText\":\"{Scenario}\",\"type\":\"labels\"}",
            "crossComponentResources": [
              "{Prometheus}"
            ],
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 16,
            "resourceType": "microsoft.monitor/accounts"
          },
          {
            "id": "91c5ca54-bbc7-40a3-a689-b155811ff4f5",
            "version": "KqlParameterItem/1.0",
            "name": "MetricFilterBy",
            "label": "Filter By",
            "type": 2,
            "query": "{\"version\":\"PrometheusQueryProvider/1.0\",\"customEndpoint\":false,\"queryText\":\"{Scenario}\",\"type\":\"labels\"}",
            "crossComponentResources": [
              "{Prometheus}"
            ],
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 16,
            "resourceType": "microsoft.monitor/accounts",
            "value": null
          },
          {
            "id": "278be70f-53b0-4710-b08e-afb43a61b8d1",
            "version": "KqlParameterItem/1.0",
            "name": "MetricFilterValue",
            "label": "Filter Value",
            "type": 2,
            "query": "{\"version\":\"PrometheusQueryProvider/1.0\",\"customEndpoint\":false,\"queryText\":\"{MetricFilterBy}\",\"type\":\"labelvalues\",\"filterName\":\"{\\\"http.server.request.duration\\\"}\"}",
            "crossComponentResources": [
              "{Prometheus}"
            ],
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 16,
            "resourceType": "microsoft.monitor/accounts"
          }
        ],
        "style": "pills",
        "doNotRunWhenHidden": true,
        "queryType": 16,
        "resourceType": "microsoft.monitor/accounts"
      },
      "conditionalVisibility": {
        "parameterName": "IsScenario",
        "comparison": "isNotEqualTo",
        "value": "true"
      },
      "name": "paramGroupByMetric"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "6cd3b82d-860a-4bfb-858b-4da0afcb17c2",
            "version": "KqlParameterItem/1.0",
            "name": "PromQL",
            "type": 1,
            "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"let Replace1 = (val:string) {\\r\\n    replace_strings(\\r\\n        val,\\r\\n        dynamic([\\\"Route\\\", \\\"Method\\\", \\\"Service Name\\\"]),\\r\\n        dynamic([\\\"http.route\\\", \\\"http.request.method\\\", \\\"service.name\\\"])\\r\\n    )\\r\\n};\\r\\nlet Replace2 = (val:string) {\\r\\n    replace_strings(\\r\\n        val,\\r\\n        dynamic([\\\"Route\\\", \\\"Method\\\", \\\"Service Name\\\"]),\\r\\n        dynamic([\\\"rpc.route\\\", \\\"rpc.method\\\", \\\"service.name\\\"])\\r\\n    )\\r\\n};\\r\\n// For HTTP failure rate scenarios, we need http.method (not http.request.method)\\r\\nlet ReplaceHttpMethod = (val:string) {\\r\\n    replace_strings(\\r\\n        val,\\r\\n        dynamic([\\\"Route\\\", \\\"Method\\\", \\\"Service Name\\\"]),\\r\\n        dynamic([\\\"http.route\\\", \\\"http.method\\\", \\\"service.name\\\"])\\r\\n    )\\r\\n};\\r\\n// For RPC failure rate scenarios, we need rpc.method and rpc.service\\r\\nlet ReplaceRpcFailure = (val:string) {\\r\\n    replace_strings(\\r\\n        val,\\r\\n        dynamic([\\\"Route\\\", \\\"Method\\\", \\\"Service Name\\\"]),\\r\\n        dynamic([\\\"rpc.method\\\", \\\"rpc.method\\\", \\\"service.name\\\"])\\r\\n    )\\r\\n};\\r\\n\\r\\nlet Group1 = Replace1(iif(isempty('{ScenarioGroupBy}'), 'le', '{ScenarioGroupBy}, le'));\\r\\nlet Group2 = Replace2(iif(isempty('{ScenarioGroupBy}'), 'le', '{ScenarioGroupBy}, le'));\\r\\nlet GroupFailure = ReplaceHttpMethod(iif(isempty('{ScenarioGroupBy}'), '\\\"service.name\\\",\\\"http.method\\\",\\\"http.route\\\", le', '{ScenarioGroupBy}, le'));\\r\\nlet GroupRpcFailure = ReplaceRpcFailure(iif(isempty('{ScenarioGroupBy}'), '\\\"service.name\\\",\\\"rpc.method\\\",\\\"rpc.service\\\", le', '{ScenarioGroupBy}, le'));\\r\\nlet Group = iif(isempty('{MetricGroupBy}'), 'le', '{MetricGroupBy}, le');\\r\\n\\r\\nlet Filter1 = iif(isempty(\\\"{ScenarioFilterBy}\\\"), \\\"\\\", strcat(Replace1(', \\\"{ScenarioFilterBy}\\\"'), '=~\\\"{ScenarioFilterValue}\\\"'));\\r\\nlet Filter2 = iif(isempty(\\\"{ScenarioFilterBy}\\\"), \\\"\\\", strcat(Replace2(', \\\"{ScenarioFilterBy}\\\"'), '=~\\\"{ScenarioFilterValue}\\\"'));\\r\\n\\r\\nlet QuotedMetric = iif(\\\"{Scenario}\\\" contains \\\".\\\", \\r\\n  iif(isempty('{MetricFilterBy}'), '{\\\"{Scenario}\\\"}', '{\\\"{Scenario}\\\", \\\"{MetricFilterBy}\\\"=~\\\"{MetricFilterValue}\\\"}'), \\r\\n  iif(isempty('{MetricFilterBy}'), '{Scenario}', '{Scenario}{\\\"{MetricFilterBy}\\\"=~\\\"{MetricFilterValue}\\\"}')\\r\\n);\\r\\n\\r\\nprint(\\r\\n   case(\\r\\n    \\\"{Scenario}\\\" == \\\"● Server Response Time (P99)\\\",\\r\\n      strcat('histogram_quantile(0.99, sum by (', Group1, ') (rate({\\\"http.server.request.duration\\\"', Filter1 ,'}[5m]))) or histogram_quantile(0.99, sum by (', Group2, ') (rate({__name__=\\\"rpc.server.duration\\\"', Filter2, '}[5m])))'),\\r\\n    \\\"{Scenario}\\\" == \\\"● Server Response Time (Avg)\\\",\\r\\n      strcat(\\\"histogram_avg(sum by (\\\", Group1, \\\") (rate({'http.server.request.duration'\\\", Filter1 ,\\\"}[5m]))) or histogram_avg(sum by (\\\", Group2, \\\") (rate({__name__='rpc.server.duration'\\\", Filter2, \\\"}[5m])))\\\"),\\r\\n    \\\"{Scenario}\\\" == \\\"● Server Failure Rate (HTTP)\\\",\\r\\n      strcat(\\\"(\\\",\\r\\n        \\\"histogram_count(sum by (\\\", GroupFailure, \\\") (increase({\\\\\\\"http.server.duration\\\\\\\", \\\\\\\"http.status_code\\\\\\\"=~\\\\\\\"5..\\\\\\\"}[2m])))\\\",\\r\\n        \\\") / (\\\",\\r\\n        \\\"histogram_count(sum by (\\\", GroupFailure, \\\") (increase({\\\\\\\"http.server.duration\\\\\\\"}[2m])))\\\",\\r\\n        \\\") * 100\\\"\\r\\n      ),\\r\\n    \\\"{Scenario}\\\" == \\\"● Client Failure Rate (HTTP)\\\",\\r\\n      strcat(\\\"(\\\",\\r\\n        \\\"histogram_count(sum by (\\\", GroupFailure, \\\") (increase({\\\\\\\"http.client.duration\\\\\\\", \\\\\\\"http.status_code\\\\\\\"=~\\\\\\\"5..\\\\\\\"}[2m])))\\\",\\r\\n        \\\") / (\\\",\\r\\n        \\\"histogram_count(sum by (\\\", GroupFailure, \\\") (increase({\\\\\\\"http.client.duration\\\\\\\"}[2m])))\\\",\\r\\n        \\\") * 100\\\"\\r\\n      ),\\r\\n    \\\"{Scenario}\\\" == \\\"● Server Failure Rate (RPC)\\\",\\r\\n      strcat(\\\"(\\\",\\r\\n        \\\"histogram_count(sum by (\\\", GroupRpcFailure, \\\") (increase({\\\\\\\"rpc.server.duration\\\\\\\",\\\\\\\"rpc.grpc.status_code\\\\\\\"!=\\\\\\\"0\\\\\\\"}[2m])))\\\",\\r\\n        \\\") / (\\\",\\r\\n        \\\"histogram_count(sum by (\\\", GroupRpcFailure, \\\") (increase({\\\\\\\"rpc.server.duration\\\\\\\"}[2m])))\\\",\\r\\n        \\\") * 100\\\"\\r\\n      ),\\r\\n    \\\"{Scenario}\\\" == \\\"● Client Failure Rate (RPC)\\\",\\r\\n      strcat(\\\"(\\\",\\r\\n        \\\"histogram_count(sum by (\\\", GroupRpcFailure, \\\") (increase({\\\\\\\"rpc.client.duration\\\\\\\",\\\\\\\"rpc.grpc.status_code\\\\\\\"!=\\\\\\\"0\\\\\\\"}[2m])))\\\",\\r\\n        \\\") / (\\\",\\r\\n        \\\"histogram_count(sum by (\\\", GroupRpcFailure, \\\") (increase({\\\\\\\"rpc.client.duration\\\\\\\"}[2m])))\\\",\\r\\n        \\\") * 100\\\"\\r\\n      ),\\r\\n    iif(isempty('{MetricGroupBy}'), QuotedMetric, strcat('sum by (', Group, ') (', QuotedMetric, ')'))\\r\\n  )\\r\\n)\",\"clusterName\":\"help\",\"databaseName\":\"Samples\"}",
            "typeSettings": {
              "multiLineText": true,
              "editorLanguage": "promql"
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 9
          }
        ],
        "style": "above",
        "queryType": 9
      },
      "name": "paramPromQL"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "crossComponentResources": [
          "{Prometheus}"
        ],
        "parameters": [
          {
            "id": "40128183-06c2-4add-87f7-80f2a8b19ddb",
            "version": "KqlParameterItem/1.0",
            "name": "check",
            "type": 1,
            "isRequired": true,
            "query": "{\"version\":\"PrometheusQueryProvider/1.0\",\"queryText\":\"time()\",\"type\":\"query\"}",
            "crossComponentResources": [
              "{Prometheus}"
            ],
            "timeContext": {
              "durationMs": 1800000
            },
            "queryType": 16,
            "resourceType": "microsoft.monitor/accounts"
          },
          {
            "id": "545036a2-e947-4e29-b272-74fe38e45d0f",
            "version": "KqlParameterItem/1.0",
            "name": "data",
            "type": 1,
            "query": "{\"version\":\"PrometheusQueryProvider/1.0\",\"queryText\":\"# {check} only runs if check param was valid (have access)\\r\\nsum(up)\",\"type\":\"query\"}",
            "crossComponentResources": [
              "{Prometheus}"
            ],
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 16,
            "resourceType": "microsoft.monitor/accounts"
          }
        ],
        "style": "above",
        "queryType": 16,
        "resourceType": "microsoft.monitor/accounts"
      },
      "conditionalVisibility": {
        "parameterName": "show",
        "comparison": "isEqualTo",
        "value": "true"
      },
      "name": "hidden parameters"
    },
    {
      "type": 1,
      "content": {
        "json": "Your Azure Monitor workspace could not be reached. [Please visit the troubleshooting documentation for more information.](https://aka.ms/azuremonitorworkspacepermissions)",
        "style": "warning"
      },
      "conditionalVisibility": {
        "parameterName": "check",
        "comparison": "isEqualTo"
      },
      "name": "no access"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "a090d1d1-c29a-400e-91e8-420042d1cd08",
                  "cellValue": "tab",
                  "linkTarget": "parameter",
                  "linkLabel": "Graph",
                  "subTarget": "graph",
                  "style": "link"
                },
                {
                  "id": "83e54b9a-4ecb-4bba-8127-e575b5872252",
                  "cellValue": "tab",
                  "linkTarget": "parameter",
                  "linkLabel": "Grid",
                  "subTarget": "grid",
                  "style": "link"
                },
                {
                  "id": "31b94c68-2b41-4f64-9d52-af3035658f3c",
                  "cellValue": "tab",
                  "linkTarget": "parameter",
                  "linkLabel": "Dimensions",
                  "subTarget": "dimensions",
                  "style": "link"
                }
              ]
            },
            "name": "links - 3"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"PrometheusQueryProvider/1.0\",\"customEndpoint\":false,\"queryText\":\"{PromQL}\",\"type\":\"query_range\"}",
              "size": 0,
              "aggregation": 3,
              "showAnnotations": true,
              "timeContextFromParameter": "timerange",
              "queryType": 16,
              "resourceType": "microsoft.monitor/accounts",
              "crossComponentResources": [
                "{Prometheus}"
              ],
              "visualization": "timechart",
              "chartSettings": {
                "group": "*",
                "createOtherGroup": 50,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "graph"
            },
            "showPin": true,
            "name": "graph"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"PrometheusQueryProvider/1.0\",\"customEndpoint\":false,\"queryText\":\"{PromQL}\",\"type\":\"query\"}",
              "size": 0,
              "aggregation": 3,
              "showAnnotations": true,
              "timeContextFromParameter": "timerange",
              "queryType": 16,
              "resourceType": "microsoft.monitor/accounts",
              "crossComponentResources": [
                "{Prometheus}"
              ],
              "visualization": "table",
              "chartSettings": {
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "grid"
            },
            "name": "grid"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"PrometheusQueryProvider/1.0\",\"customEndpoint\":false,\"queryText\":\"{PromQL}\",\"type\":\"labels\"}",
              "size": 1,
              "title": "Labels",
              "timeContext": {
                "durationMs": 86400000
              },
              "queryType": 16,
              "resourceType": "microsoft.monitor/accounts",
              "crossComponentResources": [
                "{Prometheus}"
              ],
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "timestamp",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "25ch"
                    }
                  },
                  {
                    "columnMatch": "Up",
                    "formatter": 18,
                    "formatOptions": {
                      "thresholdsOptions": "icons",
                      "thresholdsGrid": [
                        {
                          "operator": "==",
                          "thresholdValue": "1",
                          "representation": "success",
                          "text": ""
                        },
                        {
                          "operator": "==",
                          "thresholdValue": "0",
                          "representation": "stopped",
                          "text": ""
                        },
                        {
                          "operator": "Default",
                          "thresholdValue": null,
                          "representation": "Blank",
                          "text": "Unknown ({0})"
                        }
                      ]
                    }
                  }
                ]
              }
            },
            "conditionalVisibility": {
              "parameterName": "tab",
              "comparison": "isEqualTo",
              "value": "dimensions"
            },
            "name": "labels"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "check",
        "comparison": "isNotEqualTo"
      },
      "name": "access check"
    }
  ],
  "fallbackResourceIds": [
    "azure monitor"
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}
