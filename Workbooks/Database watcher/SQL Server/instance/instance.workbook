{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "a762a2ae-beec-4bf5-9f4a-28bea2d2f737",
            "version": "KqlParameterItem/1.0",
            "name": "watcherResourceId",
            "isRequired": true,
            "type": 1,
            "isHiddenWhenLocked": true,
            "value": ""
          },
          {
            "id": "19f22da1-c8c7-42cc-9849-cf6aeddb7ba0",
            "version": "KqlParameterItem/1.0",
            "name": "linkAdxClusterUri",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "value": ""
          },
          {
            "id": "b4b8f00b-7e05-4ae2-ad2b-2ba99f74b49a",
            "version": "KqlParameterItem/1.0",
            "name": "linkAdxDatabase",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "value": ""
          }
        ],
        "style": "pills",
        "queryType": 9
      },
      "conditionalVisibility": {
        "parameterName": "neverShow",
        "comparison": "isNotEqualTo"
      },
      "name": "link_adx_parameters"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Data store",
        "expandable": true,
        "items": [
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "a762a2ae-beec-4bf5-9f4a-28bea2d2f737",
                  "version": "KqlParameterItem/1.0",
                  "name": "watcherResourceId",
                  "type": 1,
                  "isHiddenWhenLocked": true,
                  "value": ""
                },
                {
                  "id": "83420d36-0646-40aa-9637-d06a3d2a6145",
                  "version": "KqlParameterItem/1.0",
                  "name": "watcherResource",
                  "type": 1,
                  "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"{watcherResourceId}?api-version=2023-03-01-preview\",\"urlParams\":[],\"batchDisabled\":false,\"transformers\":null}",
                  "isHiddenWhenLocked": true,
                  "queryType": 12
                },
                {
                  "id": "a6cd9521-127a-43bd-9227-6bcd67756456",
                  "version": "KqlParameterItem/1.0",
                  "name": "watcherName",
                  "type": 1,
                  "query": "{\"version\":\"1.0.0\",\"content\":\"{watcherResource}\",\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.name\",\"columns\":[]}}]}",
                  "isHiddenWhenLocked": true,
                  "queryType": 8
                },
                {
                  "version": "KqlParameterItem/1.0",
                  "name": "watcherAdxClusterUri",
                  "type": 1,
                  "query": "{\"version\":\"1.0.0\",\"content\":\"{watcherResource}\",\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.properties.datastore.adxClusterUri\",\"columns\":[]}}]}",
                  "isHiddenWhenLocked": true,
                  "queryType": 8,
                  "id": "f0889b5f-3fa4-40a0-838d-443b4c0472b6"
                },
                {
                  "id": "0797c608-2ecf-4711-ba9b-6d110f10acd3",
                  "version": "KqlParameterItem/1.0",
                  "name": "watcherAdxDatabase",
                  "type": 1,
                  "query": "{\"version\":\"1.0.0\",\"content\":\"{watcherResource}\",\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"\",\"columns\":[{\"path\":\"$.properties.datastore.adxDatabaseResourceId\",\"columnid\":\"value\",\"columnType\":\"string\",\"substringRegexMatch\":\".*/(.*)\",\"substringReplace\":\"$1\"}]}}]}",
                  "isHiddenWhenLocked": true,
                  "queryType": 8
                },
                {
                  "id": "1b7d18f3-88a9-40ed-9162-92710b29ba69",
                  "version": "KqlParameterItem/1.0",
                  "name": "dataStore",
                  "label": "Choose a data store",
                  "type": 10,
                  "description": "By default, the workbook loads data from the data store for the current database watcher. You may use an alternate data store by entering its Kusto query URI and database name.",
                  "isRequired": true,
                  "query": "{\"version\":\"1.0.0\",\"content\":\"[{\\\"value\\\":\\\"watcher\\\",\\\"label\\\":\\\"{watcherName}\\\"},{\\\"value\\\":\\\"alternate\\\",\\\"label\\\":\\\"Alternate\\\"}]\",\"transformers\":null}",
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "queryType": 8,
                  "value": "watcher"
                }
              ],
              "style": "above",
              "queryType": 12
            },
            "customWidth": "30",
            "name": "watcher_adx_parameters"
          },
          {
            "type": 1,
            "content": {
              "json": "Kusto query URI: `{watcherAdxClusterUri}` </p>\r\nKusto database: `{watcherAdxDatabase}`"
            },
            "customWidth": "70",
            "conditionalVisibilities": [
              {
                "parameterName": "watcherName",
                "comparison": "isNotEqualTo"
              },
              {
                "parameterName": "watcherAdxClusterUri",
                "comparison": "isNotEqualTo"
              },
              {
                "parameterName": "watcherAdxDatabase",
                "comparison": "isNotEqualTo"
              },
              {
                "parameterName": "dataStore",
                "comparison": "isEqualTo",
                "value": "watcher"
              }
            ],
            "name": "watcher_data_store"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "bbce4b83-dae6-46e0-bf67-c99ee0ea21f0",
                  "version": "KqlParameterItem/1.0",
                  "name": "overrideAdxClusterUri",
                  "label": "Kusto query URI",
                  "type": 1,
                  "description": "Enter a Kusto query URI for the alternate data store. Most commonly, Kusto query URI format is: https://{kusto-cluster-name}.{region}.kusto.windows.net/",
                  "isRequired": true,
                  "value": ""
                },
                {
                  "id": "99cdb447-94d3-40c7-b902-c98628fb736a",
                  "version": "KqlParameterItem/1.0",
                  "name": "overrideAdxDatabase",
                  "label": "Kusto database",
                  "type": 1,
                  "description": "Enter a Kusto database name for the alternate data store",
                  "isRequired": true,
                  "value": ""
                }
              ],
              "style": "formHorizontal",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "customWidth": "70",
            "conditionalVisibility": {
              "parameterName": "dataStore",
              "comparison": "isEqualTo",
              "value": "alternate"
            },
            "name": "override_adx_parameters"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "19f22da1-c8c7-42cc-9849-cf6aeddb7ba0",
                  "version": "KqlParameterItem/1.0",
                  "name": "adxClusterUri",
                  "type": 1,
                  "isRequired": true,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "leftOperand": "dataStore",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "alternate",
                        "resultValType": "param",
                        "resultVal": "overrideAdxClusterUri"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "linkAdxClusterUri",
                        "operator": "isNotNull",
                        "rightValType": "param",
                        "resultValType": "param",
                        "resultVal": "linkAdxClusterUri"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "dataStore",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "watcher",
                        "resultValType": "param",
                        "resultVal": "watcherAdxClusterUri"
                      }
                    },
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "resultValType": "param",
                        "resultVal": "linkAdxClusterUri"
                      }
                    }
                  ]
                },
                {
                  "id": "b4b8f00b-7e05-4ae2-ad2b-2ba99f74b49a",
                  "version": "KqlParameterItem/1.0",
                  "name": "adxDatabase",
                  "type": 1,
                  "isRequired": true,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "leftOperand": "dataStore",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "alternate",
                        "resultValType": "param",
                        "resultVal": "overrideAdxDatabase"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "linkAdxDatabase",
                        "operator": "isNotNull",
                        "rightValType": "param",
                        "resultValType": "param",
                        "resultVal": "linkAdxDatabase"
                      }
                    },
                    {
                      "criteriaContext": {
                        "leftOperand": "dataStore",
                        "operator": "==",
                        "rightValType": "static",
                        "rightVal": "watcher",
                        "resultValType": "param",
                        "resultVal": "watcherAdxDatabase"
                      }
                    },
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "resultValType": "param",
                        "resultVal": "linkAdxDatabase"
                      }
                    }
                  ]
                },
                {
                  "id": "c5aca9de-de62-466e-bea8-9a149e935c4f",
                  "version": "KqlParameterItem/1.0",
                  "name": "adxClusterPingResult",
                  "label": "Kusto query URI ping result",
                  "type": 1,
                  "isRequired": true,
                  "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\".show databases\\r\\n| where DatabaseName == @\\\"{adxDatabase}\\\"\\r\\n| project 1\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"\"}",
                  "isHiddenWhenLocked": true,
                  "queryType": 9
                }
              ],
              "style": "pills",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "conditionalVisibility": {
              "parameterName": "alwaysHidden",
              "comparison": "isNotEqualTo"
            },
            "name": "adx_parameters"
          },
          {
            "type": 1,
            "content": {
              "json": "Cannot connect to Kusto query URI `{adxClusterUri}`, database `{adxDatabase}`. The Kusto cluster may be stopped or unreachable, specified cluster URI may be invalid, or permissions may be insufficient.",
              "style": "warning"
            },
            "conditionalVisibilities": [
              {
                "parameterName": "adxClusterPingResult",
                "comparison": "isNotEqualTo",
                "value": "1"
              },
              {
                "parameterName": "adxClusterUri",
                "comparison": "isNotEqualTo"
              },
              {
                "parameterName": "adxDatabase",
                "comparison": "isNotEqualTo"
              }
            ],
            "name": "missing_data_bad_permissions_text"
          }
        ],
        "exportParameters": true
      },
      "name": "data_store_group"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "42b9bd72-5d10-4a80-8ce0-049a5ae7d6d0",
            "version": "KqlParameterItem/1.0",
            "name": "tablePresence",
            "type": 1,
            "isRequired": true,
            "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\".show tables\\r\\n| where TableName startswith_cs \\\"sqlserver_\\\"\\r\\n| project TableName\\r\\n| summarize sqlserver_properties = take_anyif(1, TableName == \\\"sqlserver_properties\\\"),\\r\\n            sqlserver_database_storage_utilization = take_anyif(1, TableName == \\\"sqlserver_database_storage_utilization\\\"),\\r\\n            sqlserver_cpu_utilization = take_anyif(1, TableName == \\\"sqlserver_cpu_utilization\\\"),\\r\\n            sqlserver_performance_counters_common = take_anyif(1, TableName == \\\"sqlserver_performance_counters_common\\\"),\\r\\n            sqlserver_wait_stats = take_anyif(1, TableName == \\\"sqlserver_wait_stats\\\"),\\r\\n            sqlserver_memory_utilization = take_anyif(1, TableName == \\\"sqlserver_memory_utilization\\\"),\\r\\n            sqlserver_storage_io = take_anyif(1, TableName == \\\"sqlserver_storage_io\\\"),\\r\\n            sqlserver_active_sessions = take_anyif(1, TableName == \\\"sqlserver_active_sessions\\\"),\\r\\n            sqlserver_table_metadata = take_anyif(1, TableName == \\\"sqlserver_table_metadata\\\"),\\r\\n            sqlserver_volume_storage_utilization = take_anyif(1, TableName == \\\"sqlserver_volume_storage_utilization\\\"),\\r\\n            sqlserver_database_properties = take_anyif(1, TableName == \\\"sqlserver_database_properties\\\"),\\r\\n            sqlserver_sqlagent_job_state = take_anyif(1, TableName == \\\"sqlserver_sqlagent_job_state\\\"),\\r\\n            sqlserver_sqlagent_job_history = take_anyif(1, TableName == \\\"sqlserver_sqlagent_job_history\\\"),\\r\\n            sqlserver_database_replicas = take_anyif(1, TableName == \\\"sqlserver_database_replicas\\\"),\\r\\n            sqlserver_query_runtime_stats = take_anyif(1, TableName == \\\"sqlserver_query_runtime_stats\\\"),\\r\\n            sqlserver_query_wait_stats = take_anyif(1, TableName == \\\"sqlserver_query_wait_stats\\\"),\\r\\n            sqlserver_connectivity = take_anyif(1, TableName == \\\"sqlserver_connectivity\\\"),\\r\\n            sqlserver_sql_backup_history = take_anyif(1, TableName == \\\"sqlserver_sql_backup_history\\\")\\r\\n| project table_presence = dynamic_to_json(pack_all());\\r\\n\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
            "isHiddenWhenLocked": true,
            "typeSettings": {
              "multiLineText": true,
              "editorLanguage": "text",
              "multiLineHeight": 2
            },
            "queryType": 9
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4100",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_properties",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_properties}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4101",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_database_storage_utilization",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_database_storage_utilization}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4102",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_cpu_utilization",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_cpu_utilization}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4103",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_performance_counters_common",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_performance_counters_common}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4104",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_wait_stats",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_wait_stats}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4105",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_memory_utilization",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_memory_utilization}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4106",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_storage_io",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_storage_io}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4107",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_active_sessions",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_active_sessions}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4108",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_table_metadata",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_table_metadata}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4109",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_volume_storage_utilization",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_volume_storage_utilization}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4110",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_database_properties",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_database_properties}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4111",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_sqlagent_job_state",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_sqlagent_job_state}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4112",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_sqlagent_job_history",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_sqlagent_job_history}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4113",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_database_replicas",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_database_replicas}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4114",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_query_runtime_stats",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_query_runtime_stats}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4115",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_query_wait_stats",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_query_wait_stats}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4116",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_connectivity",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_connectivity}"
                }
              }
            ]
          },
          {
            "id": "4efc99f1-4cd2-417f-94ca-60fec15d4117",
            "version": "KqlParameterItem/1.0",
            "name": "sqlserver_sql_backup_history",
            "type": 1,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "static",
                  "resultVal": "{tablePresence:$.sqlserver_sql_backup_history}"
                }
              }
            ]
          }
        ],
        "style": "above",
        "queryType": 9
      },
      "conditionalVisibility": {
        "parameterName": "alwaysHidden",
        "comparison": "isNotEqualTo"
      },
      "name": "table_presence_parameters"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "eecd0908-04fd-4739-bef2-bcab66117f39",
            "version": "KqlParameterItem/1.0",
            "name": "timeRange",
            "label": "Time range",
            "type": 4,
            "isRequired": true,
            "isGlobal": true,
            "value": {
              "durationMs": 3600000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2419200000
                }
              ],
              "allowCustom": true
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "af2070be-277a-4367-bf50-0023e84eb8c9",
            "version": "KqlParameterItem/1.0",
            "name": "machineName",
            "label": "Machine name",
            "type": 2,
            "description": "Select a machine (computer) name hosting SQL Server instances",
            "isRequired": true,
            "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_properties\\r\\n| where sample_time_utc between (\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:start} - 1h), {timeRange:start})\\r\\n                                ..\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:end} + 1h), {timeRange:end})\\r\\n                                ) // Expand the range if selected range is shorter than the least frequent collection interval (1h)\\r\\n| where isnotempty(machine_name)\\r\\n| distinct machine_name\\r\\n| order by machine_name asc\\r\\n\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 9,
            "value": null
          },
          {
            "id": "e61b3c5d-3911-4a7b-8c92-133c352a4b86",
            "version": "KqlParameterItem/1.0",
            "name": "instanceCount",
            "type": 1,
            "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_properties\\r\\n| where sample_time_utc between (\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:start} - 1h), {timeRange:start})\\r\\n                                ..\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:end} + 1h), {timeRange:end})\\r\\n                                ) // Expand the range if selected range is shorter than the least frequent collection interval (1h)\\r\\n| where machine_name in~ (\\\"{machineName}\\\")\\r\\n| summarize instance_count = dcount(server_name)\\r\\n\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 9
          },
          {
            "id": "40ec86a0-0188-4e9a-96c1-d2dc85c512eb",
            "version": "KqlParameterItem/1.0",
            "name": "singleServerName",
            "type": 1,
            "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_properties\\r\\n| where sample_time_utc between (\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:start} - 1h), {timeRange:start})\\r\\n                                ..\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:end} + 1h), {timeRange:end})\\r\\n                                ) // Expand the range if selected range is shorter than the least frequent collection interval (1h)\\r\\n| where machine_name in~ (\\\"{machineName}\\\")\\r\\n| summarize server_name = take_any(server_name)\\r\\n\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 9
          },
          {
            "id": "be3eb2c6-0152-47c6-8e25-93ebc524308b",
            "version": "KqlParameterItem/1.0",
            "name": "selectedServerName",
            "label": "SQL instance name",
            "type": 2,
            "description": "Select a specific SQL Server instance when multiple instances are running on the machine",
            "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_properties\\r\\n| where sample_time_utc between (\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:start} - 1h), {timeRange:start})\\r\\n                                ..\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:end} + 1h), {timeRange:end})\\r\\n                                ) // Expand the range if selected range is shorter than the least frequent collection interval (1h)\\r\\n| where machine_name in~ (\\\"{machineName}\\\")\\r\\n| distinct server_name\\r\\n| order by tolower(server_name) asc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 9,
            "value": null
          },
          {
            "id": "859e1723-fba2-4371-88a2-3cce7b3cada6",
            "version": "KqlParameterItem/1.0",
            "name": "showDescriptions",
            "label": "Show descriptions",
            "type": 10,
            "description": "Shows descriptions next to charts",
            "isRequired": true,
            "isGlobal": true,
            "value": "false",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[{\"value\":\"true\",\"label\":\"Yes\"},{\"value\":\"false\",\"label\":\"No\"}]"
          },
          {
            "id": "d540415a-9c4e-45fc-b7b8-1c37d0f06501",
            "version": "KqlParameterItem/1.0",
            "name": "grainFactor",
            "label": "Grain factor",
            "type": 2,
            "description": "Higher time grain provides more details on charts when granular data exists.",
            "isRequired": true,
            "value": "4",
            "isHiddenWhenLocked": true,
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "jsonData": "[{\"value\":1,\"label\":1},{\"value\":2,\"label\":2},{\"value\":3,\"label\":3},{\"value\":4,\"label\":4},{\"value\":5,\"label\":5},{\"value\":6,\"label\":6}]"
          },
          {
            "id": "32f86b95-6a99-4fc2-9124-5a6e46963d82",
            "version": "KqlParameterItem/1.0",
            "name": "tabName",
            "type": 1,
            "value": "Overview",
            "isHiddenWhenLocked": true
          },
          {
            "id": "b92c695f-6e64-4075-bc04-fa9e5d6408d9",
            "version": "KqlParameterItem/1.0",
            "name": "serverName",
            "type": 1,
            "isRequired": true,
            "isHiddenWhenLocked": true,
            "criteriaData": [
              {
                "criteriaContext": {
                  "leftOperand": "instanceCount",
                  "operator": "==",
                  "rightValType": "static",
                  "rightVal": "1",
                  "resultValType": "param",
                  "resultVal": "singleServerName"
                }
              },
              {
                "criteriaContext": {
                  "operator": "Default",
                  "resultValType": "param",
                  "resultVal": "selectedServerName"
                }
              }
            ],
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "674f7ad3-f7c9-4c67-b8a0-276eef385362",
            "version": "KqlParameterItem/1.0",
            "name": "connectivityTabName",
            "type": 1,
            "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\".show tables\\r\\n| where TableName == \\\"sqlserver_connectivity\\\"\\r\\n| project tab_name = \\\"Connectivity\\\"\\r\\n\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
            "isHiddenWhenLocked": true,
            "queryType": 9,
            "value": null
          },
          {
            "version": "KqlParameterItem/1.0",
            "name": "tablesTabName",
            "type": 1,
            "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\".show tables\\r\\n| where TableName == \\\"sqlserver_table_metadata\\\"\\r\\n| project tab_name = \\\"Tables\\\"\\r\\n\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
            "isHiddenWhenLocked": true,
            "queryType": 9,
            "id": "ecf0cb84-7ae7-45de-b301-c1c19b59a235",
            "value": null
          },
          {
            "version": "KqlParameterItem/1.0",
            "name": "backupTabName",
            "type": 1,
            "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\".show tables\\r\\n| where TableName == \\\"sqlserver_sql_backup_history\\\"\\r\\n| project tab_name = \\\"Backup\\\"\\r\\n\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
            "isHiddenWhenLocked": true,
            "queryType": 9,
            "id": "99c74dec-d7cc-40b9-bf4e-3c5d0fdef5aa",
            "value": null
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "adxClusterPingResult",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "sqlserver_properties",
          "comparison": "isEqualTo",
          "value": "1"
        }
      ],
      "name": "filter_parameters"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Overview",
        "expandable": true,
        "expanded": true,
        "loadType": "always",
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"let time_range = datatable(key:int, time_range_start:datetime, time_range_end:datetime) [\\r\\n1, datetime(\\\"{timeRange:startISO}\\\"), datetime(\\\"{timeRange:endISO}\\\")\\r\\n];\\r\\ntime_range\\r\\n| project time_range_start, time_range_end, time_range_duration = datetime_diff('second', time_range_end, time_range_start), last_refresh_time = now(), fleet_link = \\\"Community-Workbooks/Database watcher/SQL Server/estate\\\", adx_link = strcat(trim_end(\\\"/\\\", \\\"{adxClusterUri}\\\"), \\\"/\\\", \\\"{adxDatabase}\\\")\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 3,
              "noDataMessage": "There is no data for specified parameters.",
              "queryType": 9,
              "visualization": "table",
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "time_range_start",
                    "formatter": 6,
                    "formatOptions": {
                      "customColumnWidthSetting": "23ch"
                    },
                    "dateFormat": {
                      "showUtcTime": null,
                      "formatName": "shortDateTimePattern"
                    },
                    "tooltipFormat": {
                      "tooltip": "Start of time range, as of last refresh"
                    }
                  },
                  {
                    "columnMatch": "time_range_end",
                    "formatter": 6,
                    "formatOptions": {
                      "customColumnWidthSetting": "23ch"
                    },
                    "dateFormat": {
                      "showUtcTime": null,
                      "formatName": "shortDateTimePattern"
                    },
                    "tooltipFormat": {
                      "tooltip": "End of time range, as of last refresh"
                    }
                  },
                  {
                    "columnMatch": "time_range_duration",
                    "formatter": 0,
                    "numberFormat": {
                      "unit": 24,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "last_refresh_time",
                    "formatter": 6,
                    "formatOptions": {
                      "customColumnWidthSetting": "23ch"
                    },
                    "dateFormat": {
                      "showUtcTime": null,
                      "formatName": "shortDateTimePattern"
                    },
                    "tooltipFormat": {
                      "tooltip": "Workbook refresh date and time"
                    }
                  },
                  {
                    "columnMatch": "fleet_link",
                    "formatter": 7,
                    "formatOptions": {
                      "linkTarget": "WorkbookTemplate",
                      "linkLabel": "All SQL Server instances",
                      "workbookContext": {
                        "componentIdSource": "workbook",
                        "resourceIdsSource": "workbook",
                        "templateIdSource": "column",
                        "templateId": "fleet_link",
                        "typeSource": "workbook",
                        "gallerySource": "default",
                        "locationSource": "workbook",
                        "workbookName": "SQL Server instances",
                        "passSpecificParams": true,
                        "templateParameters": [
                          {
                            "name": "watcherResourceId",
                            "source": "parameter",
                            "value": "watcherResourceId"
                          },
                          {
                            "name": "linkAdxClusterUri",
                            "source": "parameter",
                            "value": "adxClusterUri"
                          },
                          {
                            "name": "linkAdxDatabase",
                            "source": "parameter",
                            "value": "adxDatabase"
                          },
                          {
                            "name": "timeRange",
                            "source": "parameter",
                            "value": "timeRange"
                          },
                          {
                            "name": "showDescriptions",
                            "source": "parameter",
                            "value": "showDescriptions"
                          }
                        ]
                      }
                    },
                    "tooltipFormat": {
                      "tooltip": "View all monitored SQL Server instances"
                    }
                  },
                  {
                    "columnMatch": "adx_link",
                    "formatter": 7,
                    "formatOptions": {
                      "linkTarget": "Url",
                      "linkLabel": "Query ADX database"
                    },
                    "tooltipFormat": {
                      "tooltip": "Explore monitoring data using ad-hoc KQL queries"
                    }
                  }
                ],
                "sortBy": [
                  {
                    "itemKey": "$gen_date_time_range_start_0",
                    "sortOrder": 1
                  }
                ],
                "labelSettings": [
                  {
                    "columnId": "time_range_start",
                    "label": "Time range start"
                  },
                  {
                    "columnId": "time_range_end",
                    "label": "Time range end"
                  },
                  {
                    "columnId": "time_range_duration",
                    "label": "Time range duration"
                  },
                  {
                    "columnId": "last_refresh_time",
                    "label": "Last refresh"
                  },
                  {
                    "columnId": "fleet_link",
                    "label": "Estate"
                  },
                  {
                    "columnId": "adx_link",
                    "label": "Data store"
                  }
                ]
              },
              "sortBy": [
                {
                  "itemKey": "$gen_date_time_range_start_0",
                  "sortOrder": 1
                }
              ]
            },
            "name": "header_time_range"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"let user_databases = (\\r\\nsqlserver_database_properties\\r\\n| where sample_time_utc between (\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:start} - 1h), {timeRange:start})\\r\\n                                ..\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:end} + 1h), {timeRange:end})\\r\\n                                ) // Expand the range if selected range is shorter than the least frequent collection interval (1h)\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where database_name !in~ ('master','tempdb','model','msdb') // do not consider \\\"distribution\\\" and \\\"ssisdb\\\" system databases in this context\\r\\n| extend replica_type = case(is_primary_replica == true, \\\"Primary\\\", is_primary_replica == false, \\\"Secondary\\\", \\\"Not in AG\\\")\\r\\n| summarize arg_max(collection_time_utc, replica_type) by database_name\\r\\n| summarize count_user_databases = count(),\\r\\n            count_primary_databases = countif(replica_type == \\\"Primary\\\"),\\r\\n            count_secondary_databases = countif(replica_type == \\\"Secondary\\\"),\\r\\n            count_not_in_ag_databases = countif(replica_type == \\\"Not in AG\\\"),\\r\\n            key = int(1)\\r\\n);\\r\\nsqlserver_properties\\r\\n| where sample_time_utc between (\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:start} - 1h), {timeRange:start})\\r\\n                                ..\\r\\n                                iif(({timeRange:end} - {timeRange:start}) <= 1h, ({timeRange:end} + 1h), {timeRange:end})\\r\\n                                ) // Expand the range if selected range is shorter than the least frequent collection interval (1h)\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| top 1 by sample_time_utc desc\\r\\n| extend key = int(1)\\r\\n| join kind=leftouter user_databases on key\\r\\n| project server_name, uptime = format_timespan(1s * datetime_diff(\\\"second\\\", sample_time_utc, database_engine_start_time_utc), \\\"d.hh:mm:ss\\\"), logical_cpu_count, max_server_memory_mb = iif(max_server_memory_mb == 2147483647, int(null), max_server_memory_mb), count_user_databases, count_primary_databases, count_secondary_databases, count_not_in_ag_databases, sql_server_version, sql_server_edition, product_level, product_update_level, sample_age = datetime_diff(\\\"second\\\", now(), sample_time_utc)\\r\\n\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 3,
              "noDataMessage": "There is no data for specified parameters.",
              "queryType": 9,
              "visualization": "table",
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "server_name",
                    "formatter": 0,
                    "tooltipFormat": {
                      "tooltip": "SQL server (instance) name"
                    }
                  },
                  {
                    "columnMatch": "uptime",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "14ch"
                    },
                    "tooltipFormat": {
                      "tooltip": "SQL Server instance uptime as of the last sample, as days.hours:minutes:seconds."
                    }
                  },
                  {
                    "columnMatch": "logical_cpu_count",
                    "formatter": 2,
                    "formatOptions": {
                      "compositeBarSettings": {
                        "labelText": "",
                        "columnSettings": []
                      },
                      "customColumnWidthSetting": "16ch"
                    },
                    "numberFormat": {
                      "unit": 0,
                      "options": {
                        "style": "decimal",
                        "useGrouping": true
                      }
                    }
                  },
                  {
                    "columnMatch": "max_server_memory_mb",
                    "formatter": 0,
                    "numberFormat": {
                      "unit": 4,
                      "options": {
                        "style": "decimal",
                        "useGrouping": true
                      },
                      "emptyValCustomText": "Not set"
                    }
                  },
                  {
                    "columnMatch": "count_user_databases",
                    "formatter": 22,
                    "formatOptions": {
                      "compositeBarSettings": {
                        "labelText": "[\"count_user_databases\"] user database(s)",
                        "columnSettings": [
                          {
                            "columnName": "count_primary_databases",
                            "color": "green"
                          },
                          {
                            "columnName": "count_secondary_databases",
                            "color": "turquoise"
                          },
                          {
                            "columnName": "count_not_in_ag_databases",
                            "color": "gray"
                          }
                        ]
                      }
                    },
                    "tooltipFormat": {
                      "tooltip": "[\"count_primary_databases\"] primary replica database(s), [\"count_secondary_databases\"] secondary replica database(s), [\"count_not_in_ag_databases\"] database(s) not in an availability group."
                    }
                  },
                  {
                    "columnMatch": "count_primary_databases",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "count_secondary_databases",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "count_not_in_ag_databases",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "sample_age",
                    "formatter": 18,
                    "formatOptions": {
                      "thresholdsOptions": "icons",
                      "thresholdsGrid": [
                        {
                          "operator": ">",
                          "thresholdValue": "900",
                          "representation": "3",
                          "text": "{0}{1}"
                        },
                        {
                          "operator": ">",
                          "thresholdValue": "360",
                          "representation": "2",
                          "text": "{0}{1}"
                        },
                        {
                          "operator": "Default",
                          "thresholdValue": null,
                          "representation": "Blank",
                          "text": "{0}{1}"
                        }
                      ]
                    },
                    "numberFormat": {
                      "unit": 24,
                      "options": {
                        "style": "decimal"
                      }
                    },
                    "tooltipFormat": {
                      "tooltip": "Time difference between the last workbook refresh and the last data sample."
                    }
                  }
                ],
                "labelSettings": [
                  {
                    "columnId": "server_name",
                    "label": "Server name"
                  },
                  {
                    "columnId": "uptime",
                    "label": "Uptime"
                  },
                  {
                    "columnId": "logical_cpu_count",
                    "label": "Logical CPUs"
                  },
                  {
                    "columnId": "max_server_memory_mb",
                    "label": "Max server memory"
                  },
                  {
                    "columnId": "count_user_databases",
                    "label": "Databases"
                  },
                  {
                    "columnId": "sql_server_version",
                    "label": "Version"
                  },
                  {
                    "columnId": "sql_server_edition",
                    "label": "Edition"
                  },
                  {
                    "columnId": "product_level",
                    "label": "Product level"
                  },
                  {
                    "columnId": "product_update_level",
                    "label": "Update level"
                  },
                  {
                    "columnId": "sample_age",
                    "label": "Age of sample"
                  }
                ]
              }
            },
            "name": "header_db_properties"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "sqlserver_properties",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "sqlserver_cpu_utilization",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "sqlserver_database_properties",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "header_group"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "tabStyle": "bigger",
        "links": [
          {
            "id": "e108c42f-d83e-470e-baf3-579e5018fb7b",
            "cellValue": "tabName",
            "linkTarget": "parameter",
            "linkLabel": "Performance",
            "subTarget": "Overview",
            "style": "secondary"
          },
          {
            "id": "341b21d7-3e64-49aa-8665-cbf41f016c7e",
            "cellValue": "tabName",
            "linkTarget": "parameter",
            "linkLabel": "Activity",
            "subTarget": "Activity",
            "style": "secondary"
          },
          {
            "id": "f6ba5859-e201-4379-bb5f-b8e229071604",
            "cellValue": "tabName",
            "linkTarget": "parameter",
            "linkLabel": "Top queries",
            "subTarget": "Top queries",
            "style": "link"
          },
          {
            "id": "9f26ac72-497e-4b7b-bd31-9e1216f83fb8",
            "cellValue": "tabName",
            "linkTarget": "parameter",
            "linkLabel": "Storage",
            "subTarget": "Storage",
            "style": "secondary"
          },
          {
            "id": "ab2803fd-2ec2-43e1-bde6-5e67cf38c912",
            "cellValue": "tabName",
            "linkTarget": "parameter",
            "linkLabel": "Databases",
            "subTarget": "Databases",
            "style": "secondary"
          },
          {
            "id": "4cfe8309-a399-4bbc-9bd2-67f4b14aa278",
            "cellValue": "tabName",
            "linkTarget": "parameter",
            "linkLabel": "Availability groups",
            "subTarget": "Replicas",
            "style": "secondary"
          },
          {
            "id": "e82e4e12-9ac6-47b5-a648-f7feda64b5f0",
            "cellValue": "tabName",
            "linkTarget": "parameter",
            "linkLabel": "{connectivityTabName}",
            "subTarget": "Connectivity",
            "style": "link"
          },
          {
            "id": "82cd7eb3-4133-4243-8626-788aae2ab230",
            "cellValue": "tabName",
            "linkTarget": "parameter",
            "linkLabel": "{backupTabName}",
            "subTarget": "Backup",
            "style": "link"
          },
          {
            "id": "9dae20d7-1ebb-4b08-b95f-c34b8bc9bfd6",
            "cellValue": "tabName",
            "linkTarget": "parameter",
            "linkLabel": "SQL Agent",
            "subTarget": "SQLAgent",
            "style": "secondary"
          },
          {
            "id": "5f25321e-8c04-44b8-9867-bcbe0f949016",
            "cellValue": "tabName",
            "linkTarget": "parameter",
            "linkLabel": "Properties",
            "subTarget": "Properties",
            "style": "secondary"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "adxClusterPingResult",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "top_tabs"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "CPU and requests",
        "expandable": true,
        "expanded": true,
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"datatable(key:int, metric_name:string) [\\r\\n1, \\\"SQL CPU\\\",\\r\\n1, \\\"SQL process CPU\\\",\\r\\n1, \\\"Other process CPU\\\"\\r\\n]\\r\\n| join kind=inner\\r\\n(\\r\\nsqlserver_cpu_utilization\\r\\n| where sample_time_utc between ({timeRange:start} .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| extend key = int(1)\\r\\n) on key\\r\\n| project metric_name, sample_time_utc, avg_cpu_percent, sql_process_cpu_percent, other_process_cpu_percent\\r\\n| extend metric = case(\\r\\n                    metric_name == \\\"SQL CPU\\\", avg_cpu_percent,\\r\\n                    metric_name == \\\"SQL process CPU\\\", todecimal(sql_process_cpu_percent),\\r\\n                    metric_name == \\\"Other process CPU\\\", todecimal(other_process_cpu_percent),\\r\\n                    decimal(null))\\r\\n| make-series metric = max(metric) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by metric_name\\r\\n| project metric_name, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "CPU utilization",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "exportToExcelOptions": "all",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "SQL CPU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "SQL process CPU",
                    "color": "red"
                  },
                  {
                    "seriesName": "Other process CPU",
                    "color": "orange"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 1,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              },
              "textSettings": {
                "style": "markdown"
              }
            },
            "name": "resource_utilization"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`SQL CPU`|CPU utilization, as measured by the database engine across all resource pools. Query latency may noticeably increase once utilization exceeds 70-80%.|\r\n|`SQL process CPU`|CPU utilization by the `sqlservr.exe` process, as measured by the operating system. Recorded at one minute granularity and rounded to whole percent values.|\r\n|`Other process CPU`|CPU utilization by other processes on the same machine, as measured by the operating system. Recorded at one minute granularity and rounded to whole percent values.|\r\n\r\nData is collected from [sys.dm_resource_governor_resource_pools](https://go.microsoft.com/fwlink/?linkid=2201910), sys.dm_os_ring_buffers, and [sys.dm_os_sys_info](https://go.microsoft.com/fwlink/?linkid=2198867)."
            },
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "resource_stats_help"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between (({timeRange:start} - {timeRange:grain}) .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where object_name == \\\"SQL Statistics\\\" and counter_name in (\\\"Batch Requests/sec\\\")\\r\\n| project sample_time_utc, object_name, counter_name, cntr_value\\r\\n| sort by sample_time_utc asc\\r\\n| extend delta_cntr_value = iif(cntr_value >= prev(cntr_value), cntr_value - prev(cntr_value), real(null)),\\r\\n         delta_sample_time_utc = iif(sample_time_utc >= prev(sample_time_utc), datetime_diff(\\\"Millisecond\\\", sample_time_utc, prev(sample_time_utc)), long(null))\\r\\n| where isnotempty(delta_sample_time_utc)\\r\\n| extend value = delta_cntr_value / delta_sample_time_utc * 1000\\r\\n| project-away object_name, cntr_value, delta_cntr_value, delta_sample_time_utc\\r\\n| make-series metric = max(value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by counter_name\\r\\n| project counter_name, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "Request rate",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "Batch Requests/sec",
                    "label": "Batch requests",
                    "color": "greenDark"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 31,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "minimumFractionDigits": 2,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "name": "requests"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`Batch requests`|A batch request, or just request, is one or more SQL statements (queries) that a client sends to the database engine to execute. Batch requests rate is a commonly used measure of workload throughput.|\r\n\r\nData is collected from [sys.dm_os_performance_counters](https://go.microsoft.com/fwlink/?linkid=2198647)."
            },
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "sql_stats_help"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Overview"
        },
        {
          "parameterName": "sqlserver_performance_counters_common",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "sqlserver_cpu_utilization",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "cpu_and_requests_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Waits",
        "expandable": true,
        "expanded": true,
        "items": [
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "7ae3f51d-d369-4ab7-aa86-76f80ccdc98b",
                  "cellValue": "waitChartName",
                  "linkTarget": "parameter",
                  "linkLabel": "Cumulative waits",
                  "subTarget": "wait_stats_resource_cumulative",
                  "style": "link"
                },
                {
                  "id": "7b11612a-5427-4472-b1ed-e56aab7e01af",
                  "cellValue": "waitChartName",
                  "linkTarget": "parameter",
                  "linkLabel": "Average waits",
                  "subTarget": "wait_stats_resource_average",
                  "style": "link"
                },
                {
                  "id": "cea87ec4-e50a-4eba-a8e8-c4ca7fc3c123",
                  "cellValue": "waitChartName",
                  "linkTarget": "parameter",
                  "linkLabel": "Average signal waits",
                  "subTarget": "wait_stats_signal_average",
                  "style": "link"
                },
                {
                  "id": "0f53f0f1-53b2-43bf-9c97-b26ea4d74609",
                  "cellValue": "waitChartName",
                  "linkTarget": "parameter",
                  "linkLabel": "Waiting tasks",
                  "subTarget": "wait_stats_waiting_tasks",
                  "style": "link"
                }
              ]
            },
            "name": "waits_tabs"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_wait_stats\\r\\n| where sample_time_utc between (({timeRange:start} - {timeRange:grain}) .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| project sample_time_utc, wait_type, wait_time_ms\\r\\n| partition hint.strategy=shuffle by wait_type\\r\\n(\\r\\nsort by sample_time_utc asc\\r\\n| extend delta_wait_time_ms = iif(wait_time_ms >= prev(wait_time_ms), wait_time_ms - prev(wait_time_ms), long(null)),\\r\\n         delta_sample_time_utc = iif(sample_time_utc >= prev(sample_time_utc), datetime_diff(\\\"Millisecond\\\", sample_time_utc, prev(sample_time_utc)), long(null))\\r\\n| where isnotempty(delta_sample_time_utc)\\r\\n| extend value = toreal(delta_wait_time_ms) / delta_sample_time_utc * 1000\\r\\n| make-series metric = max(value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by wait_type\\r\\n)\\r\\n| project wait_type, metric = series_fill_linear(metric, int(null), false), sample_time_utc\\r\\n\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "areachart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "group": "wait_type",
                "createOtherGroup": 7,
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "ASYNC_IO_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "ASYNC_NETWORK_IO",
                    "color": "greenDark"
                  },
                  {
                    "seriesName": "BACKUPBUFFER",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "BACKUPIO",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "BACKUPTHREAD",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "CXCONSUMER",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXPACKET",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXROWSET_SYNC",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXSYNC_CONSUMER",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXSYNC_PORT",
                    "color": "orange"
                  },
                  {
                    "seriesName": "EXCHANGE",
                    "color": "orange"
                  },
                  {
                    "seriesName": "HADR_GROUP_COMMIT",
                    "color": "pink"
                  },
                  {
                    "seriesName": "HADR_SYNC_COMMIT",
                    "color": "pink"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_LOG_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_MISMATCHED_SLO",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SEEDING",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SEND_RECV_QUEUE_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SLO_DOWNGRADE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_REFRESH_MAX_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "INSTANCE_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "IO_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "LATCH_DT",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_EX",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_KP",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_NL",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_SH",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_UP",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LCK_M_BU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_BU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_BU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "LOGMGR_FLUSH",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_PMM_LOG",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_QUEUE",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_RESERVE_APPEND",
                    "color": "green"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_DT",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_EX",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_KP",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_NL",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_SH",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_UP",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGELATCH_DT",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_EX",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_KP",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_NL",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_SH",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_UP",
                    "color": "purple"
                  },
                  {
                    "seriesName": "POOL_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "RESOURCE_SEMAPHORE",
                    "color": "turquoise"
                  },
                  {
                    "seriesName": "SOS_SCHEDULER_YIELD",
                    "color": "magenta"
                  },
                  {
                    "seriesName": "THREADPOOL",
                    "color": "brown"
                  },
                  {
                    "seriesName": "THROTTLE_LOG_RATE_LOG_STORAGE",
                    "color": "red"
                  },
                  {
                    "seriesName": "WAIT_ON_SYNC_STATISTICS_REFRESH",
                    "color": "greenDarkDark"
                  },
                  {
                    "seriesName": "WRITE_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "WRITELOG",
                    "color": "green"
                  },
                  {
                    "seriesName": "Other",
                    "color": "gray"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 23,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "minimumFractionDigits": 2,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "conditionalVisibility": {
              "parameterName": "waitChartName",
              "comparison": "isEqualTo",
              "value": "wait_stats_resource_cumulative"
            },
            "name": "wait_stats_resource_cumulative"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_wait_stats\\r\\n| where sample_time_utc between (({timeRange:start} - {timeRange:grain}) .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| project sample_time_utc, wait_type, wait_time_ms, waiting_tasks_count\\r\\n| partition hint.strategy=shuffle by wait_type\\r\\n(\\r\\nsort by sample_time_utc asc\\r\\n| extend delta_wait_time_ms = iif(wait_time_ms >= prev(wait_time_ms), wait_time_ms - prev(wait_time_ms), long(null)),\\r\\n         delta_waiting_tasks_count = iif(waiting_tasks_count >= prev(waiting_tasks_count) and wait_type == prev(wait_type), waiting_tasks_count - prev(waiting_tasks_count), long(null)),\\r\\n         delta_sample_time_utc = iif(sample_time_utc >= prev(sample_time_utc), datetime_diff(\\\"Millisecond\\\", sample_time_utc, prev(sample_time_utc)), long(null))\\r\\n| where isnotempty(delta_sample_time_utc)\\r\\n| extend delta_avg_wait_time_ms = iif(delta_waiting_tasks_count != 0, toreal(delta_wait_time_ms) / delta_waiting_tasks_count, real(null))\\r\\n| make-series metric = max(delta_avg_wait_time_ms) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by wait_type\\r\\n)\\r\\n| project wait_type, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "areachart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "group": "wait_type",
                "createOtherGroup": 7,
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "ASYNC_IO_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "ASYNC_NETWORK_IO",
                    "color": "greenDark"
                  },
                  {
                    "seriesName": "BACKUPBUFFER",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "BACKUPIO",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "BACKUPTHREAD",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "CXCONSUMER",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXPACKET",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXROWSET_SYNC",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXSYNC_CONSUMER",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXSYNC_PORT",
                    "color": "orange"
                  },
                  {
                    "seriesName": "EXCHANGE",
                    "color": "orange"
                  },
                  {
                    "seriesName": "HADR_GROUP_COMMIT",
                    "color": "pink"
                  },
                  {
                    "seriesName": "HADR_SYNC_COMMIT",
                    "color": "pink"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_LOG_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_MISMATCHED_SLO",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SEEDING",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SEND_RECV_QUEUE_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SLO_DOWNGRADE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_REFRESH_MAX_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "INSTANCE_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "IO_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "LATCH_DT",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_EX",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_KP",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_NL",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_SH",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_UP",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LCK_M_BU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_BU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_BU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "LOGMGR_FLUSH",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_PMM_LOG",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_QUEUE",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_RESERVE_APPEND",
                    "color": "green"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_DT",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_EX",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_KP",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_NL",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_SH",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_UP",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGELATCH_DT",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_EX",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_KP",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_NL",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_SH",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_UP",
                    "color": "purple"
                  },
                  {
                    "seriesName": "POOL_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "RESOURCE_SEMAPHORE",
                    "color": "turquoise"
                  },
                  {
                    "seriesName": "SOS_SCHEDULER_YIELD",
                    "color": "magenta"
                  },
                  {
                    "seriesName": "THREADPOOL",
                    "color": "brown"
                  },
                  {
                    "seriesName": "THROTTLE_LOG_RATE_LOG_STORAGE",
                    "color": "red"
                  },
                  {
                    "seriesName": "WAIT_ON_SYNC_STATISTICS_REFRESH",
                    "color": "greenDarkDark"
                  },
                  {
                    "seriesName": "WRITE_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "WRITELOG",
                    "color": "green"
                  },
                  {
                    "seriesName": "Other",
                    "color": "gray"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 23,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "minimumFractionDigits": 2,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "conditionalVisibility": {
              "parameterName": "waitChartName",
              "comparison": "isEqualTo",
              "value": "wait_stats_resource_average"
            },
            "name": "wait_stats_resource_average"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_wait_stats\\r\\n| where sample_time_utc between (({timeRange:start} - {timeRange:grain}) .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| project sample_time_utc, wait_type, signal_wait_time_ms, waiting_tasks_count\\r\\n| partition hint.strategy=shuffle by wait_type\\r\\n(\\r\\nsort by sample_time_utc asc\\r\\n| extend delta_signal_wait_time_ms = iif(signal_wait_time_ms >= prev(signal_wait_time_ms), signal_wait_time_ms - prev(signal_wait_time_ms), long(null)),\\r\\n         delta_waiting_tasks_count = iif(waiting_tasks_count >= prev(waiting_tasks_count), waiting_tasks_count - prev(waiting_tasks_count), long(null)),\\r\\n         delta_sample_time_utc = iif(sample_time_utc >= prev(sample_time_utc), datetime_diff(\\\"Millisecond\\\", sample_time_utc, prev(sample_time_utc)), long(null))\\r\\n| where isnotempty(delta_sample_time_utc)\\r\\n| extend delta_avg_signal_wait_time_ms = iif(delta_waiting_tasks_count != 0, toreal(delta_signal_wait_time_ms) / delta_waiting_tasks_count, real(null))\\r\\n| make-series metric = max(delta_avg_signal_wait_time_ms) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by wait_type\\r\\n)\\r\\n| project wait_type, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "areachart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "group": "wait_type",
                "createOtherGroup": 7,
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "ASYNC_IO_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "ASYNC_NETWORK_IO",
                    "color": "greenDark"
                  },
                  {
                    "seriesName": "BACKUPBUFFER",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "BACKUPIO",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "BACKUPTHREAD",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "CXCONSUMER",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXPACKET",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXROWSET_SYNC",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXSYNC_CONSUMER",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXSYNC_PORT",
                    "color": "orange"
                  },
                  {
                    "seriesName": "EXCHANGE",
                    "color": "orange"
                  },
                  {
                    "seriesName": "HADR_GROUP_COMMIT",
                    "color": "pink"
                  },
                  {
                    "seriesName": "HADR_SYNC_COMMIT",
                    "color": "pink"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_LOG_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_MISMATCHED_SLO",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SEEDING",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SEND_RECV_QUEUE_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SLO_DOWNGRADE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_REFRESH_MAX_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "INSTANCE_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "IO_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "LATCH_DT",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_EX",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_KP",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_NL",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_SH",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_UP",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LCK_M_BU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_BU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_BU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "LOGMGR_FLUSH",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_PMM_LOG",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_QUEUE",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_RESERVE_APPEND",
                    "color": "green"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_DT",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_EX",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_KP",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_NL",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_SH",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_UP",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGELATCH_DT",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_EX",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_KP",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_NL",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_SH",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_UP",
                    "color": "purple"
                  },
                  {
                    "seriesName": "POOL_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "RESOURCE_SEMAPHORE",
                    "color": "turquoise"
                  },
                  {
                    "seriesName": "SOS_SCHEDULER_YIELD",
                    "color": "magenta"
                  },
                  {
                    "seriesName": "THREADPOOL",
                    "color": "brown"
                  },
                  {
                    "seriesName": "THROTTLE_LOG_RATE_LOG_STORAGE",
                    "color": "red"
                  },
                  {
                    "seriesName": "WAIT_ON_SYNC_STATISTICS_REFRESH",
                    "color": "greenDarkDark"
                  },
                  {
                    "seriesName": "WRITE_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "WRITELOG",
                    "color": "green"
                  },
                  {
                    "seriesName": "Other",
                    "color": "gray"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 23,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "minimumFractionDigits": 2,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "conditionalVisibility": {
              "parameterName": "waitChartName",
              "comparison": "isEqualTo",
              "value": "wait_stats_signal_average"
            },
            "name": "wait_stats_signal_average"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_wait_stats\\r\\n| where sample_time_utc between (({timeRange:start} - {timeRange:grain}) .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| project sample_time_utc, wait_type, waiting_tasks_count\\r\\n| partition hint.strategy=shuffle by wait_type\\r\\n(\\r\\nsort by sample_time_utc asc\\r\\n| extend delta_waiting_tasks_count = iif(waiting_tasks_count >= prev(waiting_tasks_count), waiting_tasks_count - prev(waiting_tasks_count), long(null)),\\r\\n         delta_sample_time_utc = iif(sample_time_utc >= prev(sample_time_utc), datetime_diff(\\\"Millisecond\\\", sample_time_utc, prev(sample_time_utc)), long(null))\\r\\n| where isnotempty(delta_sample_time_utc)\\r\\n| extend value = toreal(delta_waiting_tasks_count) / delta_sample_time_utc * 1000\\r\\n| make-series metric = max(value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by wait_type\\r\\n)\\r\\n| project wait_type, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "areachart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "group": "wait_type",
                "createOtherGroup": 7,
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "ASYNC_IO_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "ASYNC_NETWORK_IO",
                    "color": "greenDark"
                  },
                  {
                    "seriesName": "BACKUPBUFFER",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "BACKUPIO",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "BACKUPTHREAD",
                    "color": "yellow"
                  },
                  {
                    "seriesName": "CXCONSUMER",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXPACKET",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXROWSET_SYNC",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXSYNC_CONSUMER",
                    "color": "orange"
                  },
                  {
                    "seriesName": "CXSYNC_PORT",
                    "color": "orange"
                  },
                  {
                    "seriesName": "EXCHANGE",
                    "color": "orange"
                  },
                  {
                    "seriesName": "HADR_GROUP_COMMIT",
                    "color": "pink"
                  },
                  {
                    "seriesName": "HADR_SYNC_COMMIT",
                    "color": "pink"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_LOG_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_MISMATCHED_SLO",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SEEDING",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SEND_RECV_QUEUE_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_LOG_RATE_SLO_DOWNGRADE",
                    "color": "red"
                  },
                  {
                    "seriesName": "HADR_THROTTLE_REFRESH_MAX_SIZE",
                    "color": "red"
                  },
                  {
                    "seriesName": "INSTANCE_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "IO_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "LATCH_DT",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_EX",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_KP",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_NL",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_SH",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LATCH_UP",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "LCK_M_BU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_BU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_BU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IS_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_IX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_NL_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RIn_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RS_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_RX_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_M_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SCH_S_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIU_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_SIX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_U_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_UIX_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X_ABORT_BLOCKERS",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LCK_M_X_LOW_PRIORITY",
                    "color": "redBright"
                  },
                  {
                    "seriesName": "LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "LOGMGR_FLUSH",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_PMM_LOG",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_QUEUE",
                    "color": "green"
                  },
                  {
                    "seriesName": "LOGMGR_RESERVE_APPEND",
                    "color": "green"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_DT",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_EX",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_KP",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_NL",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_SH",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGEIOLATCH_UP",
                    "color": "lightBlue"
                  },
                  {
                    "seriesName": "PAGELATCH_DT",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_EX",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_KP",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_NL",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_SH",
                    "color": "purple"
                  },
                  {
                    "seriesName": "PAGELATCH_UP",
                    "color": "purple"
                  },
                  {
                    "seriesName": "POOL_LOG_RATE_GOVERNOR",
                    "color": "red"
                  },
                  {
                    "seriesName": "RESOURCE_SEMAPHORE",
                    "color": "turquoise"
                  },
                  {
                    "seriesName": "SOS_SCHEDULER_YIELD",
                    "color": "magenta"
                  },
                  {
                    "seriesName": "THREADPOOL",
                    "color": "brown"
                  },
                  {
                    "seriesName": "THROTTLE_LOG_RATE_LOG_STORAGE",
                    "color": "red"
                  },
                  {
                    "seriesName": "WAIT_ON_SYNC_STATISTICS_REFRESH",
                    "color": "greenDarkDark"
                  },
                  {
                    "seriesName": "WRITE_COMPLETION",
                    "color": "grayBlue"
                  },
                  {
                    "seriesName": "WRITELOG",
                    "color": "green"
                  },
                  {
                    "seriesName": "Other",
                    "color": "gray"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "maximumFractionDigits": 0
                    }
                  }
                }
              }
            },
            "conditionalVisibility": {
              "parameterName": "waitChartName",
              "comparison": "isEqualTo",
              "value": "wait_stats_waiting_tasks"
            },
            "name": "wait_stats_waiting_tasks"
          },
          {
            "type": 1,
            "content": {
              "json": "|Chart|Description|\r\n|:-|:-|\r\n|Cumulative waits|The Y axis shows the cumulative time all tasks spent waiting per second, for top wait types.|\r\n|Average waits|The Y axis shows the average time a task has spent waiting, for wait types. Calculated as *cumulative resource wait time* / *number of waiting tasks*.|\r\n|Average signal waits|The Y axis shows the average time a task spent waiting for CPU to become available after the resource wait was over. High values may indicate CPU pressure.|\r\n|Waiting tasks|The Y axis shows the number of waiting tasks, for top wait types.|\r\n\r\nData is collected from [sys.dm_os_wait_stats](https://go.microsoft.com/fwlink/?linkid=2198648)."
            },
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "waits_help"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Overview"
        },
        {
          "parameterName": "sqlserver_wait_stats",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "waits_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Common performance counters",
        "expandable": true,
        "expanded": true,
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between ({timeRange:start} .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where object_name == \\\"Batch Resp Statistics\\\" and instance_name == \\\"Elapsed Time:Requests\\\"\\r\\n| project sample_time_utc, counter_name, cntr_value\\r\\n| partition hint.strategy = shuffle by counter_name\\r\\n(\\r\\nsort by sample_time_utc asc\\r\\n| extend delta_cntr_value = iif(cntr_value >= prev(cntr_value), cntr_value - prev(cntr_value), real(null)),\\r\\n         delta_sample_time_utc = iif(sample_time_utc >= prev(sample_time_utc), datetime_diff(\\\"Millisecond\\\", sample_time_utc, prev(sample_time_utc)), long(null))\\r\\n| where isnotempty(delta_sample_time_utc)\\r\\n| summarize count_requests = sum(delta_cntr_value) by counter_name\\r\\n)\\r\\n| project low_elapsed_time_ms = case(\\r\\n                                    counter_name == \\\"Batches >=000000ms & <000001ms\\\", \\\"0 ms\\\",\\r\\n                                    counter_name == \\\"Batches >=000001ms & <000002ms\\\", \\\"1 ms\\\",\\r\\n                                    counter_name == \\\"Batches >=000002ms & <000005ms\\\", \\\"2 ms\\\",\\r\\n                                    counter_name == \\\"Batches >=000005ms & <000010ms\\\", \\\"5 ms\\\",\\r\\n                                    counter_name == \\\"Batches >=000010ms & <000020ms\\\", \\\"10 ms\\\",\\r\\n                                    counter_name == \\\"Batches >=000020ms & <000050ms\\\", \\\"20 ms\\\",\\r\\n                                    counter_name == \\\"Batches >=000050ms & <000100ms\\\", \\\"50 ms\\\",\\r\\n                                    counter_name == \\\"Batches >=000100ms & <000200ms\\\", \\\"100 ms\\\",\\r\\n                                    counter_name == \\\"Batches >=000200ms & <000500ms\\\", \\\"200 ms\\\",\\r\\n                                    counter_name == \\\"Batches >=000500ms & <001000ms\\\", \\\"500 ms\\\",\\r\\n                                    counter_name == \\\"Batches >=001000ms & <002000ms\\\", \\\"1 s\\\",\\r\\n                                    counter_name == \\\"Batches >=002000ms & <005000ms\\\", \\\"2 s\\\",\\r\\n                                    counter_name == \\\"Batches >=005000ms & <010000ms\\\", \\\"5 s\\\",\\r\\n                                    counter_name == \\\"Batches >=010000ms & <020000ms\\\", \\\"10 s\\\",\\r\\n                                    counter_name == \\\"Batches >=020000ms & <050000ms\\\", \\\"20 s\\\",\\r\\n                                    counter_name == \\\"Batches >=050000ms & <100000ms\\\", \\\"50 s\\\",\\r\\n                                    counter_name == \\\"Batches >=100000ms\\\", \\\"100 s\\\",\\r\\n                                    \\\"\\\"\\r\\n                                    ),\\r\\n        count_requests, counter_name\\r\\n| sort by counter_name asc;\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "showAnalytics": true,
              "title": "Requests by duration",
              "noDataMessage": "There is no data for specified parameters.",
              "queryType": 9,
              "visualization": "categoricalbar",
              "chartSettings": {
                "group": "low_elapsed_time_ms",
                "createOtherGroup": 0,
                "showLegend": true
              }
            },
            "name": "batch_response_stats"
          },
          {
            "type": 1,
            "content": {
              "json": "This chart shows a distribution of request durations by elapsed time. Each bar on the histogram corresponds to the number of requests with durations in certain time bucket. For example, the bar labeled `1 ms` shows the number of requests with elapsed time ranging from 1 millisecond (inclusive) to 2 milliseconds.\r\n\r\nFor the same workload, a shift in the number of requests to the right over time indicates an increase in query response time. "
            },
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "batch_response_stats_help"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "18c7490d-6c49-4e1a-9ec4-e3e65dd77a8c",
                  "version": "KqlParameterItem/1.0",
                  "name": "selectedPerformanceCounters1",
                  "label": "Select counters",
                  "type": 2,
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "typeSettings": {
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "selectAllValue": "*",
                    "showDefault": false
                  },
                  "jsonData": "[\r\n    {\"value\":\"SQL Compilations/sec\",\"label\":\"SQL compilations\"},\r\n    {\"value\":\"SQL Re-Compilations/sec\",\"label\":\"SQL recompilations\"},\r\n    {\"value\":\"Temp Tables Creation Rate\",\"label\":\"Temp tables creation\"},\r\n    {\"value\":\"Query optimizations/sec\",\"label\":\"Query optimizations\"}\r\n]\r\n",
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "defaultValue": "value::all",
                  "value": [
                    "value::all"
                  ]
                }
              ],
              "style": "above",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "name": "rate_statistics_1_parameters"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between (({timeRange:start} - {timeRange:grain}) .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where (\\r\\n        (object_name == \\\"SQL Statistics\\\" and counter_name in (\\\"SQL Compilations/sec\\\",\\\"SQL Re-Compilations/sec\\\"))\\r\\n        or\\r\\n        (object_name == \\\"General Statistics\\\" and counter_name in (\\\"Temp Tables Creation Rate\\\"))\\r\\n        or\\r\\n        (object_name == \\\"Workload Group Stats\\\" and counter_name in (\\\"Query optimizations/sec\\\") and instance_name != \\\"internal\\\")\\r\\n        )\\r\\n| where \\\"{selectedPerformanceCounters1}\\\" == \\\"'*'\\\" or counter_name in ({selectedPerformanceCounters1})\\r\\n| project sample_time_utc, object_name, cntr_value, counter_name\\r\\n| sort by object_name asc, counter_name asc, sample_time_utc asc\\r\\n| extend delta_cntr_value = iif(cntr_value >= prev(cntr_value) and object_name == prev(object_name) and counter_name == prev(counter_name), cntr_value - prev(cntr_value), real(null)),\\r\\n         delta_sample_time_utc = iif(sample_time_utc >= prev(sample_time_utc), datetime_diff(\\\"Millisecond\\\", sample_time_utc, prev(sample_time_utc)), long(null))\\r\\n| extend value = delta_cntr_value / delta_sample_time_utc * 1000\\r\\n| make-series metric = max(value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by counter_name\\r\\n| project counter_name, metric = series_fill_linear(metric, long(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "Compilation, optimization, temp tables",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "SQL Compilations/sec",
                    "label": "SQL compilations",
                    "color": "redDark"
                  },
                  {
                    "seriesName": "SQL Re-Compilations/sec",
                    "label": "SQL recompilations",
                    "color": "red"
                  },
                  {
                    "seriesName": "Temp Tables Creation Rate",
                    "label": "Temp tables creation",
                    "color": "blue"
                  },
                  {
                    "seriesName": "Query optimizations/sec",
                    "label": "Query optimizations",
                    "color": "redBright"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 31,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "name": "rate_statistics_1"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`SQL compilations`|A query is compiled when it is not found in plan cache. If a query is parameterized (explicitly or automatically), it may be matched to an existing query in plan cache. Such queries may still be compiled, but they avoid CPU-intensive optimization.|\r\n|`Query optimizations`|As part of query compilation, a query may be optimized to create an execution plan. Optimization is a CPU-intensive process. Make sure queries are parameterized to avoid unnecessary optimization. Specify data type, length, precision, and scale in parameter definition. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198744).|\r\n|`SQL recompilations`|A query is re-compiled because its previously cached plan is no longer valid or optimal. This may happen because of schema and data changes. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198738).|\r\n|`Temp tables creation`|The number of temporary tables and table variables created per second. Temp table caching alleviates possible contention due to high rate of temp table creation.|\r\n"
            },
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "sql_stats_help_1"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "0e2ec1f6-bd82-42ec-af47-9e1ca90280d5",
                  "version": "KqlParameterItem/1.0",
                  "name": "selectedPerformanceCounters2",
                  "label": "Select counters",
                  "type": 2,
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "typeSettings": {
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "selectAllValue": "*",
                    "showDefault": false
                  },
                  "jsonData": "[\r\n    {\"value\":\"SQL Attention rate\",\"label\":\"Attentions\"},\r\n    {\"value\":\"Number of Deadlocks/sec\",\"label\":\"Deadlocks\"},\r\n    {\"value\":\"Full Scans/sec\",\"label\":\"Full scans\"},\r\n    {\"value\":\"Logins/sec\",\"label\":\"Logins\"},\r\n    {\"value\":\"Logouts/sec\",\"label\":\"Logouts\"},\r\n    {\"value\":\"Page Splits/sec\",\"label\":\"Page splits\"},\r\n    {\"value\":\"Table Lock Escalations/sec\",\"label\":\"Table lock escalations\"},\r\n    {\"value\":\"Errors/sec\",\"label\":\"User errors\"}\r\n]\r\n",
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "defaultValue": "value::all",
                  "value": [
                    "value::all"
                  ]
                }
              ],
              "style": "above",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "name": "rate_statistics_2_parameters"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between (({timeRange:start} - {timeRange:grain}) .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where (\\r\\n        (object_name == \\\"SQL Statistics\\\" and counter_name in (\\\"SQL Attention rate\\\"))\\r\\n        or\\r\\n        (object_name == \\\"General Statistics\\\" and counter_name in (\\\"Logins/sec\\\",\\\"Logouts/sec\\\"))\\r\\n        or\\r\\n        (object_name == \\\"SQL Errors\\\" and counter_name == \\\"Errors/sec\\\" and instance_name == \\\"User Errors\\\")\\r\\n        or\\r\\n        (object_name == \\\"Access Methods\\\" and counter_name in (\\\"Table Lock Escalations/sec\\\", \\\"Full Scans/sec\\\", \\\"Page Splits/sec\\\"))\\r\\n        or\\r\\n        (object_name == \\\"Locks\\\" and counter_name == \\\"Number of Deadlocks/sec\\\" and instance_name == \\\"_Total\\\")\\r\\n        )\\r\\n| where \\\"{selectedPerformanceCounters2}\\\" == \\\"'*'\\\" or counter_name in ({selectedPerformanceCounters2})\\r\\n| project sample_time_utc, object_name, cntr_value, \\r\\n          counter_name = case(\\r\\n                             counter_name == \\\"Errors/sec\\\" and instance_name == \\\"User Errors\\\", \\\"User Errors/sec\\\",\\r\\n                             counter_name == \\\"Number of Deadlocks/sec\\\", \\\"Deadlocks/sec\\\",\\r\\n                             counter_name\\r\\n                             )\\r\\n| sort by object_name asc, counter_name asc, sample_time_utc asc\\r\\n| extend delta_cntr_value = iif(cntr_value >= prev(cntr_value) and object_name == prev(object_name) and counter_name == prev(counter_name), cntr_value - prev(cntr_value), real(null)),\\r\\n         delta_sample_time_utc = iif(sample_time_utc >= prev(sample_time_utc), datetime_diff(\\\"Millisecond\\\", sample_time_utc, prev(sample_time_utc)), long(null))\\r\\n| where isnotempty(delta_sample_time_utc)\\r\\n| extend value = delta_cntr_value / delta_sample_time_utc * 1000\\r\\n| make-series metric = max(value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by counter_name\\r\\n| project counter_name, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "Deadlocks, lock escalation, logins, logouts, timeouts, full scans, page splits",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "Logouts/sec",
                    "label": "Logouts",
                    "color": "blueDark"
                  },
                  {
                    "seriesName": "Logins/sec",
                    "label": "Logins",
                    "color": "green"
                  },
                  {
                    "seriesName": "SQL Attention rate",
                    "label": "Attentions",
                    "color": "orange"
                  },
                  {
                    "seriesName": "User Errors/sec",
                    "label": "User errors",
                    "color": "gray"
                  },
                  {
                    "seriesName": "Table Lock Escalations/sec",
                    "label": "Table lock escalations",
                    "color": "pink"
                  },
                  {
                    "seriesName": "Deadlocks/sec",
                    "label": "Deadlocks",
                    "color": "purpleDark"
                  },
                  {
                    "seriesName": "Page Splits/sec",
                    "label": "Page splits",
                    "color": "red"
                  },
                  {
                    "seriesName": "Full Scans/sec",
                    "label": "Full scans",
                    "color": "grayBlue"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 31,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "name": "rate_statistics_2"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`Deadlocks`|A deadlock occurs when two or more requests block each other, requiring the database engine to terminate one of them. In some workloads, deadlocks occur routinely. A spike in the number of deadlocks may require investigation. [Learn more](https://go.microsoft.com/fwlink/?linkid=2201713).|\r\n|`Logins`|A high number of logins and logouts per second may indicate that connection pooling is not used. Learn more: [connection pooling in ADO.NET (SqlClient)](https://go.microsoft.com/fwlink/?linkid=2198736), and [connection pooling in JDBC Driver for SQL Server](https://go.microsoft.com/fwlink/?linkid=2198857).|\r\n|`Logouts`|A spike in logouts per second may indicate a restart of client application.|\r\n|`User errors`|In many applications, user errors occur routinely. A spike in the number of user errors may require investigation.|\r\n|`Attentions`|An attention event occurs when a query times out or is canceled. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198868).|\r\n|`Table lock escalations`|Lock escalation to the object (table) level reduces memory use, but may cause lock blocking. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198651).|\r\n|`Full scans`|A sudden increase in the number of full scans can indicate a change in query plan for a frequently executed query.|\r\n|`Page splits`|A page split occurs when an index page cannot accommodate modified data and needs to be split in two. If the split page is in the middle of an index, this causes additional IO and fragments the index.|"
            },
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "sql_stats_help_2"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "44c07f96-2fdf-43e3-8311-2f370f9fed28",
                  "version": "KqlParameterItem/1.0",
                  "name": "selectedPerformanceCounters3",
                  "label": "Select counters",
                  "type": 2,
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "typeSettings": {
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "selectAllValue": "*",
                    "showDefault": false
                  },
                  "jsonData": "[\r\n    {\"value\":\"Active Temp Tables\",\"label\":\"Active temp tables\"},\r\n    {\"value\":\"Logical Connections\",\"label\":\"Logical connections\"},\r\n    {\"value\":\"Processes blocked\",\"label\":\"Processes blocked\"},\r\n    {\"value\":\"User Connections\",\"label\":\"User connections\"}\r\n]\r\n",
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "defaultValue": "value::all",
                  "value": [
                    "value::all"
                  ]
                }
              ],
              "style": "above",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "name": "rate_statistics_3_parameters"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between ({timeRange:start} .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where (object_name == \\\"General Statistics\\\" and counter_name in (\\\"Active Temp Tables\\\",\\\"Logical Connections\\\",\\\"Processes blocked\\\",\\\"User Connections\\\"))\\r\\n| where \\\"{selectedPerformanceCounters3}\\\" == \\\"'*'\\\" or counter_name in ({selectedPerformanceCounters3})\\r\\n| project sample_time_utc, counter_name, cntr_value\\r\\n| make-series metric = max(cntr_value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by counter_name\\r\\n| project counter_name, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "Connections, blocked processes, temp tables",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "User Connections",
                    "label": "User connections",
                    "color": "magenta"
                  },
                  {
                    "seriesName": "Active Temp Tables",
                    "label": "Active temp tables",
                    "color": "blue"
                  },
                  {
                    "seriesName": "Logical Connections",
                    "label": "Logical connections",
                    "color": "pink"
                  },
                  {
                    "seriesName": "Processes blocked",
                    "label": "Processes blocked",
                    "color": "redBright"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 17,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "maximumFractionDigits": 1
                    }
                  }
                }
              }
            },
            "name": "count_statistics"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`Active temp tables`|The number of temporary tables or table variables in use.|\r\n|`Logical connections`|If multiple active result sets (MARS) is used, each physical connection may be used by multiple logical sessions. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198630).|\r\n|`Processes blocked`|The number of sessions that were blocked at data collection time. This may include system sessions. See historical samples on the Activity tab to find longer-term session blocking. [Learn more](https://go.microsoft.com/fwlink/?linkid=2239879).|\r\n|`User connections`|The number of physical connections, excluding system connections.|\r\n"
            },
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "sql_stats_help_3"
          },
          {
            "type": 1,
            "content": {
              "json": "Data is collected from [sys.dm_os_performance_counters](https://go.microsoft.com/fwlink/?linkid=2198647)."
            },
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "sql_stats_help_4"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Overview"
        },
        {
          "parameterName": "sqlserver_performance_counters_common",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "common_perf_counters_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Memory",
        "expandable": true,
        "expanded": true,
        "items": [
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "44c07f96-2fdf-43e3-8311-2f370f9fed28",
                  "version": "KqlParameterItem/1.0",
                  "name": "excludedClerks",
                  "label": "Exclude memory clerks",
                  "type": 2,
                  "description": "Select one or more memory clerks to exclude from the chart. This can be used to hide the dominant clerks and rescale the chart to show clerks with smaller memory consumption more clearly.",
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_memory_utilization\\r\\n| where sample_time_utc between ({timeRange:start} .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| summarize memory_size_mb = sum(memory_size_mb) by memory_clerk_type\\r\\n| top 10 by memory_size_mb desc\\r\\n| project value = memory_clerk_type\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "queryType": 9,
                  "value": []
                },
                {
                  "version": "KqlParameterItem/1.0",
                  "name": "excludedMemoryClerks",
                  "type": 1,
                  "isRequired": true,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "leftOperand": "excludedClerks",
                        "operator": "isNotNull",
                        "rightValType": "param",
                        "resultValType": "static",
                        "resultVal": "{excludedClerks}"
                      }
                    },
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "resultValType": "static",
                        "resultVal": "\"\""
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "id": "023a226e-1811-44b3-9293-9809459e7c83"
                }
              ],
              "style": "above",
              "queryType": 9
            },
            "name": "memory_clerk_parameters"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_memory_utilization\\r\\n| where sample_time_utc between ({timeRange:start} .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where memory_clerk_type !in ({excludedMemoryClerks})\\r\\n| project sample_time_utc, memory_clerk_type, memory_clerk_name, memory_size_mb\\r\\n| make-series metric = max(memory_size_mb) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by memory_clerk_type\\r\\n| project memory_clerk_type, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "Memory clerks",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "group": "memory_clerk_type",
                "createOtherGroup": 7,
                "showLegend": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 4,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "name": "memory_clerks"
          },
          {
            "type": 1,
            "content": {
              "json": "All significant memory allocations by components of the database engine are tracked under specific  memory clerks. It is common for some memory clerks, such as `MEMORYCLERK_SQLBUFFERPOOL` and `CACHESTORE_COLUMNSTOREOBJECTPOOL`, to allocate large amounts of memory to cache data pages. Persistently high memory utilization by other memory clerks may require investigation. Data is collected from [sys.dm.os_memory_clerks](https://go.microsoft.com/fwlink/?linkid=2198866)."
            },
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "memory_help_clerks"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between ({timeRange:start} .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where object_name == \\\"Memory Manager\\\"\\r\\n| where counter_name in (\\\"Target Server Memory (KB)\\\",\\\"Total Server Memory (KB)\\\",\\\"Granted Workspace Memory (KB)\\\",\\\"Lock Memory (KB)\\\")\\r\\n| project sample_time_utc, counter_name = replace_string(counter_name, \\\" (KB)\\\", \\\"\\\"), cntr_value\\r\\n| make-series metric = max(cntr_value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by counter_name\\r\\n| project counter_name, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "Memory manager",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "Target Server Memory",
                    "label": "Target server memory"
                  },
                  {
                    "seriesName": "Total Server Memory",
                    "label": "Total server memory"
                  },
                  {
                    "seriesName": "Lock Memory",
                    "label": "Lock memory"
                  },
                  {
                    "seriesName": "Granted Workspace Memory",
                    "label": "Granted workspace memory"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 3,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "name": "memory_manager"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between (({timeRange:start} - {timeRange:grain}) .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where object_name == \\\"Memory Manager\\\"\\r\\n| where counter_name in (\\\"Memory Grants Outstanding\\\",\\\"Memory Grants Pending\\\")\\r\\n| extend counter_name = case(counter_name == \\\"Memory Grants Outstanding\\\", \\\"Outstanding grants\\\", counter_name == \\\"Memory Grants Pending\\\", \\\"Pending grants\\\", \\\"\\\")\\r\\n| project sample_time_utc, counter_name, cntr_value\\r\\n| make-series metric = max(cntr_value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by counter_name\\r\\n| project counter_name, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "Memory grants",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "showLegend": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "minimumFractionDigits": 2,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "name": "memory_grants"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`Target server memory`|The database engine does not allocate memory beyond its current target memory. Target memory is determined by initial engine configuration, and may be adjusted if external memory pressure occurs.|\r\n|`Total server memory`|Total memory allocated by the database engine. Commonly, total server memory closely matches target server memory because the database engine allocates all available memory for various caches. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198638).|\r\n|`Lock memory`|Memory allocated for locks. High lock memory may be due to large transactions and/or disabled lock escalation. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198651).|\r\n|`Granted workspace memory`|Memory allocated for query processing, also known as query memory grants. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198869).|\r\n\r\nData is collected from [sys.dm_os_performance_counters](https://go.microsoft.com/fwlink/?linkid=2198647)."
            },
            "customWidth": "50",
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "memory_help_memory_manager"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`Outstanding grants`|A non-zero value indicates that some currently running queries have allocated query workspace memory.|\r\n|`Pending grants`|A non-zero value indicates that some queries cannot start or continue execution because they are waiting for a memory grant. Such waits are tracked under `RESOURCE_SEMAPHORE` wait type. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198636).|\r\n\r\nData is collected from [sys.dm_os_performance_counters](https://go.microsoft.com/fwlink/?linkid=2198647)."
            },
            "customWidth": "50",
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "memory_help_memory_grants"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between ({timeRange:start} .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where object_name == \\\"Resource Pool Stats\\\" and counter_name == \\\"Out of memory count\\\"\\r\\n| project sample_time_utc, instance_name, cntr_value\\r\\n| make-series metric = max(cntr_value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by instance_name\\r\\n| project instance_name, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 2,
              "showAnalytics": true,
              "title": "Resource pool out of memory (OOM) events",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "XTP pool",
                    "color": "turquoise"
                  },
                  {
                    "seriesName": "User pool",
                    "color": "redBright"
                  }
                ],
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 17,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "maximumFractionDigits": 0
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "name": "resource_pools_oom"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between ({timeRange:start} .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where (\\r\\n        (object_name == \\\"Buffer Manager\\\" and counter_name == \\\"Buffer cache hit ratio\\\")\\r\\n        or\\r\\n        (object_name == \\\"Plan Cache\\\" and counter_name == \\\"Cache Hit Ratio\\\" and instance_name == \\\"_Total\\\")\\r\\n        )\\r\\n| project sample_time_utc, counter_name = iif(object_name == \\\"Plan Cache\\\" and counter_name == \\\"Cache Hit Ratio\\\", \\\"Plan cache hit ratio\\\", counter_name), cntr_value\\r\\n| make-series metric = max(cntr_value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by counter_name\\r\\n| project counter_name, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "Cache hit ratios",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "showLegend": true,
                "seriesLabelSettings": [
                  {
                    "seriesName": "Buffer cache hit ratio",
                    "color": "green"
                  },
                  {
                    "seriesName": "Plan cache hit ratio",
                    "color": "magenta"
                  }
                ],
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 1,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "minimumFractionDigits": 2,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "name": "cache_hit_ratios"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`OOM count`|The number of out-of-memory events that have occurred in each resource pool. [Learn more](https://go.microsoft.com/fwlink/?linkid=2206120).|\r\n\r\nData is collected from [sys.dm_os_performance_counters](https://go.microsoft.com/fwlink/?linkid=2198647)."
            },
            "customWidth": "50",
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "memory_help_pool_oom"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`Buffer cache hit ratio`|Percentage of data pages that were found in the buffer pool (an in-memory data cache), avoiding slower reads from storage. When sufficient memory is provisioned for the workload, the value at steady state is close to 100%. Occasional dips are possible as IO-intensive queries execute. [Learn more](https://go.microsoft.com/fwlink/?linkid=2197944).|\r\n|`Plan cache hit ratio`|Query execution plans are optimized and stored in an in-memory cache for reuse. This metric is the percentage of plans that were found in plan cache during query execution. When queries are properly parameterized (by specifying data type, length, precision, and scale in parameter definition), query plan reuse is facilitated and this metric tends to be close to 100%. When this metric is much lower than 100%, it may indicate that essentially the same queries are optimized and stored repeatedly, increasing CPU and memory usage. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198738).|\r\n\r\nData is collected from [sys.dm_os_performance_counters](https://go.microsoft.com/fwlink/?linkid=2198647)."
            },
            "customWidth": "50",
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "memory_help_cache_hit_ratios"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between (({timeRange:start} - {timeRange:grain}) .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where object_name == \\\"Buffer Manager\\\"\\r\\n| where counter_name in (\\\"Background writer pages/sec\\\",\\\"Checkpoint pages/sec\\\",\\\"Lazy writes/sec\\\",\\\"Page reads/sec\\\",\\\"Page writes/sec\\\",\\\"Readahead pages/sec\\\")\\r\\n| extend counter_name = replace_string(counter_name, \\\"/sec\\\", \\\"\\\")\\r\\n| project sample_time_utc, counter_name, cntr_value\\r\\n| partition hint.strategy = shuffle by counter_name\\r\\n(\\r\\nsort by sample_time_utc asc\\r\\n| extend delta_cntr_value = iif(cntr_value >= prev(cntr_value), cntr_value - prev(cntr_value), real(null)),\\r\\n         delta_sample_time_utc = iif(sample_time_utc >= prev(sample_time_utc), datetime_diff(\\\"Millisecond\\\", sample_time_utc, prev(sample_time_utc)), long(null))\\r\\n| where isnotempty(delta_sample_time_utc)\\r\\n| extend value = delta_cntr_value / delta_sample_time_utc * 1000\\r\\n| project-away cntr_value, delta_cntr_value, delta_sample_time_utc\\r\\n| make-series metric = max(value) default = long(null) on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by counter_name\\r\\n)\\r\\n| project counter_name, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "Buffer manager",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "showLegend": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 31,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "maximumFractionDigits": 0
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "name": "buffer_manager"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "{\"version\":\"AzureDataExplorerQuery/1.0\",\"queryText\":\"sqlserver_performance_counters_common\\r\\n| where sample_time_utc between ({timeRange:start} .. {timeRange:end})\\r\\n| where machine_name =~ @\\\"{machineName}\\\"\\r\\n| where server_name =~ @\\\"{serverName}\\\"\\r\\n| where object_name == \\\"Buffer Node\\\" and counter_name == \\\"Page life expectancy\\\"\\r\\n| project sample_time_utc, numa_node = strcat(\\\"NUMA node: \\\", instance_name), cntr_value\\r\\n| make-series metric = max(cntr_value) default = 0 on sample_time_utc from {timeRange:start} to {timeRange:end} step {timeRange:grain}/{grainFactor} by numa_node\\r\\n| project numa_node, metric = series_fill_linear(metric, int(null), false), sample_time_utc\",\"clusterName\":\"{adxClusterUri}\",\"databaseName\":\"{adxDatabase}\"}",
              "size": 1,
              "aggregation": 3,
              "showAnalytics": true,
              "title": "Page life expectancy",
              "noDataMessage": "There is no data for specified parameters.",
              "timeBrushParameterName": "timeRange",
              "queryType": 9,
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "metric"
                ],
                "showLegend": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 24,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true,
                      "maximumFractionDigits": 0
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "name": "page_life_expectancy"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`Background writer pages`|Data pages written by indirect checkpoint. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198733).|\r\n|`Checkpoint pages`|Data pages written by automatic or manual checkpoints. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198739).|\r\n|`Lazy writes`|Data pages written by the lazy writer. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198747).|\r\n|`Readahead pages`|Pages read from storage using larger and more efficient IO requests in anticipation of their use by the workload. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198865).|\r\n|`Page reads`|Pages read from storage into the buffer pool. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198853).|\r\n|`Page writes`|Data pages written to data files. [Learn more](https://go.microsoft.com/fwlink/?linkid=2198747).|\r\n\r\nData is collected from [sys.dm_os_performance_counters](https://go.microsoft.com/fwlink/?linkid=2198647)."
            },
            "customWidth": "50",
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "memory_help_buffer_manager"
          },
          {
            "type": 1,
            "content": {
              "json": "|Metric|Description|\r\n|:-|:-|\r\n|`Page life expectancy`|The time a page is predicted to stay in the buffer pool if it is not referenced by workload. Deep drops in page life expectancy, or consistently low values may be caused by IO intensive queries that flush out most of cached pages from the buffer pool.|\r\n\r\nData is collected from [sys.dm_os_performance_counters](https://go.microsoft.com/fwlink/?linkid=2198647)."
            },
            "customWidth": "50",
            "conditionalVisibility": {
              "parameterName": "showDescriptions",
              "comparison": "isEqualTo",
              "value": "true"
            },
            "name": "memory_help_ple"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Overview"
        },
        {
          "parameterName": "sqlserver_performance_counters_common",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "sqlserver_memory_utilization",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "memory_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "template",
        "loadFromTemplateId": "Community-Workbooks/Database watcher/SQL Server/instance/storage",
        "items": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Storage"
        },
        {
          "parameterName": "sqlserver_volume_storage_utilization",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo",
          "value": ""
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "storage_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "template",
        "loadFromTemplateId": "Community-Workbooks/Database watcher/SQL Server/instance/properties",
        "items": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Properties"
        },
        {
          "parameterName": "sqlserver_properties",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "properties_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "template",
        "loadFromTemplateId": "Community-Workbooks/Database watcher/SQL Server/instance/activity",
        "items": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Activity"
        },
        {
          "parameterName": "sqlserver_active_sessions",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "activity_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "template",
        "loadFromTemplateId": "Community-Workbooks/Database watcher/SQL Server/instance/databases",
        "items": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Databases"
        },
        {
          "parameterName": "sqlserver_database_properties",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "databases_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "template",
        "loadFromTemplateId": "Community-Workbooks/Database watcher/SQL Server/instance/sqlagent",
        "items": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "SQLAgent"
        },
        {
          "parameterName": "sqlserver_sqlagent_job_state",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "sqlagent_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "template",
        "loadFromTemplateId": "Community-Workbooks/Database watcher/SQL Server/instance/replicas",
        "items": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Replicas"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "sqlserver_database_replicas",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "availability_replicas_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "template",
        "loadFromTemplateId": "Community-Workbooks/Database watcher/SQL Server/instance/top queries",
        "items": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Top queries"
        },
        {
          "parameterName": "sqlserver_query_runtime_stats",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "top_queries_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "template",
        "loadFromTemplateId": "Community-Workbooks/Database watcher/SQL Server/instance/connectivity",
        "items": [],
        "exportParameters": true
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Connectivity"
        },
        {
          "parameterName": "sqlserver_connectivity",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "connectivity_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "template",
        "loadFromTemplateId": "Community-Workbooks/Database watcher/SQL Server/instance/backup",
        "items": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "tabName",
          "comparison": "isEqualTo",
          "value": "Backup"
        },
        {
          "parameterName": "sqlserver_sql_backup_history",
          "comparison": "isEqualTo",
          "value": "1"
        },
        {
          "parameterName": "serverName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "machineName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "backup_group"
    }
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}