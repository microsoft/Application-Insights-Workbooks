{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "f2bb2b02-9187-4209-9fb8-eb99c60d9c9d",
                  "version": "KqlParameterItem/1.0",
                  "name": "agreementType",
                  "label": "Agreement Type",
                  "type": 10,
                  "isRequired": true,
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "jsonData": "[\r\n    {\r\n    \"value\" : \"MCA\",\r\n    \"label\" : \"Microsoft Customer Agreement (MCA)\"\r\n    },\r\n    {\r\n    \"value\" : \"EA\",\r\n    \"label\" : \"Microsoft Enterprise Agreement (EA)\"\r\n    }\r\n]",
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "value": "EA"
                }
              ],
              "style": "pills",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "name": "parameters - 0"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "1007cfd0-3554-41ea-8e8c-e04d4f67add4",
                  "version": "KqlParameterItem/1.0",
                  "name": "billingAccount",
                  "label": "Billing Account",
                  "type": 2,
                  "isRequired": true,
                  "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"/providers/Microsoft.Billing/billingAccounts\",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2019-10-01-preview\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value\",\"columns\":[{\"path\":\"name\",\"columnid\":\"billingAccount\"},{\"path\":\"properties.displayName\",\"columnid\":\"Displayname\"}]}}]}",
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "queryType": 12,
                  "value": "8611537"
                },
                {
                  "id": "38d70cdc-7667-44d8-8a05-f1384c8a92a2",
                  "version": "KqlParameterItem/1.0",
                  "name": "lookBackPeriod",
                  "label": "Look back period",
                  "type": 2,
                  "isRequired": true,
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "jsonData": "[\r\n    {\r\n    \"value\" : \"Last7Days\",\r\n    \"label\" : \"Last 7 Days\"\r\n    },\r\n    {\r\n    \"value\" : \"Last30Days\",\r\n    \"label\" : \"Last 30 Days\",\r\n    \"selected\" : true\r\n    },\r\n    {\r\n    \"value\" : \"Last60Days\",\r\n    \"label\" : \"Last 60 Days\"\r\n    }\r\n]",
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "value": "Last60Days"
                },
                {
                  "id": "9892e53b-bda1-4cb6-a3a1-25de058c4484",
                  "version": "KqlParameterItem/1.0",
                  "name": "scope",
                  "label": "Scope",
                  "type": 10,
                  "isRequired": true,
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "jsonData": "[\r\n    {\r\n        \"value\": \"properties/scope eq 'Single'\",\r\n        \"label\" : \"Single\",\r\n        \"selected\": true\r\n    },\r\n    {\r\n        \"value\": \"properties/scope eq 'Shared'\",\r\n        \"label\" : \"Shared\",\r\n        \"selected\": true\r\n    }\r\n\r\n]",
                  "value": "properties/scope eq 'Shared'"
                },
                {
                  "version": "KqlParameterItem/1.0",
                  "name": "term",
                  "label": "Term",
                  "type": 10,
                  "isRequired": true,
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "jsonData": "[\r\n    {\r\n        \"value\": \"properties/term eq 'P1Y'\",\r\n        \"label\" : \"1Y\",\r\n        \"selected\": true\r\n    },\r\n    {\r\n        \"value\": \"properties/term eq 'P3Y'\",\r\n        \"label\" : \"3Y\",\r\n        \"selected\": true\r\n    }\r\n\r\n]",
                  "value": "properties/term eq 'P3Y'",
                  "id": "6850fde5-30c4-49f1-91c2-4ce150778c18"
                }
              ],
              "style": "pills",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "name": "parameters - 3"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "78948283-c135-4603-b506-a0271660ae26",
                  "version": "KqlParameterItem/1.0",
                  "name": "billingProfile",
                  "label": "Billing profile",
                  "type": 2,
                  "isRequired": true,
                  "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"/providers/Microsoft.Billing/billingAccounts/{billingAccount}/billingProfiles\",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2020-05-01\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value\",\"columns\":[{\"path\":\"name\",\"columnid\":\"Name\"},{\"path\":\"properties.displayName\",\"columnid\":\"DisplayName\"}]}}]}",
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "queryType": 12,
                  "value": null
                }
              ],
              "style": "pills",
              "queryType": 12
            },
            "conditionalVisibility": {
              "parameterName": "agreementType",
              "comparison": "isEqualTo",
              "value": "MCA"
            },
            "name": "parameters - billingProfile"
          },
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "3122e083-af17-48c5-af19-b2dde9e55214",
                  "cellValue": "SelectedSubTab",
                  "linkTarget": "parameter",
                  "linkLabel": "Reservations Recommendations",
                  "subTarget": "riRecommendations",
                  "style": "link"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "SelectedTab",
              "comparison": "isEqualTo",
              "value": "reservations"
            },
            "name": "Subtabs - Reservations"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "## Reservation Recommendations - Overview"
                  },
                  "name": "reservationOverviewText"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "## Important Information - This tab is under preview and requires different permissions.\r\n\r\n**Note:** This tab is currently in preview and requires a different set of permissions compared to the previous tab. Ensure you have the necessary permissions listed above to access the preview features.",
                    "style": "success"
                  },
                  "name": "Preview Info text"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "## RBAC Needed\r\n\r\nThis tab displays various reservations-related details. To access the information on this tab, ensure you have the following minimum RBAC permissions:\r\n\r\n* **For Enterprise Admin (EA) Customers:** Enterprise Administrator (read-only) or EA Purchaser. Learn more about setting up these permissions here: [Organization Structure and Permissions by Role](https://learn.microsoft.com/azure/cost-management-billing/manage/understand-ea-roles#organization-structure-and-permissions-by-role).\r\n\r\n* **For Microsoft Customer Agreement (MCA) Customers:** Billing Profile Reader. Learn more about setting up these permissions here: [Billing Profile Roles and Tasks](https://learn.microsoft.com/azure/cost-management-billing/manage/understand-mca-roles#billing-profile-roles-and-tasks).\r\n",
                    "style": "warning"
                  },
                  "name": "rbacText"
                },
                {
                  "type": 9,
                  "content": {
                    "version": "KqlParameterItem/1.0",
                    "parameters": [
                      {
                        "id": "5c5c1817-4ccf-438d-a1b4-08ea4451438b",
                        "version": "KqlParameterItem/1.0",
                        "name": "resourceType",
                        "label": "Resource type",
                        "type": 10,
                        "isRequired": true,
                        "typeSettings": {
                          "additionalResourceOptions": []
                        },
                        "jsonData": "[\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'VirtualMachines'\",\r\n    \"label\" : \"VirtualMachines\",\r\n    \"selected\": true\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'SQLDatabases'\",\r\n    \"label\" : \"SQLDatabases\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'PostgreSQL'\",\r\n    \"label\" : \"PostgreSQL\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'ManagedDisk'\",\r\n    \"label\" : \"ManagedDisk\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'MySQL'\",\r\n    \"label\" : \"MySQL\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'RedHat'\",\r\n    \"label\" : \"RedHat\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'MariaDB'\",\r\n    \"label\" : \"MariaDB\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'RedisCache'\",\r\n    \"label\" : \"RedisCache\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'CosmosDB'\",\r\n    \"label\" : \"CosmosDB\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'CosmosDB'\",\r\n    \"label\" : \"CosmosDB\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'SUSELinux'\",\r\n    \"label\" : \"SUSELinux\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'AppService'\",\r\n    \"label\" : \"AppService\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'BlockBlob'\",\r\n    \"label\" : \"BlockBlob\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'AzureDataExplorer'\",\r\n    \"label\" : \"AzureDataExplorer\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'VMwareCloudSimple'\",\r\n    \"label\" : \"VMwareCloudSimple\"\r\n    }\r\n]",
                        "timeContext": {
                          "durationMs": 86400000
                        }
                      }
                    ],
                    "style": "pills",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces"
                  },
                  "name": "paramResourceType"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "## Reservation Recommendations - Microsoft Customer Agreement (MCA)"
                        },
                        "name": "reservationOverviewText-MCA"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"/providers/Microsoft.Billing/billingAccounts/{billingAccount}/billingProfiles/{billingProfile}/providers/Microsoft.Consumption/reservationRecommendations?$filter=properties/lookBackPeriod  eq '{lookBackPeriod}' AND {resourceType:escapejson} AND {scope:escapejson} \",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2021-10-01\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value\",\"columns\":[{\"path\":\"properties.term\",\"columnid\":\"Term\"},{\"path\":\"properties.scope\",\"columnid\":\"Scope\"},{\"path\":\"properties.subscriptionId\",\"columnid\":\"Subscription\"},{\"path\":\"properties.skuName\",\"columnid\":\"SKU\"},{\"path\":\"properties.location\",\"columnid\":\"Location\"},{\"path\":\"properties.recommendedQuantity\",\"columnid\":\"Quantity\"},{\"path\":\"properties.costWithNoReservedInstances.value\",\"columnid\":\"CostWithoutRI\"},{\"path\":\"properties.totalCostWithReservedInstances.value\",\"columnid\":\"CostWithRI\"},{\"path\":\"properties.netSavings.vlaue\",\"columnid\":\"Savings\"},{\"path\":\"properties.lookBackPeriod\",\"columnid\":\"LookBackPeriod\"}]}}]}",
                          "size": 0,
                          "title": "Reservations recommendations",
                          "queryType": 12,
                          "gridSettings": {
                            "filter": true
                          }
                        },
                        "conditionalVisibility": {
                          "parameterName": "isVisible",
                          "comparison": "isEqualTo",
                          "value": "true"
                        },
                        "name": "query - reservationRecommendations-MCA",
                        "styleSettings": {
                          "showBorder": true
                        }
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\",\"mergeType\":\"table\",\"leftTable\":\"query - reservationRecommendations-MCA\"}],\"projectRename\":[{\"originalName\":\"[query - reservationRecommendations-MCA].Term\",\"mergedName\":\"Term\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].Scope\",\"mergedName\":\"Scope\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].SKU\",\"mergedName\":\"SKU\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].Location\",\"mergedName\":\"Location\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].Quantity\",\"mergedName\":\"Quantity\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].CostWithoutRI\",\"mergedName\":\"CostWithoutRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].CostWithRI\",\"mergedName\":\"CostWithRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].Savings\",\"mergedName\":\"Savings\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[Added column]\",\"mergedName\":\"Breakeven point (Months)\",\"fromId\":null,\"isNewItem\":true,\"newItemData\":[{\"criteriaContext\":{\"leftOperand\":\"Term\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"P1Y\",\"resultValType\":\"expression\",\"resultVal\":\"round([\\\"CostWithRI\\\"]*12/[\\\"CostWithoutRI\\\"],0)\"}},{\"criteriaContext\":{\"leftOperand\":\"Term\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"P3Y\",\"resultValType\":\"expression\",\"resultVal\":\"round([\\\"CostWithRI\\\"]*12*3/[\\\"CostWithoutRI\\\"],0)\"}},{\"criteriaContext\":{\"operator\":\"Default\",\"rightValType\":\"column\",\"resultValType\":\"column\"}}]},{\"originalName\":\"[query - reservationRecommendations-MCA].LookBackPeriod\",\"mergedName\":\"LookBackPeriod\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"}]}",
                          "size": 0,
                          "showRefreshButton": true,
                          "showExportToExcel": true,
                          "queryType": 7
                        },
                        "name": "reservationRecommendations-MCA-MERGE",
                        "styleSettings": {
                          "showBorder": true
                        }
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "agreementType",
                      "comparison": "isEqualTo",
                      "value": "MCA"
                    },
                    {
                      "parameterName": "billingAccount",
                      "comparison": "isNotEqualTo"
                    }
                  ],
                  "name": "group - MCA"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "loadType": "explicit",
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "## Reservation Recommendations - Enterprise Admin (EA)"
                        },
                        "name": "reservationOverviewText-EA"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"/providers/Microsoft.Billing/billingAccounts/{billingAccount}//providers/Microsoft.Consumption/reservationRecommendations?$filter=properties/lookBackPeriod  eq '{lookBackPeriod}' AND {resourceType:escapejson} AND {scope:escapejson}  AND {term:escapejson}\",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2021-10-01\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value\",\"columns\":[{\"path\":\"properties.term\",\"columnid\":\"Term\"},{\"path\":\"properties.scope\",\"columnid\":\"Scope\"},{\"path\":\"properties.subscriptionId\",\"columnid\":\"Subscription\"},{\"path\":\"sku\",\"columnid\":\"SKU\"},{\"path\":\"location\",\"columnid\":\"Location\"},{\"path\":\"properties.recommendedQuantity\",\"columnid\":\"Quantity\"},{\"path\":\"properties.costWithNoReservedInstances\",\"columnid\":\"CostWithoutRI\"},{\"path\":\"properties.totalCostWithReservedInstances\",\"columnid\":\"CostWithRI\"},{\"path\":\"properties.netSavings\",\"columnid\":\"Savings\"},{\"path\":\"properties.lookBackPeriod\",\"columnid\":\"LookBackPeriod\"}]}}]}",
                          "size": 0,
                          "title": "Reservations recommendations",
                          "noDataMessage": "No reservation recommendations found!",
                          "showExportToExcel": true,
                          "queryType": 12,
                          "gridSettings": {
                            "rowLimit": 10000,
                            "filter": true
                          }
                        },
                        "conditionalVisibility": {
                          "parameterName": "isVisible",
                          "comparison": "isEqualTo",
                          "value": "true"
                        },
                        "name": "query - reservationRecommendations-EA"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "ResourceContainers \r\n| where type =~ 'Microsoft.Resources/subscriptions'\r\n| project SubscriptionName = name, subscriptionId ",
                          "size": 0,
                          "queryType": 1,
                          "resourceType": "microsoft.resourcegraph/resources",
                          "crossComponentResources": [
                            "value::all"
                          ],
                          "gridSettings": {
                            "rowLimit": 10000,
                            "filter": true
                          }
                        },
                        "conditionalVisibility": {
                          "parameterName": "AlwaysHidden",
                          "comparison": "isEqualTo",
                          "value": "True"
                        },
                        "name": "SubNameMapping-Hidden"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\",\"mergeType\":\"table\",\"leftTable\":\"query - reservationRecommendations-EA\"}],\"projectRename\":[{\"originalName\":\"[query - reservationRecommendations].Term\",\"mergedName\":\"Term\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].Scope\",\"mergedName\":\"Scope\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].SKU\",\"mergedName\":\"SKU\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].Location\",\"mergedName\":\"Location\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].Quantity\",\"mergedName\":\"Quantity\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].CostWithoutRI\",\"mergedName\":\"CostWithoutRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].CostWithRI\",\"mergedName\":\"CostWithRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].Savings\",\"mergedName\":\"Savings\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].LookBackPeriod\",\"mergedName\":\"LookBackPeriod\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations-EA].Term\",\"mergedName\":\"Term\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Scope\",\"mergedName\":\"Scope\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].SKU\",\"mergedName\":\"SKU\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Location\",\"mergedName\":\"Location\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Quantity\",\"mergedName\":\"Quantity\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].CostWithoutRI\",\"mergedName\":\"CostWithoutRI\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].CostWithRI\",\"mergedName\":\"CostWithRI\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Savings\",\"mergedName\":\"Savings\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].LookBackPeriod\",\"mergedName\":\"LookBackPeriod\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].value\",\"mergedName\":\"value\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].defaultVisualization\",\"mergedName\":\"defaultVisualization\",\"fromId\":\"unknown\"}]}",
                          "size": 0,
                          "aggregation": 5,
                          "title": "Top savings by Sku",
                          "showRefreshButton": true,
                          "showExportToExcel": true,
                          "queryType": 7,
                          "visualization": "barchart",
                          "chartSettings": {
                            "xAxis": "SKU",
                            "yAxis": [
                              "Savings"
                            ],
                            "group": "SKU",
                            "createOtherGroup": 50,
                            "showLegend": true,
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 0,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true,
                                  "maximumFractionDigits": 2
                                }
                              }
                            }
                          }
                        },
                        "showPin": false,
                        "name": "query - SavingsChart",
                        "styleSettings": {
                          "showBorder": true
                        }
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\",\"mergeType\":\"leftouter\",\"leftTable\":\"query - reservationRecommendations-EA\",\"rightTable\":\"SubNameMapping-Hidden\",\"leftColumn\":\"Subscription\",\"rightColumn\":\"subscriptionId\"}],\"projectRename\":[{\"originalName\":\"SubscriptionName\",\"mergedName\":\"SubscriptionName\",\"fromId\":\"unknown\"},{\"originalName\":\"[SubNameMapping-Hidden].SubscriptionName\",\"mergedName\":\"SubscriptionName1\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].LookBackPeriod\",\"mergedName\":\"LookBackPeriod\",\"fromId\":\"unknown\"},{\"originalName\":\"subscriptionId\",\"mergedName\":\"subscriptionId\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations].Term\",\"mergedName\":\"Term\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].Scope\",\"mergedName\":\"Scope\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].SKU\",\"mergedName\":\"SKU\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[Added column]\",\"mergedName\":\"Breakeven point (Months)\",\"fromId\":null,\"isNewItem\":true,\"newItemData\":[{\"criteriaContext\":{\"leftOperand\":\"Term\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"P1Y\",\"resultValType\":\"expression\",\"resultVal\":\"round([\\\"CostWithRI\\\"]*12/[\\\"CostWithoutRI\\\"],0)\"}},{\"criteriaContext\":{\"leftOperand\":\"Term\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"P3Y\",\"resultValType\":\"expression\",\"resultVal\":\"round([\\\"CostWithRI\\\"]*12*3/[\\\"CostWithoutRI\\\"],0)\"}},{\"criteriaContext\":{\"operator\":\"Default\",\"rightValType\":\"column\",\"resultValType\":\"column\"}}]},{\"originalName\":\"[query - reservationRecommendations].Location\",\"mergedName\":\"Location\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].Quantity\",\"mergedName\":\"Quantity\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].CostWithoutRI\",\"mergedName\":\"CostWithoutRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].CostWithRI\",\"mergedName\":\"CostWithRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].Savings\",\"mergedName\":\"Savings\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[SubNameMapping-Hidden].subscriptionId\",\"mergedName\":\"subscriptionId1\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations-EA].Term\",\"mergedName\":\"Term\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Scope\",\"mergedName\":\"Scope\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].SKU\",\"mergedName\":\"SKU\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Location\",\"mergedName\":\"Location\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Quantity\",\"mergedName\":\"Quantity\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].CostWithoutRI\",\"mergedName\":\"CostWithoutRI\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].CostWithRI\",\"mergedName\":\"CostWithRI\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Savings\",\"mergedName\":\"Savings\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].LookBackPeriod\",\"mergedName\":\"LookBackPeriod\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - Get All subscriptions].zones\"},{\"originalName\":\"[query - Get All subscriptions].identity\"},{\"originalName\":\"[query - Get All subscriptions].tags\"},{\"originalName\":\"[query - Get All subscriptions].properties\"},{\"originalName\":\"[query - Get All subscriptions].plan\"},{\"originalName\":\"[query - Get All subscriptions].sku\"},{\"originalName\":\"[query - Get All subscriptions].managedBy\"},{\"originalName\":\"[query - Get All subscriptions].resourceGroup\"},{\"originalName\":\"[query - Get All subscriptions].location\"},{\"originalName\":\"[query - Get All subscriptions].kind\"},{\"originalName\":\"[query - Get All subscriptions].tenantId\"},{\"originalName\":\"[query - Get All subscriptions].type\"},{\"originalName\":\"[query - Get All subscriptions].subscriptionId\"},{\"originalName\":\"[query - Get All subscriptions].extendedLocation\"},{\"originalName\":\"[query - Get All subscriptions].name\"},{\"originalName\":\"[query - Get All subscriptions].id\"}]}",
                          "size": 0,
                          "title": "Reservations recommendations",
                          "showRefreshButton": true,
                          "showExportToExcel": true,
                          "queryType": 7,
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "SubscriptionName1",
                                "formatter": 5
                              },
                              {
                                "columnMatch": "subscriptionId1",
                                "formatter": 5,
                                "formatOptions": {
                                  "linkTarget": "Resource",
                                  "linkIsContextBlade": true,
                                  "customColumnWidthSetting": "37ch"
                                }
                              },
                              {
                                "columnMatch": "Scope",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "12ch"
                                }
                              },
                              {
                                "columnMatch": "Subscription",
                                "formatter": 15,
                                "formatOptions": {
                                  "linkTarget": null,
                                  "showIcon": true
                                }
                              },
                              {
                                "columnMatch": "SKU",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "18ch"
                                }
                              },
                              {
                                "columnMatch": "Location",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "13.7143ch"
                                }
                              },
                              {
                                "columnMatch": "Quantity",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "13.2857ch"
                                }
                              },
                              {
                                "columnMatch": "Breakeven point (Months)",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "27.4286ch"
                                }
                              },
                              {
                                "columnMatch": "CostWithoutRI",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "19.4286ch"
                                },
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": true,
                                    "maximumFractionDigits": 2
                                  }
                                }
                              },
                              {
                                "columnMatch": "CostWithRI",
                                "formatter": 0,
                                "formatOptions": {
                                  "aggregation": "Sum",
                                  "customColumnWidthSetting": "15.8571ch"
                                },
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": true,
                                    "maximumFractionDigits": 2
                                  }
                                }
                              },
                              {
                                "columnMatch": "Savings",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "16.1429ch"
                                },
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": true,
                                    "maximumFractionDigits": 2
                                  }
                                }
                              },
                              {
                                "columnMatch": "LookBackPeriod",
                                "formatter": 0,
                                "formatOptions": {
                                  "customColumnWidthSetting": "21ch"
                                }
                              }
                            ],
                            "rowLimit": 10000,
                            "filter": true,
                            "labelSettings": [
                              {
                                "columnId": "SubscriptionName1",
                                "label": "Subscription Name"
                              },
                              {
                                "columnId": "subscriptionId1",
                                "label": "Subscription Id"
                              },
                              {
                                "columnId": "Term",
                                "label": "Term"
                              },
                              {
                                "columnId": "Scope",
                                "label": "Scope"
                              },
                              {
                                "columnId": "SKU",
                                "label": "SKU"
                              },
                              {
                                "columnId": "Location",
                                "label": "Location"
                              },
                              {
                                "columnId": "Quantity",
                                "label": "Quantity"
                              },
                              {
                                "columnId": "Breakeven point (Months)",
                                "label": "Breakeven point (Months)"
                              },
                              {
                                "columnId": "CostWithoutRI",
                                "label": "Cost Without RI"
                              },
                              {
                                "columnId": "CostWithRI",
                                "label": "Cost With RI"
                              },
                              {
                                "columnId": "Savings",
                                "label": "Savings"
                              },
                              {
                                "columnId": "LookBackPeriod",
                                "label": "Lookback Period"
                              }
                            ]
                          },
                          "sortBy": []
                        },
                        "name": "query - Reservations recommendations",
                        "styleSettings": {
                          "showBorder": true
                        }
                      }
                    ]
                  },
                  "conditionalVisibilities": [
                    {
                      "parameterName": "agreementType",
                      "comparison": "isEqualTo",
                      "value": "EA"
                    },
                    {
                      "parameterName": "billingAccount",
                      "comparison": "isNotEqualTo"
                    }
                  ],
                  "name": "group - EA"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "SelectedSubTab",
              "comparison": "isEqualTo",
              "value": "riRecommendations"
            },
            "name": "Group Reservations Recommendations"
          }
        ]
      },
      "name": "group - 0"
    }
  ],
  "fallbackResourceIds": [
    "Azure Monitor"
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}