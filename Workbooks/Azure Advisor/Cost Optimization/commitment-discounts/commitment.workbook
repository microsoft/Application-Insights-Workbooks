{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "7a3920e6-db1e-4287-941e-7dde2691ffa9",
                        "cellValue": "selectedRateOptimizationTab",
                        "linkTarget": "parameter",
                        "linkLabel": "Commitment discounts",
                        "subTarget": "commitmentdiscounts",
                        "style": "link"
                      },
                      {
                        "id": "7cb64d60-4378-4ac5-986e-e2810ad73171",
                        "cellValue": "selectedRateOptimizationTab",
                        "linkTarget": "parameter",
                        "linkLabel": "Azure Hybrid Benefit",
                        "subTarget": "AHB",
                        "style": "link"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "SelectedTab",
                    "comparison": "isEqualTo",
                    "value": "AlwaysHidden"
                  },
                  "name": "links - rate optimization tabs"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "## Commitment-based savings\r\nTo maximize your Azure savings, consider savings plans for flexible usage and reserved instances for persistent needs. Azure Savings plans offer reduced rates with a fixed hourly spend and reserved instances allow pre-purchasing VM base price. Both options provide discounts and adapt to your usage patterns, helping you manage costs effectively. Below is an estimate of how much you can potentially save with 1-Year commitment for each option based on your usage pattern for the last 30 days.​",
                    "style": "upsell"
                  },
                  "customWidth": "50",
                  "name": "text - P1YTotalSavings"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "## Commitment-based savings\r\nTo maximize your Azure savings, consider savings plans for flexible usage and reserved instances for persistent needs. Savings plans offer reduced rates with a fixed hourly spend, while reserved instances allow pre-purchasing VM base price. Both options provide discounts and adapt to your usage patterns, helping you manage costs effectively. Below is an estimate of how much you can save with 3-Year commitment for each option based on your usage pattern for the last 30 days.​",
                    "style": "upsell"
                  },
                  "customWidth": "50",
                  "name": "text - P3YTotalSavings - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "AdvisorResources \r\n| where type == 'microsoft.advisor/recommendations' \r\n| where properties.category == 'Cost' and (properties.shortDescription.solution contains \"Reserved Instance\" or properties.shortDescription.solution contains \"savings plan\")\r\n| extend\r\nrecommendationTypeId = tostring(properties.recommendationTypeId),\r\nreservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nterm=tostring(properties.extendedProperties.term),\r\nstableId = name,\r\nsubscriptionId = tostring(properties.extendedProperties.subId)\r\n| where term == \"P1Y\" and lookbackPeriod == \"Last 30 days\"\r\n| extend subscriptionId,stableId\r\n| join kind = leftouter\r\n(advisorresources | where type=~'microsoft.advisor/suppressions'\r\n| extend tokens = split(id, '/')\r\n| extend stableId = iff(array_length(tokens) > 3, tokens[(array_length(tokens)-3)], '')\r\n| extend expirationTimeStamp = todatetime(iff(strcmp(tostring(properties.ttl), '-1') == 0, '9999-12-31', properties.expirationTimeStamp))\r\n| where expirationTimeStamp > now()\r\n| project stableId, expirationTimeStamp)\r\non stableId\r\n| where isempty(expirationTimeStamp)\r\n| extend subscriptionId,stableId\r\n| join kind = leftouter\r\n(advisorresources \r\n| where type =~ 'microsoft.advisor/configurations'\r\n| where isempty(resourceGroup) == true\r\n| extend\r\nmaxCpuP95 = properties.extendedProperties.MaxCpuP95,\r\nlowCpuThreshold = properties.lowCpuThreshold,\r\nexcludeRecomm = properties.exclude,\r\nreservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nscope=tostring(properties.extendedProperties.scope),\r\nterm=tostring(properties.extendedProperties.term),\r\nsavings=todouble(properties.extendedProperties.annualSavingsAmount),\r\nsavingsAmount = todouble(properties.extendedProperties.savingsAmount),\r\nRecommendation=tostring(properties.shortDescription.solution),  \r\ncurrency = tostring(properties.extendedProperties.savingsCurrency),\r\ndisplayQty = tostring(properties.extendedProperties.displayQty),\r\ndisplaySKU = tostring(properties.extendedProperties.displaySKU),\r\nregion = tostring(properties.extendedProperties.region),\r\nstableId = name,\r\nsubscriptionId = tostring(properties.extendedProperties.subId))\r\non subscriptionId\r\n| extend isActive1 = iff(isnull(excludeRecomm), true, tobool(excludeRecomm) == false)\r\n| extend isActive2 = iff(recommendationTypeId == 'e10b1381-5f0a-47ff-8c7b-37bd13d7c974', iff((isnotempty(lowCpuThreshold) and isnotempty(maxCpuP95)), toint(maxCpuP95) < toint(lowCpuThreshold), iff((isempty(maxCpuP95) or toint(maxCpuP95) < 5), true, false)), true)\r\n| where isActive1 == true and isActive2 == true\r\n| join kind = leftouter\r\n(advisorresources | where type =~ 'microsoft.advisor/configurations' | where isnotempty(resourceGroup) == true\r\n| project subscriptionId, resourceGroup, excludeProperty = properties.exclude)\r\non subscriptionId, resourceGroup\r\n| extend isActive3 = iff(isnull(excludeProperty), true, tobool(excludeProperty) == false)\r\n| where isActive3 == true\r\n| extend reservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nscope=tostring(properties.extendedProperties.scope),\r\nterm=tostring(properties.extendedProperties.term),\r\nsavings=todouble(properties.extendedProperties.annualSavingsAmount),\r\nsavingsAmount = todouble(properties.extendedProperties.savingsAmount),\r\nRecommendation=tostring(properties.shortDescription.solution),  \r\ncurrency = tostring(properties.extendedProperties.savingsCurrency),\r\ndisplayQty = tostring(properties.extendedProperties.displayQty),\r\ndisplaySKU = tostring(properties.extendedProperties.displaySKU),\r\nregion = tostring(properties.extendedProperties.region),\r\nresources=tostring(properties.resourceMetadata.resourceId),  \r\nsubscription = tostring(properties.extendedProperties.subId),\r\ntypeOfRecommendation = iif(properties.shortDescription.solution contains \"Reserved Instance\", \"Reservations\", \"Savings plan\")\r\n| where term == \"P1Y\" and lookbackPeriod == \"Last 30 days\"\r\n| summarize bin (sum(savings), 0.01) by typeOfRecommendation,currency\r\n| order by sum_savings desc\r\n",
                    "size": 0,
                    "title": "1 year total commitment-based savings",
                    "noDataMessage": "There are no commitment-based recommendations",
                    "noDataMessageStyle": 3,
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "visualization": "piechart",
                    "chartSettings": {
                      "seriesLabelSettings": [
                        {
                          "seriesName": "Reservations",
                          "label": "Azure Reservations"
                        },
                        {
                          "seriesName": "Savings plan",
                          "label": "Azure Savings Plan for Compute"
                        }
                      ]
                    }
                  },
                  "customWidth": "50",
                  "name": "query - CommitmentBasedSavingsP1Y"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "AdvisorResources \r\n| where type == 'microsoft.advisor/recommendations' \r\n| where properties.category == 'Cost' and (properties.shortDescription.solution contains \"Reserved Instance\" or properties.shortDescription.solution contains \"savings plan\")\r\n| extend\r\nrecommendationTypeId = tostring(properties.recommendationTypeId),\r\nreservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nterm=tostring(properties.extendedProperties.term),\r\nstableId = name,\r\nsubscriptionId = tostring(properties.extendedProperties.subId)\r\n| where term == \"P3Y\" and lookbackPeriod == \"Last 30 days\"\r\n| extend subscriptionId,stableId\r\n| join kind = leftouter\r\n(advisorresources | where type=~'microsoft.advisor/suppressions'\r\n| extend tokens = split(id, '/')\r\n| extend stableId = iff(array_length(tokens) > 3, tokens[(array_length(tokens)-3)], '')\r\n| extend expirationTimeStamp = todatetime(iff(strcmp(tostring(properties.ttl), '-1') == 0, '9999-12-31', properties.expirationTimeStamp))\r\n| where expirationTimeStamp > now()\r\n| project stableId, expirationTimeStamp)\r\non stableId\r\n| where isempty(expirationTimeStamp)\r\n| extend subscriptionId,stableId\r\n| join kind = leftouter\r\n(advisorresources \r\n| where type =~ 'microsoft.advisor/configurations'\r\n| where isempty(resourceGroup) == true\r\n| extend\r\nmaxCpuP95 = properties.extendedProperties.MaxCpuP95,\r\nlowCpuThreshold = properties.lowCpuThreshold,\r\nexcludeRecomm = properties.exclude,\r\nreservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nscope=tostring(properties.extendedProperties.scope),\r\nterm=tostring(properties.extendedProperties.term),\r\nsavings=todouble(properties.extendedProperties.annualSavingsAmount),\r\nsavingsAmount = todouble(properties.extendedProperties.savingsAmount),\r\nRecommendation=tostring(properties.shortDescription.solution),  \r\ncurrency = tostring(properties.extendedProperties.savingsCurrency),\r\ndisplayQty = tostring(properties.extendedProperties.displayQty),\r\ndisplaySKU = tostring(properties.extendedProperties.displaySKU),\r\nregion = tostring(properties.extendedProperties.region),\r\nstableId = name,\r\nsubscriptionId = tostring(properties.extendedProperties.subId))\r\non subscriptionId\r\n| extend isActive1 = iff(isnull(excludeRecomm), true, tobool(excludeRecomm) == false)\r\n| extend isActive2 = iff(recommendationTypeId == 'e10b1381-5f0a-47ff-8c7b-37bd13d7c974', iff((isnotempty(lowCpuThreshold) and isnotempty(maxCpuP95)), toint(maxCpuP95) < toint(lowCpuThreshold), iff((isempty(maxCpuP95) or toint(maxCpuP95) < 5), true, false)), true)\r\n| where isActive1 == true and isActive2 == true\r\n| join kind = leftouter\r\n(advisorresources | where type =~ 'microsoft.advisor/configurations' | where isnotempty(resourceGroup) == true\r\n| project subscriptionId, resourceGroup, excludeProperty = properties.exclude)\r\non subscriptionId, resourceGroup\r\n| extend isActive3 = iff(isnull(excludeProperty), true, tobool(excludeProperty) == false)\r\n| where isActive3 == true\r\n| extend reservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nscope=tostring(properties.extendedProperties.scope),\r\nterm=tostring(properties.extendedProperties.term),\r\nsavings=todouble(properties.extendedProperties.annualSavingsAmount),\r\nsavingsAmount = todouble(properties.extendedProperties.savingsAmount),\r\nRecommendation=tostring(properties.shortDescription.solution),  \r\ncurrency = tostring(properties.extendedProperties.savingsCurrency),\r\ndisplayQty = tostring(properties.extendedProperties.displayQty),\r\ndisplaySKU = tostring(properties.extendedProperties.displaySKU),\r\nregion = tostring(properties.extendedProperties.region),\r\nresources=tostring(properties.resourceMetadata.resourceId),  \r\nsubscription = tostring(properties.extendedProperties.subId),\r\ntypeOfRecommendation = iif(properties.shortDescription.solution contains \"Reserved Instance\", \"Reservations\", \"Savings plan\")\r\n| where term == \"P3Y\" and lookbackPeriod == \"Last 30 days\"\r\n| summarize bin (sum(savings), 0.01) by typeOfRecommendation,currency\r\n| order by sum_savings desc\r\n",
                    "size": 0,
                    "title": "3 years total commitment-based savings",
                    "noDataMessage": "There are no commitment-based recommendations",
                    "noDataMessageStyle": 3,
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "value::all"
                    ],
                    "visualization": "piechart",
                    "chartSettings": {
                      "seriesLabelSettings": [
                        {
                          "seriesName": "Reservations",
                          "label": "Azure Reservations"
                        },
                        {
                          "seriesName": "Savings plan",
                          "label": "Azure Savings Plan for Compute"
                        }
                      ]
                    }
                  },
                  "customWidth": "50",
                  "name": "query - CommitmentBasedSavingsP3Y"
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "56eb4166-cb7c-4384-94a9-c5f201e1316d",
                        "cellValue": "selectedRateOptimizationSubTab",
                        "linkTarget": "parameter",
                        "linkLabel": "Azure Reservations",
                        "subTarget": "reservations",
                        "style": "link"
                      },
                      {
                        "id": "799d4fc7-5790-467c-84cc-ce4b4cc34a3f",
                        "cellValue": "selectedRateOptimizationSubTab",
                        "linkTarget": "parameter",
                        "linkLabel": "Azure Savings Plan for Compute",
                        "subTarget": "SavingsPlan",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "links - rate optimization tabs"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "**Reserved instances** can provide a significant discount over on-demand prices. With reserved instances, you can pre-purchase the base costs for your virtual machines. \r\n<br>Discounts will automatically apply to new or existing VMs that have the same size and region as your reserved instance.<br> We analyzed your usage over selected Term, look-back period and recommend money-saving reserved instances​.\r\n<br>This query will only provide you recommendations for single scope reserved instances. *To learn more about Reserved Instances, go to this [link.](https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/understand-vm-reservation-charges)*",
                    "style": "info"
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedRateOptimizationSubTab",
                    "comparison": "isEqualTo",
                    "value": "reservations"
                  },
                  "name": "text - advisorReservationdDisclaimer"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "### Understanding the Break-Even Point for Reserved Instances\r\n\r\nThe break-even point is the time it takes for the cost savings from a Reserved Instance (RI) to equal the upfront payment. For Azure Reserved Instances, this is calculated by comparing the cost of the RI against the pay-as-you-go pricing for the same virtual machine.\r\n\r\nTo calculate:\r\n\r\n1. Determine the total cost of the RI over its term (e.g., 1 or 3 years).\r\n2. Calculate the pay-as-you-go cost for the same duration.\r\n3. Find the point where the cumulative savings equal the RI's upfront or periodic payments.\r\n\r\nThis helps you understand how long it will take for the investment in a Reserved Instance to start saving money compared to on-demand pricing.\r\n\r\nThe breakeven point (in months) is calculated based on 100% utilization within the term (1 yr or 3 yrs) of Reservations. Your actual usage of RI may vary and can change the breakeven point. To monitor the RI usage data consider using the RI utilization alerts.",
                    "style": "upsell"
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedRateOptimizationSubTab",
                    "comparison": "isEqualTo",
                    "value": "reservations"
                  },
                  "name": "text-breakeven explanation"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "loadType": "explicit",
                    "loadButtonText": "Show reservation break-even analysis",
                    "items": [
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 9,
                              "content": {
                                "version": "KqlParameterItem/1.0",
                                "parameters": [
                                  {
                                    "id": "f2bb2b02-9187-4209-9fb8-eb99c60d9c9d",
                                    "version": "KqlParameterItem/1.0",
                                    "name": "agreementType",
                                    "label": "Agreement Type",
                                    "type": 10,
                                    "isRequired": true,
                                    "typeSettings": {
                                      "additionalResourceOptions": [],
                                      "showDefault": false
                                    },
                                    "jsonData": "[\r\n    {\r\n    \"value\" : \"MCA\",\r\n    \"label\" : \"Microsoft Customer Agreement (MCA)\"\r\n    },\r\n    {\r\n    \"value\" : \"EA\",\r\n    \"label\" : \"Microsoft Enterprise Agreement (EA)\"\r\n    }\r\n]",
                                    "timeContext": {
                                      "durationMs": 86400000
                                    },
                                    "value": "EA"
                                  }
                                ],
                                "style": "pills",
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces"
                              },
                              "name": "parameters - 0"
                            },
                            {
                              "type": 9,
                              "content": {
                                "version": "KqlParameterItem/1.0",
                                "parameters": [
                                  {
                                    "id": "1007cfd0-3554-41ea-8e8c-e04d4f67add4",
                                    "version": "KqlParameterItem/1.0",
                                    "name": "billingAccount",
                                    "label": "Billing Account",
                                    "type": 2,
                                    "isRequired": true,
                                    "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"/providers/Microsoft.Billing/billingAccounts\",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2019-10-01-preview\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value\",\"columns\":[{\"path\":\"name\",\"columnid\":\"billingAccount\"},{\"path\":\"properties.displayName\",\"columnid\":\"Displayname\"}]}}]}",
                                    "typeSettings": {
                                      "additionalResourceOptions": [],
                                      "showDefault": false
                                    },
                                    "timeContext": {
                                      "durationMs": 86400000
                                    },
                                    "queryType": 12,
                                    "value": "8611537"
                                  },
                                  {
                                    "id": "38d70cdc-7667-44d8-8a05-f1384c8a92a2",
                                    "version": "KqlParameterItem/1.0",
                                    "name": "lookBackPeriod",
                                    "label": "Look back period",
                                    "type": 2,
                                    "isRequired": true,
                                    "typeSettings": {
                                      "additionalResourceOptions": [],
                                      "showDefault": false
                                    },
                                    "jsonData": "[\r\n    {\r\n    \"value\" : \"Last7Days\",\r\n    \"label\" : \"Last 7 Days\"\r\n    },\r\n    {\r\n    \"value\" : \"Last30Days\",\r\n    \"label\" : \"Last 30 Days\",\r\n    \"selected\" : true\r\n    },\r\n    {\r\n    \"value\" : \"Last60Days\",\r\n    \"label\" : \"Last 60 Days\"\r\n    }\r\n]",
                                    "timeContext": {
                                      "durationMs": 86400000
                                    },
                                    "value": "Last60Days"
                                  },
                                  {
                                    "id": "9892e53b-bda1-4cb6-a3a1-25de058c4484",
                                    "version": "KqlParameterItem/1.0",
                                    "name": "scope",
                                    "label": "Scope",
                                    "type": 10,
                                    "isRequired": true,
                                    "typeSettings": {
                                      "additionalResourceOptions": [],
                                      "showDefault": false
                                    },
                                    "jsonData": "[\r\n    {\r\n        \"value\": \"properties/scope eq 'Single'\",\r\n        \"label\" : \"Single\",\r\n        \"selected\": true\r\n    },\r\n    {\r\n        \"value\": \"properties/scope eq 'Shared'\",\r\n        \"label\" : \"Shared\",\r\n        \"selected\": true\r\n    }\r\n\r\n]",
                                    "value": "properties/scope eq 'Shared'"
                                  },
                                  {
                                    "version": "KqlParameterItem/1.0",
                                    "name": "term",
                                    "label": "Term",
                                    "type": 10,
                                    "isRequired": true,
                                    "typeSettings": {
                                      "additionalResourceOptions": [],
                                      "showDefault": false
                                    },
                                    "jsonData": "[\r\n    {\r\n        \"value\": \"properties/term eq 'P1Y'\",\r\n        \"label\" : \"1Y\",\r\n        \"selected\": true\r\n    },\r\n    {\r\n        \"value\": \"properties/term eq 'P3Y'\",\r\n        \"label\" : \"3Y\",\r\n        \"selected\": true\r\n    }\r\n\r\n]",
                                    "value": "properties/term eq 'P3Y'",
                                    "id": "6850fde5-30c4-49f1-91c2-4ce150778c18"
                                  }
                                ],
                                "style": "pills",
                                "queryType": 0,
                                "resourceType": "microsoft.operationalinsights/workspaces"
                              },
                              "name": "parameters - 3"
                            },
                            {
                              "type": 9,
                              "content": {
                                "version": "KqlParameterItem/1.0",
                                "parameters": [
                                  {
                                    "id": "78948283-c135-4603-b506-a0271660ae26",
                                    "version": "KqlParameterItem/1.0",
                                    "name": "billingProfile",
                                    "label": "Billing profile",
                                    "type": 2,
                                    "isRequired": true,
                                    "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"/providers/Microsoft.Billing/billingAccounts/{billingAccount}/billingProfiles\",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2020-05-01\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value\",\"columns\":[{\"path\":\"name\",\"columnid\":\"Name\"},{\"path\":\"properties.displayName\",\"columnid\":\"DisplayName\"}]}}]}",
                                    "typeSettings": {
                                      "additionalResourceOptions": [],
                                      "showDefault": false
                                    },
                                    "timeContext": {
                                      "durationMs": 86400000
                                    },
                                    "queryType": 12,
                                    "value": null
                                  }
                                ],
                                "style": "pills",
                                "queryType": 12
                              },
                              "conditionalVisibility": {
                                "parameterName": "agreementType",
                                "comparison": "isEqualTo",
                                "value": "MCA"
                              },
                              "name": "parameters - billingProfile"
                            },
                            {
                              "type": 11,
                              "content": {
                                "version": "LinkItem/1.0",
                                "style": "tabs",
                                "links": [
                                  {
                                    "id": "3122e083-af17-48c5-af19-b2dde9e55214",
                                    "cellValue": "SelectedSubTab",
                                    "linkTarget": "parameter",
                                    "linkLabel": "Reservations Recommendations",
                                    "subTarget": "riRecommendations",
                                    "style": "link"
                                  }
                                ]
                              },
                              "conditionalVisibility": {
                                "parameterName": "SelectedTab",
                                "comparison": "isEqualTo",
                                "value": "reservations"
                              },
                              "name": "Subtabs - Reservations"
                            },
                            {
                              "type": 12,
                              "content": {
                                "version": "NotebookGroup/1.0",
                                "groupType": "editable",
                                "items": [
                                  {
                                    "type": 1,
                                    "content": {
                                      "json": "## Reservation Break-Even Analysis"
                                    },
                                    "name": "reservationOverviewText"
                                  },
                                  {
                                    "type": 1,
                                    "content": {
                                      "json": "## Important Information - This tab is under preview and requires different permissions.\r\n",
                                      "style": "success"
                                    },
                                    "name": "Preview Info text"
                                  },
                                  {
                                    "type": 1,
                                    "content": {
                                      "json": "## RBAC Needed\r\n\r\nThis tab displays various reservations-related details. To access the information on this tab, ensure you have the following minimum RBAC permissions:\r\n\r\n* **For Enterprise Admin (EA) Customers:** Enterprise Administrator (read-only) or EA Purchaser. Learn more about setting up these permissions here: [Organization Structure and Permissions by Role](https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/understand-ea-roles#organization-structure-and-permissions-by-role).\r\n\r\n* **For Microsoft Customer Agreement (MCA) Customers:** Billing Profile Reader. Learn more about setting up these permissions here: [Billing Profile Roles and Tasks](https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/understand-mca-roles#billing-profile-roles-and-tasks).\r\n",
                                      "style": "warning"
                                    },
                                    "name": "rbacText"
                                  },
                                  {
                                    "type": 9,
                                    "content": {
                                      "version": "KqlParameterItem/1.0",
                                      "parameters": [
                                        {
                                          "id": "5c5c1817-4ccf-438d-a1b4-08ea4451438b",
                                          "version": "KqlParameterItem/1.0",
                                          "name": "resourceType",
                                          "label": "Resource type",
                                          "type": 10,
                                          "isRequired": true,
                                          "typeSettings": {
                                            "additionalResourceOptions": []
                                          },
                                          "jsonData": "[\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'VirtualMachines'\",\r\n    \"label\" : \"VirtualMachines\",\r\n    \"selected\": true\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'SQLDatabases'\",\r\n    \"label\" : \"SQLDatabases\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'PostgreSQL'\",\r\n    \"label\" : \"PostgreSQL\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'ManagedDisk'\",\r\n    \"label\" : \"ManagedDisk\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'MySQL'\",\r\n    \"label\" : \"MySQL\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'RedHat'\",\r\n    \"label\" : \"RedHat\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'MariaDB'\",\r\n    \"label\" : \"MariaDB\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'RedisCache'\",\r\n    \"label\" : \"RedisCache\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'CosmosDB'\",\r\n    \"label\" : \"CosmosDB\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'CosmosDB'\",\r\n    \"label\" : \"CosmosDB\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'SUSELinux'\",\r\n    \"label\" : \"SUSELinux\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'AppService'\",\r\n    \"label\" : \"AppService\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'BlockBlob'\",\r\n    \"label\" : \"BlockBlob\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'AzureDataExplorer'\",\r\n    \"label\" : \"AzureDataExplorer\"\r\n    },\r\n    {\r\n    \"value\" : \"properties/resourceType eq 'VMwareCloudSimple'\",\r\n    \"label\" : \"VMwareCloudSimple\"\r\n    }\r\n]",
                                          "timeContext": {
                                            "durationMs": 86400000
                                          }
                                        }
                                      ],
                                      "style": "pills",
                                      "queryType": 0,
                                      "resourceType": "microsoft.operationalinsights/workspaces"
                                    },
                                    "name": "paramResourceType"
                                  },
                                  {
                                    "type": 12,
                                    "content": {
                                      "version": "NotebookGroup/1.0",
                                      "groupType": "editable",
                                      "items": [
                                        {
                                          "type": 1,
                                          "content": {
                                            "json": "## Reservation Recommendations - Microsoft Customer Agreement (MCA)"
                                          },
                                          "name": "reservationOverviewText-MCA"
                                        },
                                        {
                                          "type": 3,
                                          "content": {
                                            "version": "KqlItem/1.0",
                                            "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"/providers/Microsoft.Billing/billingAccounts/{billingAccount}/billingProfiles/{billingProfile}/providers/Microsoft.Consumption/reservationRecommendations?$filter=properties/lookBackPeriod  eq '{lookBackPeriod}' AND {resourceType:escapejson} AND {scope:escapejson} \",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2021-10-01\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value\",\"columns\":[{\"path\":\"properties.term\",\"columnid\":\"Term\"},{\"path\":\"properties.scope\",\"columnid\":\"Scope\"},{\"path\":\"properties.subscriptionId\",\"columnid\":\"Subscription\"},{\"path\":\"properties.skuName\",\"columnid\":\"SKU\"},{\"path\":\"properties.location\",\"columnid\":\"Location\"},{\"path\":\"properties.recommendedQuantity\",\"columnid\":\"Quantity\"},{\"path\":\"properties.costWithNoReservedInstances.value\",\"columnid\":\"CostWithoutRI\"},{\"path\":\"properties.totalCostWithReservedInstances.value\",\"columnid\":\"CostWithRI\"},{\"path\":\"properties.netSavings.vlaue\",\"columnid\":\"Savings\"},{\"path\":\"properties.lookBackPeriod\",\"columnid\":\"LookBackPeriod\"}]}}]}",
                                            "size": 0,
                                            "title": "Reservations recommendations",
                                            "queryType": 12,
                                            "gridSettings": {
                                              "filter": true
                                            }
                                          },
                                          "conditionalVisibility": {
                                            "parameterName": "isVisible",
                                            "comparison": "isEqualTo",
                                            "value": "true"
                                          },
                                          "name": "query - reservationRecommendations-MCA",
                                          "styleSettings": {
                                            "showBorder": true
                                          }
                                        },
                                        {
                                          "type": 3,
                                          "content": {
                                            "version": "KqlItem/1.0",
                                            "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\",\"mergeType\":\"table\",\"leftTable\":\"query - reservationRecommendations-MCA\"}],\"projectRename\":[{\"originalName\":\"[query - reservationRecommendations-MCA].Term\",\"mergedName\":\"Term\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].Scope\",\"mergedName\":\"Scope\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].SKU\",\"mergedName\":\"SKU\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].Location\",\"mergedName\":\"Location\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].Quantity\",\"mergedName\":\"Quantity\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].CostWithoutRI\",\"mergedName\":\"CostWithoutRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].CostWithRI\",\"mergedName\":\"CostWithRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[query - reservationRecommendations-MCA].Savings\",\"mergedName\":\"Savings\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"},{\"originalName\":\"[Added column]\",\"mergedName\":\"Breakeven point (Months)\",\"fromId\":null,\"isNewItem\":true,\"newItemData\":[{\"criteriaContext\":{\"leftOperand\":\"Term\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"P1Y\",\"resultValType\":\"expression\",\"resultVal\":\"round([\\\"CostWithRI\\\"]*12/[\\\"CostWithoutRI\\\"],0)\"}},{\"criteriaContext\":{\"leftOperand\":\"Term\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"P3Y\",\"resultValType\":\"expression\",\"resultVal\":\"round([\\\"CostWithRI\\\"]*12*3/[\\\"CostWithoutRI\\\"],0)\"}},{\"criteriaContext\":{\"operator\":\"Default\",\"rightValType\":\"column\",\"resultValType\":\"column\"}}]},{\"originalName\":\"[query - reservationRecommendations-MCA].LookBackPeriod\",\"mergedName\":\"LookBackPeriod\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f116f\"}]}",
                                            "size": 0,
                                            "showRefreshButton": true,
                                            "showExportToExcel": true,
                                            "queryType": 7
                                          },
                                          "name": "reservationRecommendations-MCA-MERGE",
                                          "styleSettings": {
                                            "showBorder": true
                                          }
                                        }
                                      ]
                                    },
                                    "conditionalVisibilities": [
                                      {
                                        "parameterName": "agreementType",
                                        "comparison": "isEqualTo",
                                        "value": "MCA"
                                      },
                                      {
                                        "parameterName": "billingAccount",
                                        "comparison": "isNotEqualTo"
                                      }
                                    ],
                                    "name": "group - MCA"
                                  },
                                  {
                                    "type": 12,
                                    "content": {
                                      "version": "NotebookGroup/1.0",
                                      "groupType": "editable",
                                      "loadType": "explicit",
                                      "items": [
                                        {
                                          "type": 1,
                                          "content": {
                                            "json": "## Reservation Recommendations - Enterprise Admin (EA)"
                                          },
                                          "name": "reservationOverviewText-EA"
                                        },
                                        {
                                          "type": 3,
                                          "content": {
                                            "version": "KqlItem/1.0",
                                            "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"/providers/Microsoft.Billing/billingAccounts/{billingAccount}//providers/Microsoft.Consumption/reservationRecommendations?$filter=properties/lookBackPeriod  eq '{lookBackPeriod}' AND {resourceType:escapejson} AND {scope:escapejson}  AND {term:escapejson}\",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2021-10-01\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value\",\"columns\":[{\"path\":\"properties.term\",\"columnid\":\"Term\"},{\"path\":\"properties.scope\",\"columnid\":\"Scope\"},{\"path\":\"properties.subscriptionId\",\"columnid\":\"Subscription\"},{\"path\":\"sku\",\"columnid\":\"SKU\"},{\"path\":\"location\",\"columnid\":\"Location\"},{\"path\":\"properties.recommendedQuantity\",\"columnid\":\"Quantity\"},{\"path\":\"properties.costWithNoReservedInstances\",\"columnid\":\"CostWithoutRI\"},{\"path\":\"properties.totalCostWithReservedInstances\",\"columnid\":\"CostWithRI\"},{\"path\":\"properties.netSavings\",\"columnid\":\"Savings\"},{\"path\":\"properties.lookBackPeriod\",\"columnid\":\"LookBackPeriod\"}]}}]}",
                                            "size": 0,
                                            "title": "Reservations recommendations",
                                            "noDataMessage": "No reservation recommendations found!",
                                            "showExportToExcel": true,
                                            "queryType": 12,
                                            "gridSettings": {
                                              "rowLimit": 10000,
                                              "filter": true
                                            }
                                          },
                                          "conditionalVisibility": {
                                            "parameterName": "isVisible",
                                            "comparison": "isEqualTo",
                                            "value": "true"
                                          },
                                          "name": "query - reservationRecommendations-EA"
                                        },
                                        {
                                          "type": 3,
                                          "content": {
                                            "version": "KqlItem/1.0",
                                            "query": "ResourceContainers \r\n| where type =~ 'Microsoft.Resources/subscriptions'\r\n| project SubscriptionName = name, subscriptionId ",
                                            "size": 0,
                                            "queryType": 1,
                                            "resourceType": "microsoft.resourcegraph/resources",
                                            "crossComponentResources": [
                                              "value::all"
                                            ],
                                            "gridSettings": {
                                              "rowLimit": 10000,
                                              "filter": true
                                            }
                                          },
                                          "conditionalVisibility": {
                                            "parameterName": "AlwaysHidden",
                                            "comparison": "isEqualTo",
                                            "value": "True"
                                          },
                                          "name": "SubNameMapping-Hidden"
                                        },
                                        {
                                          "type": 3,
                                          "content": {
                                            "version": "KqlItem/1.0",
                                            "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\",\"mergeType\":\"table\",\"leftTable\":\"query - reservationRecommendations-EA\"}],\"projectRename\":[{\"originalName\":\"[query - reservationRecommendations].Term\",\"mergedName\":\"Term\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].Scope\",\"mergedName\":\"Scope\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].SKU\",\"mergedName\":\"SKU\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].Location\",\"mergedName\":\"Location\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].Quantity\",\"mergedName\":\"Quantity\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].CostWithoutRI\",\"mergedName\":\"CostWithoutRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].CostWithRI\",\"mergedName\":\"CostWithRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].Savings\",\"mergedName\":\"Savings\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations].LookBackPeriod\",\"mergedName\":\"LookBackPeriod\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f12ad\"},{\"originalName\":\"[query - reservationRecommendations-EA].Term\",\"mergedName\":\"Term\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Scope\",\"mergedName\":\"Scope\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].SKU\",\"mergedName\":\"SKU\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Location\",\"mergedName\":\"Location\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Quantity\",\"mergedName\":\"Quantity\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].CostWithoutRI\",\"mergedName\":\"CostWithoutRI\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].CostWithRI\",\"mergedName\":\"CostWithRI\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Savings\",\"mergedName\":\"Savings\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].LookBackPeriod\",\"mergedName\":\"LookBackPeriod\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].value\",\"mergedName\":\"value\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].defaultVisualization\",\"mergedName\":\"defaultVisualization\",\"fromId\":\"unknown\"}]}",
                                            "size": 0,
                                            "aggregation": 5,
                                            "title": "Top savings by Sku",
                                            "showRefreshButton": true,
                                            "showExportToExcel": true,
                                            "queryType": 7,
                                            "visualization": "barchart",
                                            "chartSettings": {
                                              "xAxis": "SKU",
                                              "yAxis": [
                                                "Savings"
                                              ],
                                              "group": "SKU",
                                              "createOtherGroup": 50,
                                              "showLegend": true,
                                              "ySettings": {
                                                "numberFormatSettings": {
                                                  "unit": 0,
                                                  "options": {
                                                    "style": "decimal",
                                                    "useGrouping": true,
                                                    "maximumFractionDigits": 2
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          "conditionalVisibility": {
                                            "parameterName": "AlwaysHidden",
                                            "comparison": "isEqualTo",
                                            "value": "true"
                                          },
                                          "showPin": false,
                                          "name": "query - SavingsChart",
                                          "styleSettings": {
                                            "showBorder": true
                                          }
                                        },
                                        {
                                          "type": 3,
                                          "content": {
                                            "version": "KqlItem/1.0",
                                            "query": "{\"version\":\"Merge/1.0\",\"merges\":[{\"id\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\",\"mergeType\":\"leftouter\",\"leftTable\":\"query - reservationRecommendations-EA\",\"rightTable\":\"SubNameMapping-Hidden\",\"leftColumn\":\"Subscription\",\"rightColumn\":\"subscriptionId\"}],\"projectRename\":[{\"originalName\":\"SubscriptionName\",\"mergedName\":\"SubscriptionName\",\"fromId\":\"unknown\"},{\"originalName\":\"[SubNameMapping-Hidden].SubscriptionName\",\"mergedName\":\"SubscriptionName1\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].LookBackPeriod\",\"mergedName\":\"LookBackPeriod\",\"fromId\":\"unknown\"},{\"originalName\":\"subscriptionId\",\"mergedName\":\"subscriptionId\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations].Term\",\"mergedName\":\"Term\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].Scope\",\"mergedName\":\"Scope\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].SKU\",\"mergedName\":\"SKU\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[Added column]\",\"mergedName\":\"Breakeven point (Months)\",\"fromId\":null,\"isNewItem\":true,\"newItemData\":[{\"criteriaContext\":{\"leftOperand\":\"Term\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"P1Y\",\"resultValType\":\"expression\",\"resultVal\":\"round([\\\"CostWithRI\\\"]*12/[\\\"CostWithoutRI\\\"],0)\"}},{\"criteriaContext\":{\"leftOperand\":\"Term\",\"operator\":\"==\",\"rightValType\":\"static\",\"rightVal\":\"P3Y\",\"resultValType\":\"expression\",\"resultVal\":\"round([\\\"CostWithRI\\\"]*12*3/[\\\"CostWithoutRI\\\"],0)\"}},{\"criteriaContext\":{\"operator\":\"Default\",\"rightValType\":\"column\",\"resultValType\":\"column\"}}]},{\"originalName\":\"[query - reservationRecommendations].Location\",\"mergedName\":\"Location\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].Quantity\",\"mergedName\":\"Quantity\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].CostWithoutRI\",\"mergedName\":\"CostWithoutRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].CostWithRI\",\"mergedName\":\"CostWithRI\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations].Savings\",\"mergedName\":\"Savings\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[SubNameMapping-Hidden].subscriptionId\",\"mergedName\":\"subscriptionId1\",\"fromId\":\"06a2581c-98e0-4a40-a99e-45ea9b8f10de\"},{\"originalName\":\"[query - reservationRecommendations-EA].Term\",\"mergedName\":\"Term\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Scope\",\"mergedName\":\"Scope\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Subscription\",\"mergedName\":\"Subscription\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].SKU\",\"mergedName\":\"SKU\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Location\",\"mergedName\":\"Location\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Quantity\",\"mergedName\":\"Quantity\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].CostWithoutRI\",\"mergedName\":\"CostWithoutRI\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].CostWithRI\",\"mergedName\":\"CostWithRI\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].Savings\",\"mergedName\":\"Savings\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - reservationRecommendations-EA].LookBackPeriod\",\"mergedName\":\"LookBackPeriod\",\"fromId\":\"unknown\"},{\"originalName\":\"[query - Get All subscriptions].zones\"},{\"originalName\":\"[query - Get All subscriptions].identity\"},{\"originalName\":\"[query - Get All subscriptions].tags\"},{\"originalName\":\"[query - Get All subscriptions].properties\"},{\"originalName\":\"[query - Get All subscriptions].plan\"},{\"originalName\":\"[query - Get All subscriptions].sku\"},{\"originalName\":\"[query - Get All subscriptions].managedBy\"},{\"originalName\":\"[query - Get All subscriptions].resourceGroup\"},{\"originalName\":\"[query - Get All subscriptions].location\"},{\"originalName\":\"[query - Get All subscriptions].kind\"},{\"originalName\":\"[query - Get All subscriptions].tenantId\"},{\"originalName\":\"[query - Get All subscriptions].type\"},{\"originalName\":\"[query - Get All subscriptions].subscriptionId\"},{\"originalName\":\"[query - Get All subscriptions].extendedLocation\"},{\"originalName\":\"[query - Get All subscriptions].name\"},{\"originalName\":\"[query - Get All subscriptions].id\"}]}",
                                            "size": 0,
                                            "title": "Reservations recommendations",
                                            "showRefreshButton": true,
                                            "showExportToExcel": true,
                                            "queryType": 7,
                                            "gridSettings": {
                                              "formatters": [
                                                {
                                                  "columnMatch": "SubscriptionName1",
                                                  "formatter": 5
                                                },
                                                {
                                                  "columnMatch": "subscriptionId1",
                                                  "formatter": 5,
                                                  "formatOptions": {
                                                    "linkTarget": "Resource",
                                                    "linkIsContextBlade": true,
                                                    "customColumnWidthSetting": "37ch"
                                                  }
                                                },
                                                {
                                                  "columnMatch": "Scope",
                                                  "formatter": 0,
                                                  "formatOptions": {
                                                    "customColumnWidthSetting": "12ch"
                                                  }
                                                },
                                                {
                                                  "columnMatch": "Subscription",
                                                  "formatter": 15,
                                                  "formatOptions": {
                                                    "linkTarget": null,
                                                    "showIcon": true
                                                  }
                                                },
                                                {
                                                  "columnMatch": "SKU",
                                                  "formatter": 0,
                                                  "formatOptions": {
                                                    "customColumnWidthSetting": "18ch"
                                                  }
                                                },
                                                {
                                                  "columnMatch": "Location",
                                                  "formatter": 0,
                                                  "formatOptions": {
                                                    "customColumnWidthSetting": "13.7143ch"
                                                  }
                                                },
                                                {
                                                  "columnMatch": "Quantity",
                                                  "formatter": 0,
                                                  "formatOptions": {
                                                    "customColumnWidthSetting": "13.2857ch"
                                                  }
                                                },
                                                {
                                                  "columnMatch": "Breakeven point (Months)",
                                                  "formatter": 0,
                                                  "formatOptions": {
                                                    "customColumnWidthSetting": "27.4286ch"
                                                  }
                                                },
                                                {
                                                  "columnMatch": "CostWithoutRI",
                                                  "formatter": 0,
                                                  "formatOptions": {
                                                    "customColumnWidthSetting": "19.4286ch"
                                                  },
                                                  "numberFormat": {
                                                    "unit": 0,
                                                    "options": {
                                                      "style": "decimal",
                                                      "useGrouping": true,
                                                      "maximumFractionDigits": 2
                                                    }
                                                  }
                                                },
                                                {
                                                  "columnMatch": "CostWithRI",
                                                  "formatter": 0,
                                                  "formatOptions": {
                                                    "aggregation": "Sum",
                                                    "customColumnWidthSetting": "15.8571ch"
                                                  },
                                                  "numberFormat": {
                                                    "unit": 0,
                                                    "options": {
                                                      "style": "decimal",
                                                      "useGrouping": true,
                                                      "maximumFractionDigits": 2
                                                    }
                                                  }
                                                },
                                                {
                                                  "columnMatch": "Savings",
                                                  "formatter": 0,
                                                  "formatOptions": {
                                                    "customColumnWidthSetting": "16.1429ch"
                                                  },
                                                  "numberFormat": {
                                                    "unit": 0,
                                                    "options": {
                                                      "style": "decimal",
                                                      "useGrouping": true,
                                                      "maximumFractionDigits": 2
                                                    }
                                                  }
                                                },
                                                {
                                                  "columnMatch": "LookBackPeriod",
                                                  "formatter": 0,
                                                  "formatOptions": {
                                                    "customColumnWidthSetting": "21ch"
                                                  }
                                                }
                                              ],
                                              "rowLimit": 10000,
                                              "filter": true,
                                              "labelSettings": [
                                                {
                                                  "columnId": "SubscriptionName1",
                                                  "label": "Subscription Name"
                                                },
                                                {
                                                  "columnId": "subscriptionId1",
                                                  "label": "Subscription Id"
                                                },
                                                {
                                                  "columnId": "Term",
                                                  "label": "Term"
                                                },
                                                {
                                                  "columnId": "Scope",
                                                  "label": "Scope"
                                                },
                                                {
                                                  "columnId": "SKU",
                                                  "label": "SKU"
                                                },
                                                {
                                                  "columnId": "Location",
                                                  "label": "Location"
                                                },
                                                {
                                                  "columnId": "Quantity",
                                                  "label": "Quantity"
                                                },
                                                {
                                                  "columnId": "Breakeven point (Months)",
                                                  "label": "Breakeven point (Months)"
                                                },
                                                {
                                                  "columnId": "CostWithoutRI",
                                                  "label": "Cost Without RI"
                                                },
                                                {
                                                  "columnId": "CostWithRI",
                                                  "label": "Cost With RI"
                                                },
                                                {
                                                  "columnId": "Savings",
                                                  "label": "Savings"
                                                },
                                                {
                                                  "columnId": "LookBackPeriod",
                                                  "label": "Lookback Period"
                                                }
                                              ]
                                            },
                                            "sortBy": []
                                          },
                                          "name": "query - Reservations recommendations",
                                          "styleSettings": {
                                            "showBorder": true
                                          }
                                        }
                                      ]
                                    },
                                    "conditionalVisibilities": [
                                      {
                                        "parameterName": "agreementType",
                                        "comparison": "isEqualTo",
                                        "value": "EA"
                                      },
                                      {
                                        "parameterName": "billingAccount",
                                        "comparison": "isNotEqualTo"
                                      }
                                    ],
                                    "name": "group - EA"
                                  }
                                ]
                              },
                              "conditionalVisibilities": [
                                {
                                  "parameterName": "SelectedSubTab",
                                  "comparison": "isEqualTo",
                                  "value": "riRecommendations"
                                },
                                {
                                  "parameterName": "selectedRateOptimizationTab",
                                  "comparison": "isNotEqualTo",
                                  "value": "AHB"
                                }
                              ],
                              "name": "Group Reservations Recommendations"
                            }
                          ]
                        },
                        "name": "group - 0"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedRateOptimizationSubTab",
                    "comparison": "isEqualTo",
                    "value": "reservations"
                  },
                  "name": "group - Reservations-preview"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 9,
                        "content": {
                          "version": "KqlParameterItem/1.0",
                          "crossComponentResources": [
                            "{Subscription}"
                          ],
                          "parameters": [
                            {
                              "id": "a6ed5697-bc2e-442a-804f-a7c1ec3cb99b",
                              "version": "KqlParameterItem/1.0",
                              "name": "checkReservations",
                              "type": 1,
                              "query": "AdvisorResources \r\n| where type == 'microsoft.advisor/recommendations' \r\n| where properties.category == 'Cost' and properties.shortDescription.solution contains \"Reserved Instance\"\r\n| extend reservedResourceType=tostring(properties.extendedProperties.reservedResourceType)\r\n| distinct reservedResourceType\r\n",
                              "crossComponentResources": [
                                "{Subscription}"
                              ],
                              "timeContext": {
                                "durationMs": 86400000
                              },
                              "queryType": 1,
                              "resourceType": "microsoft.resourcegraph/resources"
                            }
                          ],
                          "style": "pills",
                          "queryType": 1,
                          "resourceType": "microsoft.resourcegraph/resources"
                        },
                        "conditionalVisibility": {
                          "parameterName": "AlwaysHidden",
                          "comparison": "isEqualTo",
                          "value": "true"
                        },
                        "name": "parameters - 3"
                      },
                      {
                        "type": 12,
                        "content": {
                          "version": "NotebookGroup/1.0",
                          "groupType": "editable",
                          "items": [
                            {
                              "type": 9,
                              "content": {
                                "version": "KqlParameterItem/1.0",
                                "crossComponentResources": [
                                  "{Subscription}"
                                ],
                                "parameters": [
                                  {
                                    "id": "2b8ca845-75ba-4f4b-acad-54ee50d66d54",
                                    "version": "KqlParameterItem/1.0",
                                    "name": "LookBackPeriod",
                                    "label": "Look back period",
                                    "type": 2,
                                    "isRequired": true,
                                    "typeSettings": {
                                      "additionalResourceOptions": [],
                                      "showDefault": false
                                    },
                                    "jsonData": "[\r\n    {\"value\": \"Last 7 days\"},\r\n    {\"value\": \"Last 30 days\"},\r\n    {\"value\": \"Last 60 days\"}\r\n]",
                                    "timeContext": {
                                      "durationMs": 86400000
                                    },
                                    "value": "Last 60 days"
                                  },
                                  {
                                    "id": "953c9e4c-af03-4fb7-bf30-3f1bfdf09199",
                                    "version": "KqlParameterItem/1.0",
                                    "name": "term",
                                    "label": "Term",
                                    "type": 2,
                                    "isRequired": true,
                                    "typeSettings": {
                                      "additionalResourceOptions": []
                                    },
                                    "jsonData": "[\r\n    {\r\n        \"value\": \"P1Y\",\r\n        \"Selected\": \"true\"\r\n    },\r\n    {\r\n        \"value\": \"P3Y\"\r\n    }\r\n]",
                                    "timeContext": {
                                      "durationMs": 86400000
                                    },
                                    "value": "P3Y"
                                  },
                                  {
                                    "id": "c46193fe-f1b2-49d1-a9bc-c9f5149f0194",
                                    "version": "KqlParameterItem/1.0",
                                    "name": "resourceType",
                                    "label": "Resource type",
                                    "type": 2,
                                    "isRequired": true,
                                    "multiSelect": true,
                                    "quote": "'",
                                    "delimiter": ",",
                                    "query": "AdvisorResources \r\n| where type == 'microsoft.advisor/recommendations' \r\n| where properties.category == 'Cost' and properties.shortDescription.solution contains \"Reserved Instance\"\r\n| extend reservedResourceType=tostring(properties.extendedProperties.reservedResourceType)\r\n| distinct reservedResourceType",
                                    "crossComponentResources": [
                                      "{Subscription}"
                                    ],
                                    "typeSettings": {
                                      "additionalResourceOptions": [
                                        "value::all"
                                      ],
                                      "showDefault": false
                                    },
                                    "defaultValue": "value::all",
                                    "queryType": 1,
                                    "resourceType": "microsoft.resourcegraph/resources",
                                    "value": [
                                      "value::all"
                                    ]
                                  }
                                ],
                                "style": "pills",
                                "queryType": 1,
                                "resourceType": "microsoft.resourcegraph/resources"
                              },
                              "conditionalVisibility": {
                                "parameterName": "checkReservations",
                                "comparison": "isNotEqualTo"
                              },
                              "name": "parameters - reservationsParams"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "AdvisorResources \r\n| where type == 'microsoft.advisor/recommendations' \r\n| where properties.category == 'Cost' and properties.shortDescription.solution contains \"Reserved Instance\" \r\n| extend\r\nrecommendationTypeId = tostring(properties.recommendationTypeId),\r\nreservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nterm=tostring(properties.extendedProperties.term),\r\nstableId = name,\r\nsubscriptionId = tostring(properties.extendedProperties.subId)\r\n| where term == \"{term}\" and lookbackPeriod == \"{LookBackPeriod}\" and reservedResourceType in ({resourceType})\r\n| extend subscriptionId,stableId\r\n| join kind = leftouter\r\n(advisorresources | where type=~'microsoft.advisor/suppressions'\r\n| extend tokens = split(id, '/')\r\n| extend stableId = iff(array_length(tokens) > 3, tokens[(array_length(tokens)-3)], '')\r\n| extend expirationTimeStamp = todatetime(iff(strcmp(tostring(properties.ttl), '-1') == 0, '9999-12-31', properties.expirationTimeStamp))\r\n| where expirationTimeStamp > now()\r\n| project stableId, expirationTimeStamp)\r\non stableId\r\n| where isempty(expirationTimeStamp)\r\n| extend subscriptionId,stableId\r\n| join kind = leftouter\r\n(advisorresources \r\n| where type =~ 'microsoft.advisor/configurations'\r\n| where isempty(resourceGroup) == true\r\n| extend\r\nmaxCpuP95 = properties.extendedProperties.MaxCpuP95,\r\nlowCpuThreshold = properties.lowCpuThreshold,\r\nexcludeRecomm = properties.exclude,\r\nreservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nscope=tostring(properties.extendedProperties.scope),\r\nterm=tostring(properties.extendedProperties.term),\r\nsavings=todouble(properties.extendedProperties.annualSavingsAmount),\r\nsavingsAmount = todouble(properties.extendedProperties.savingsAmount),\r\nRecommendation=tostring(properties.shortDescription.solution),  \r\ncurrency = tostring(properties.extendedProperties.savingsCurrency),\r\ndisplayQty = tostring(properties.extendedProperties.displayQty),\r\ndisplaySKU = tostring(properties.extendedProperties.displaySKU),\r\nregion = tostring(properties.extendedProperties.region),\r\nstableId = name,\r\nsubscriptionId = tostring(properties.extendedProperties.subId))\r\non subscriptionId\r\n| extend isActive1 = iff(isnull(excludeRecomm), true, tobool(excludeRecomm) == false)\r\n| extend isActive2 = iff(recommendationTypeId == 'e10b1381-5f0a-47ff-8c7b-37bd13d7c974', iff((isnotempty(lowCpuThreshold) and isnotempty(maxCpuP95)), toint(maxCpuP95) < toint(lowCpuThreshold), iff((isempty(maxCpuP95) or toint(maxCpuP95) < 5), true, false)), true)\r\n| where isActive1 == true and isActive2 == true\r\n| join kind = leftouter\r\n(advisorresources | where type =~ 'microsoft.advisor/configurations' | where isnotempty(resourceGroup) == true\r\n| project subscriptionId, resourceGroup, excludeProperty = properties.exclude)\r\non subscriptionId, resourceGroup\r\n| extend isActive3 = iff(isnull(excludeProperty), true, tobool(excludeProperty) == false)\r\n| where isActive3 == true\r\n| extend reservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nscope=tostring(properties.extendedProperties.scope),\r\nterm=tostring(properties.extendedProperties.term),\r\nsavings=todouble(properties.extendedProperties.annualSavingsAmount),\r\nsavingsAmount = todouble(properties.extendedProperties.savingsAmount),\r\nRecommendation=tostring(properties.shortDescription.solution),  \r\ncurrency = tostring(properties.extendedProperties.savingsCurrency),\r\ndisplayQty = tostring(properties.extendedProperties.displayQty),\r\ndisplaySKU = tostring(properties.extendedProperties.displaySKU),\r\nregion = tostring(properties.extendedProperties.region),\r\nresources=tostring(properties.resourceMetadata.resourceId),  \r\nsubscription = tostring(properties.extendedProperties.subId)\r\n| where term == \"{term}\" and lookbackPeriod == \"{LookBackPeriod}\" and reservedResourceType in ({resourceType})\r\n| summarize Subscriptions=dcount(resources),  \r\n  bin (sum(savings), 0.01) by Recommendation ,reservedResourceType ,lookbackPeriod,scope,term ,currency\r\n| order by sum_savings desc\r\n",
                                "size": 0,
                                "title": "Reservations Summary",
                                "noDataMessage": "No reservations recommendations found!",
                                "noDataMessageStyle": 3,
                                "queryType": 1,
                                "resourceType": "microsoft.resourcegraph/resources",
                                "crossComponentResources": [
                                  "{Subscription}"
                                ],
                                "visualization": "categoricalbar",
                                "gridSettings": {
                                  "filter": true,
                                  "labelSettings": [
                                    {
                                      "columnId": "reservedResourceType",
                                      "label": "Resource type"
                                    },
                                    {
                                      "columnId": "lookbackPeriod",
                                      "label": "Look back period"
                                    },
                                    {
                                      "columnId": "scope",
                                      "label": "Scope"
                                    },
                                    {
                                      "columnId": "term",
                                      "label": "Term"
                                    },
                                    {
                                      "columnId": "currency",
                                      "label": "Currency"
                                    },
                                    {
                                      "columnId": "sum_savings",
                                      "label": "Total annual savings"
                                    }
                                  ]
                                },
                                "chartSettings": {
                                  "xAxis": "reservedResourceType",
                                  "yAxis": [
                                    "sum_savings"
                                  ],
                                  "group": "reservedResourceType",
                                  "createOtherGroup": 0,
                                  "showLegend": true,
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 0,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "conditionalVisibility": {
                                "parameterName": "checkReservations",
                                "comparison": "isNotEqualTo"
                              },
                              "name": "query - Reservations Summary"
                            },
                            {
                              "type": 3,
                              "content": {
                                "version": "KqlItem/1.0",
                                "query": "AdvisorResources \r\n| where type == 'microsoft.advisor/recommendations' \r\n| where properties.category == 'Cost' and properties.shortDescription.solution contains \"Reserved Instance\" \r\n| extend\r\nrecommendationTypeId = tostring(properties.recommendationTypeId),\r\nreservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nterm=tostring(properties.extendedProperties.term),\r\nstableId = name,\r\nsubscriptionId = tostring(properties.extendedProperties.subId)\r\n| where term == \"{term}\" and lookbackPeriod == \"{LookBackPeriod}\" and reservedResourceType in ({resourceType})\r\n| extend subscriptionId,stableId\r\n| join kind = leftouter\r\n(advisorresources | where type=~'microsoft.advisor/suppressions'\r\n| extend tokens = split(id, '/')\r\n| extend stableId = iff(array_length(tokens) > 3, tokens[(array_length(tokens)-3)], '')\r\n| extend expirationTimeStamp = todatetime(iff(strcmp(tostring(properties.ttl), '-1') == 0, '9999-12-31', properties.expirationTimeStamp))\r\n| where expirationTimeStamp > now()\r\n| project stableId, expirationTimeStamp)\r\non stableId\r\n| where isempty(expirationTimeStamp)\r\n| extend subscriptionId,stableId\r\n| join kind = leftouter\r\n(advisorresources \r\n| where type =~ 'microsoft.advisor/configurations'\r\n| where isempty(resourceGroup) == true\r\n| extend\r\nmaxCpuP95 = properties.extendedProperties.MaxCpuP95,\r\nlowCpuThreshold = properties.lowCpuThreshold,\r\nexcludeRecomm = properties.exclude,\r\nreservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nscope=tostring(properties.extendedProperties.scope),\r\nterm=tostring(properties.extendedProperties.term),\r\nRecommendation=tostring(properties.shortDescription.solution),  \r\nstableId = name,\r\nsubscriptionId = tostring(properties.extendedProperties.subId))\r\non subscriptionId\r\n| extend isActive1 = iff(isnull(excludeRecomm), true, tobool(excludeRecomm) == false)\r\n| extend isActive2 = iff(recommendationTypeId == 'e10b1381-5f0a-47ff-8c7b-37bd13d7c974', iff((isnotempty(lowCpuThreshold) and isnotempty(maxCpuP95)), toint(maxCpuP95) < toint(lowCpuThreshold), iff((isempty(maxCpuP95) or toint(maxCpuP95) < 5), true, false)), true)\r\n| where isActive1 == true and isActive2 == true\r\n| join kind = leftouter\r\n(advisorresources | where type =~ 'microsoft.advisor/configurations' | where isnotempty(resourceGroup) == true\r\n| project subscriptionId, resourceGroup, excludeProperty = properties.exclude)\r\non subscriptionId, resourceGroup\r\n| extend isActive3 = iff(isnull(excludeProperty), true, tobool(excludeProperty) == false)\r\n| where isActive3 == true\r\n| extend reservedResourceType=tostring(properties.extendedProperties.reservedResourceType),\r\nlookbackPeriod=tostring(strcat(\"Last \",properties.extendedProperties.lookbackPeriod,\" days\")),\r\nscope=tostring(properties.extendedProperties.scope),\r\nterm=tostring(properties.extendedProperties.term),\r\nsavings=todouble(properties.extendedProperties.annualSavingsAmount),\r\nsavingsAmount = todouble(properties.extendedProperties.savingsAmount),\r\nRecommendation=tostring(properties.shortDescription.solution),  \r\ncurrency = tostring(properties.extendedProperties.savingsCurrency),\r\ndisplayQty = tostring(properties.extendedProperties.displayQty),\r\ndisplaySKU = tostring(properties.extendedProperties.displaySKU),\r\nregion = tostring(properties.extendedProperties.region),\r\nsubscription = tostring(properties.extendedProperties.subId)\r\n| where term == \"{term}\" and lookbackPeriod == \"{LookBackPeriod}\" and reservedResourceType in ({resourceType})\r\n| project Recommendation,reservedResourceType,displaySKU,displayQty,savings,currency,lookbackPeriod,term,region,subscription\r\n| order by savings desc\r\n",
                                "size": 0,
                                "title": "Reservations details",
                                "noDataMessage": "No reservations recommendations found!",
                                "noDataMessageStyle": 3,
                                "queryType": 1,
                                "resourceType": "microsoft.resourcegraph/resources",
                                "crossComponentResources": [
                                  "{Subscription}"
                                ],
                                "gridSettings": {
                                  "formatters": [
                                    {
                                      "columnMatch": "$gen_group",
                                      "formatter": 15,
                                      "formatOptions": {
                                        "linkTarget": null,
                                        "showIcon": true
                                      }
                                    },
                                    {
                                      "columnMatch": "Recommendation",
                                      "formatter": 5
                                    },
                                    {
                                      "columnMatch": "reservedResourceType",
                                      "formatter": 5
                                    },
                                    {
                                      "columnMatch": "subscription",
                                      "formatter": 15,
                                      "formatOptions": {
                                        "linkTarget": null,
                                        "showIcon": true
                                      }
                                    }
                                  ],
                                  "filter": true,
                                  "hierarchySettings": {
                                    "treeType": 1,
                                    "groupBy": [
                                      "subscription",
                                      "reservedResourceType"
                                    ],
                                    "expandTopLevel": false
                                  },
                                  "labelSettings": [
                                    {
                                      "columnId": "displaySKU",
                                      "label": "SKU"
                                    },
                                    {
                                      "columnId": "displayQty",
                                      "label": "Quantity"
                                    },
                                    {
                                      "columnId": "savings",
                                      "label": "Total annual savings"
                                    },
                                    {
                                      "columnId": "currency",
                                      "label": "Currency"
                                    },
                                    {
                                      "columnId": "lookbackPeriod",
                                      "label": "Look back period"
                                    },
                                    {
                                      "columnId": "term",
                                      "label": "Term"
                                    },
                                    {
                                      "columnId": "region",
                                      "label": "Region"
                                    },
                                    {
                                      "columnId": "subscription",
                                      "label": "Subscription"
                                    }
                                  ]
                                },
                                "chartSettings": {
                                  "xAxis": "reservedResourceType",
                                  "yAxis": [
                                    "sum_savings"
                                  ],
                                  "group": "reservedResourceType",
                                  "createOtherGroup": 0,
                                  "showLegend": true,
                                  "ySettings": {
                                    "numberFormatSettings": {
                                      "unit": 0,
                                      "options": {
                                        "style": "decimal",
                                        "useGrouping": true
                                      }
                                    }
                                  }
                                }
                              },
                              "conditionalVisibility": {
                                "parameterName": "checkReservations",
                                "comparison": "isNotEqualTo",
                                "value": ""
                              },
                              "name": "query - Reservations details"
                            },
                            {
                              "type": 1,
                              "content": {
                                "json": "No Azure Advisor reservations recommendations were found for the selected subscription(s). For further details, please review the Azure Advisor Cost Optimization recommendations.",
                                "style": "warning"
                              },
                              "conditionalVisibility": {
                                "parameterName": "checkReservations",
                                "comparison": "isEqualTo"
                              },
                              "name": "NoReservationFound"
                            }
                          ]
                        },
                        "conditionalVisibility": {
                          "parameterName": "checkReservations",
                          "comparison": "isNotEqualTo"
                        },
                        "name": "group - 0"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedRateOptimizationSubTab",
                    "comparison": "isEqualTo",
                    "value": "reservations"
                  },
                  "name": "group - Reservations"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "template",
                    "loadFromTemplateId": "community-Workbooks/Azure Advisor/Cost Optimization/SavingsPlan",
                    "items": []
                  },
                  "conditionalVisibility": {
                    "parameterName": "selectedRateOptimizationSubTab",
                    "comparison": "isEqualTo",
                    "value": "SavingsPlan"
                  },
                  "name": "group - SavingsPlan"
                }
              ]
            },
            "name": "group - 0"
          }
        ]
      },
      "name": "group - 0"
    }
  ],
  "fallbackResourceIds": [
    "Azure Advisor"
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}
